YUI.add("breakout",function(Y){function Breakout(config){var rows=config.rows,columns=config.columns;this._host=config.host,this._container=Y.Node.create("<div style='position: absolute'>"),this._nodes=[],rows||columns||(rows=8),this._rows=rows,this._columns=columns,Breakout.superclass.constructor.apply(this,arguments)}Breakout.NS="breakout",Breakout.Name="Breakout",Y.extend(Breakout,Y.Plugin.Base,{_splitNode:function(){var r,c,x,y,host,row,width=Math.round(this._blockWidth),height=Math.round(this._blockHeight),rows=this._rows,columns=this._columns,origin=this._host.getXY(),container=this._container,nodes=this._nodes=[],mask=Y.Node.create('<div style="width: '+width+"px; height: "+height+'px; position: absolute; overflow: hidden">');for(container.setXY(origin),r=0;r<rows;r++)for(nodes[r]=row=[],y=r*height,c=0;c<columns;c++)x=c*width,host=this._host.cloneNode(!0),row[c]=mask.cloneNode().setXY([x,y]).append(host.setXY([-x,-y])),container.append(row[c]);this._swapIn()},_swapIn:function(){this._host.get("parentNode").append(this._container),this._host.setStyle("visibility","hidden")},_setup:function(){if(!this._nodes.length){var blockWidth,blockHeight,node=this._host,width=parseFloat(node.getComputedStyle("width")),height=parseFloat(node.getComputedStyle("height")),rows=this._rows,columns=this._columns;rows&&(blockHeight=height/rows),columns&&(blockWidth=width/columns),rows||(rows=height/(blockHeight=blockWidth)),columns||(columns=width/(blockWidth=blockHeight)),this._container.setStyles({width:width,height:height}),this._width=width,this._height=height,this._blockWidth=blockWidth,this._blockHeight=blockHeight,this._rows=rows,this._columns=columns,this._splitNode()}},_forEach:function(effect,options){this._setup(),this._swapIn();var r,c,anim,piece,delay,rows=this._rows,columns=this._columns,randomization=(options=options||{},Math.abs(options.random||0)),running=0,container=this._container,that=this;for(options.crop&&container.setStyle("overflow","hidden"),r=0;r<rows;r++)for(c=0;c<columns;c++)running++,piece=this._nodes[r][c],anim=effect.call(this,piece,r,c,rows,columns),delay=r+c,options.reverse&&(delay=rows+columns-delay),anim.animation.on("end",function(){--running||(that._container.remove(),options.unhide&&that._host.setStyle("visibility","visible"),options.crop&&container.setStyle("overflow","visible"),that.fire("end"))}),function(a){var opacity,random=1-Math.random()*randomization;options.fade?(opacity=options.unhide?0:1,Y.mix(a.animation.get("from"),{opacity:opacity}),Y.mix(a.animation.get("to"),{opacity:1-opacity})):piece.setStyle("opacity",1),setTimeout(function(){a.animation.run()},a.interval*delay*random)}(anim)},explode:function(options){"fade"in(options=options||{})||(options.fade=!0);var randomization=Math.abs(options.random||0);this._forEach(function(node,row,column,rows,columns){var to,distance=2*(options.distance||1.5),duration=options.duration||1e3,easing=options.easing||Y.Easing.easeOutStrong,center_x=(columns-1)/2,center_y=(rows-1)/2,delta_y=row-center_y;return to={left:((column-center_x)*(distance*=1-Math.random()*randomization)+center_x)*this._blockWidth,top:(delta_y*distance+center_y)*this._blockHeight},options.unhide&&(node.setStyles(to),to={left:column*this._blockWidth,top:row*this._blockHeight}),anim=new Y.Anim({node:node,easing:easing,to:to,duration:duration/1e3}),{animation:anim,interval:0}},options)},sheer:function(options){var distance=(options=options||{}).distance||1,duration=options.duration||1e3,interval=options.interval||0,easing=options.easing||Y.Easing.easeIn;this._forEach(function(node,row,column,rows,columns){var evenCol=!(column%2),evenRow=!(row%2),width=this._width,height=this._height,from={left:column*this._blockWidth,top:row*this._blockHeight},to={};return 1===columns&&(evenCol=evenRow),1===rows&&(evenRow=!evenCol),evenCol?evenRow?to.left=from.left-distance*width:to.top=from.top+distance*height:evenRow?to.top=from.top-distance*height:to.left=from.left+distance*width,options.unhide&&(to=from),anim=new Y.Anim({node:node,easing:easing,to:to,duration:duration/1e3}),{animation:anim,interval:interval}},options)},pinwheel:function(options){var distance=(options=options||{}).distance||1,duration=options.duration||1e3,easing=options.easing||Y.Easing.easeOut;this._forEach(function(node,row,column,rows,columns){var evenCol=!(column%2),evenRow=!(row%2),width=this._blockWidth,height=this._blockHeight,from={left:column*width,top:row*height,width:width,height:height},to={};return evenCol&&(evenRow?to.top=from.top+distance*height:to.left=from.left+distance*width),evenCol===evenRow?to.height=height*(1-distance):to.width=width*(1-distance),options.unhide&&(to=from),anim=new Y.Anim({node:node,easing:easing,to:to,duration:duration/1e3}),{animation:anim,interval:0}},options)},disintegrate:function(options){(options=options||{}).reverse=!0,this._forEach(function(node,row,column,rows,columns){var distance=(options.distance||1.5)*this._height,duration=options.duration||1e3,easing=options.easing||Y.Easing.easeBoth,interval=duration/(rows+columns)*2,y=row*this._blockHeight;return distance<0&&(row=rows-row-1),options.unhide?node.setStyle("top",y-distance):y+=distance,{animation:new Y.Anim({node:node,easing:easing,to:{top:y},duration:duration/1e3}),interval:interval}},options)},fadeOut:function(options){(options=options||{}).fade=!0,this._forEach(function(node,row,column,rows,columns){var interval,duration=options.duration||700,easing=(options.unhide,options.easing);return easing||(easing=options.unhide?Y.Easing.easeOut:Y.Easing.easeInStrong),interval=duration/(rows+columns)*2,{animation:new Y.Anim({node:node,easing:easing,from:{},to:{},duration:duration/1e3}),interval:interval}},options)},_inverse:function(effect,options){(options=options||{}).unhide=!0,effect.call(this,options)},unsheer:function(options){this._inverse(this.sheer,options)},unpinwheel:function(options){this._inverse(this.pinwheel,options)},converge:function(options){this._inverse(this.explode,options)},fadeIn:function(options){this._inverse(this.fadeOut,options)},build:function(options){this._inverse(this.disintegrate,options)}}),Y.Breakout=Breakout},"1.0",{requires:["plugin","anim"]}),void 0!==YUI&&(YUI._YUI=YUI);var YUI=function(){var i=0,Y=this,args=arguments,l=args.length,instanceOf=function(o,type){return o&&o.hasOwnProperty&&o instanceof type},gconf="undefined"!=typeof YUI_config&&YUI_config;if(instanceOf(Y,YUI)?(Y._init(),YUI.GlobalConfig&&Y.applyConfig(YUI.GlobalConfig),gconf&&Y.applyConfig(gconf),l||(Y._afterConfig(),Y._setup())):Y=new YUI({base:"js/yui-unpack/yui/build/"}),l){for(;i<l;i++)Y.applyConfig(args[i]);Y._afterConfig(),Y._setup()}return Y.instanceOf=instanceOf,Y},requirejs,require,define,requirejs,require,define;!function(){var proto,prop,VERSION="3.18.1",BASE="http://yui.yahooapis.com/",NOOP=function(){},SLICE=Array.prototype.slice,APPLY_TO_AUTH={"io.xdrReady":1,"io.xdrResponse":1,"SWF.eventHandler":1},hasWin="undefined"!=typeof window,win=hasWin?window:null,doc=hasWin?win.document:null,docEl=doc&&doc.documentElement,docClass=docEl&&docEl.className,instances={},time=(new Date).getTime(),add=function(el,type,fn,capture){el&&el.addEventListener?el.addEventListener(type,fn,capture):el&&el.attachEvent&&el.attachEvent("on"+type,fn)},remove=function(el,type,fn,capture){if(el&&el.removeEventListener)try{el.removeEventListener(type,fn,capture)}catch(ex){}else el&&el.detachEvent&&el.detachEvent("on"+type,fn)},handleReady=function(){YUI.Env.DOMReady=!0,hasWin&&remove(doc,"DOMContentLoaded",handleReady)},handleLoad=function(){YUI.Env.windowLoaded=!0,YUI.Env.DOMReady=!0,hasWin&&remove(window,"load",handleLoad)},getLoader=function(Y,o){var loader=Y.Env._loader,lCore=["loader-base"],mods=YUI.Env.mods;return loader?(loader.ignoreRegistered=!1,loader.onEnd=null,loader.data=null,loader.required=[],loader.loadType=null):(loader=new Y.Loader(Y.config),Y.Env._loader=loader),mods&&mods.loader&&(lCore=[].concat(lCore,YUI.Env.loaderExtras)),YUI.Env.core=Y.Array.dedupe([].concat(YUI.Env.core,lCore)),loader},clobber=function(r,s){for(var i in s)s.hasOwnProperty(i)&&(r[i]=s[i])},ALREADY_DONE={success:!0};for(prop in docEl&&-1==docClass.indexOf("yui3-js-enabled")&&(docClass&&(docClass+=" "),docClass+="yui3-js-enabled",docEl.className=docClass),VERSION.indexOf("@")>-1&&(VERSION="3.5.0"),proto={applyConfig:function(o){o=o||NOOP;var attr,name,config=this.config,mods=config.modules,groups=config.groups,aliases=config.aliases,loader=this.Env._loader;for(name in o)o.hasOwnProperty(name)&&(attr=o[name],mods&&"modules"==name?clobber(mods,attr):aliases&&"aliases"==name?clobber(aliases,attr):groups&&"groups"==name?clobber(groups,attr):"win"==name?(config[name]=attr&&attr.contentWindow||attr,config.doc=config[name]?config[name].document:null):"_yuid"==name||(config[name]=attr));loader&&loader._config(o)},_config:function(o){this.applyConfig(o)},_init:function(){var filter,el,prop,Y=this,G_ENV=YUI.Env,Env=Y.Env;if(Y.version=VERSION,!Env){if(Y.Env={core:["get","features","intl-base","yui-log","yui-later","loader-base","loader-rollup","loader-yui3"],loaderExtras:["loader-rollup","loader-yui3"],mods:{},versions:{},base:BASE,cdn:BASE+VERSION+"/",_idx:0,_used:{},_attached:{},_exported:{},_missed:[],_yidx:0,_uidx:0,_guidp:"y",_loaded:{},_BASE_RE:/(?:\?(?:[^&]*&)*([^&]*))?\b(yui(?:-\w+)?)\/\2(?:-(min|debug))?\.js/,parseBasePath:function(src,pattern){var path,filter,match=src.match(pattern);return match&&(path=RegExp.leftContext||src.slice(0,src.indexOf(match[0])),filter=match[3],match[1]&&(path+="?"+match[1]),path={filter:filter,path:path}),path},getBase:G_ENV&&G_ENV.getBase||function(pattern){var parsed,i,len,src,nodes=doc&&doc.getElementsByTagName("script")||[],path=Env.cdn;for(i=0,len=nodes.length;i<len;++i)if((src=nodes[i].src)&&(parsed=Y.Env.parseBasePath(src,pattern))){filter=parsed.filter,path=parsed.path;break}return path}},(Env=Y.Env)._loaded[VERSION]={},G_ENV&&Y!==YUI)Env._yidx=++G_ENV._yidx,Env._guidp=("yui_"+VERSION+"_"+Env._yidx+"_"+time).replace(/[^a-z0-9_]+/g,"_");else if(YUI._YUI){for(prop in G_ENV=YUI._YUI.Env,Env._yidx+=G_ENV._yidx,Env._uidx+=G_ENV._uidx,G_ENV)prop in Env||(Env[prop]=G_ENV[prop]);delete YUI._YUI}Y.id=Y.stamp(Y),instances[Y.id]=Y}Y.constructor=YUI,Y.config=Y.config||{bootstrap:!0,cacheUse:!0,debug:!0,doc:doc,fetchCSS:!0,throwFail:!0,useBrowserConsole:!0,useNativeES5:!0,win:win},doc&&!doc.getElementById("yui3-css-stamp")?((el=doc.createElement("div")).innerHTML='<div id="yui3-css-stamp" style="position: absolute !important; visibility: hidden !important"></div>',YUI.Env.cssStampEl=el.firstChild,doc.body?doc.body.appendChild(YUI.Env.cssStampEl):docEl.insertBefore(YUI.Env.cssStampEl,docEl.firstChild)):doc&&doc.getElementById("yui3-css-stamp")&&!YUI.Env.cssStampEl&&(YUI.Env.cssStampEl=doc.getElementById("yui3-css-stamp")),Y.config.lang=Y.config.lang||"en-US",Y.config.base=YUI.config.base||YUI.config.defaultBase&&YUI.config.root&&YUI.config.defaultBase+YUI.config.root||Y.Env.getBase(Y.Env._BASE_RE),filter&&"mindebug".indexOf(filter)||(filter="min"),filter=filter?"-"+filter:filter,Y.config.loaderPath=YUI.config.loaderPath||"loader/loader"+filter+".js"},_afterConfig:function(){this.config.hasOwnProperty("global")||(this.config.global=Function("return this")())},_setup:function(){var i,Y=this,core=[],mods=YUI.Env.mods,extendedCore=Y.config.extendedCore||[],extras=Y.config.core||[].concat(YUI.Env.core).concat(extendedCore);for(i=0;i<extras.length;i++)mods[extras[i]]&&core.push(extras[i]);Y._attach(["yui-base"]),Y._attach(core),Y.Loader&&getLoader(Y)},applyTo:function(id,method,args){if(!(method in APPLY_TO_AUTH))return this.log(method+": applyTo not allowed","warn","yui"),null;var nest,m,i,instance=instances[id];if(instance){for(nest=method.split("."),m=instance,i=0;i<nest.length;i+=1)(m=m[nest[i]])||this.log("applyTo not found: "+method,"warn","yui");return m&&m.apply(instance,args)}return null},add:function(name,fn,version,details){details=details||{};var loader,inst,modInfo,i,env=YUI.Env,mod={name:name,fn:fn,version:version,details:details},applied={},versions=env.versions;for(i in env.mods[name]=mod,versions[version]=versions[version]||{},versions[version][name]=mod,instances)instances.hasOwnProperty(i)&&(applied[(inst=instances[i]).id]||(applied[inst.id]=!0,(loader=inst.Env._loader)&&((modInfo=loader.getModuleInfo(name))&&!modInfo.temp||loader.addModule(details,name))));return this},_attach:function(r,moot){var i,name,mod,details,req,use,after,j,def,modArgs,esCompat,reqlen,modInfo,condition,__exports__,__imports__,mods=YUI.Env.mods,aliases=YUI.Env.aliases,Y=this,cache=YUI.Env._renderedMods,loader=Y.Env._loader,done=Y.Env._attached,exported=Y.Env._exported,len=r.length,c=[];for(i=0;i<len;i++)if(mod=mods[name=r[i]],c.push(name),loader&&loader.conditions[name])for(j in loader.conditions[name])loader.conditions[name].hasOwnProperty(j)&&((def=loader.conditions[name][j])&&(def.ua&&Y.UA[def.ua]||def.test&&def.test(Y)))&&c.push(def.name);for(len=(r=c).length,i=0;i<len;i++)if(!done[r[i]]){if(mod=mods[name=r[i]],aliases&&aliases[name]&&!mod){Y._attach(aliases[name]);continue}if(mod){for(done[name]=!0,j=0;j<Y.Env._missed.length;j++)Y.Env._missed[j]===name&&(Y.message("Found: "+name+" (was reported as missing earlier)","warn","yui"),Y.Env._missed.splice(j,1));if(loader&&!loader._canBeAttached(name))return Y.log("Failed to attach module "+name,"warn","yui"),!0;if(loader&&cache&&cache[name]&&cache[name].temp){for(j in loader.getRequires(cache[name]),req=[],(modInfo=loader.getModuleInfo(name)).expanded_map)modInfo.expanded_map.hasOwnProperty(j)&&req.push(j);Y._attach(req)}if(req=(details=mod.details).requires,esCompat=details.es,use=details.use,after=details.after,details.lang&&(req=req||[]).unshift("intl"),req)for(reqlen=req.length,j=0;j<reqlen;j++)if(!done[req[j]]){if(!Y._attach(req))return!1;break}if(after)for(j=0;j<after.length;j++)if(!done[after[j]]){if(!Y._attach(after,!0))return!1;break}if(mod.fn){if(modArgs=[Y,name],esCompat&&(__imports__={},__exports__={},modArgs.push(__imports__,__exports__),req))for(reqlen=req.length,j=0;j<reqlen;j++)__imports__[req[j]]=exported.hasOwnProperty(req[j])?exported[req[j]]:Y;if(Y.config.throwFail)__exports__=mod.fn.apply(esCompat?void 0:mod,modArgs);else try{__exports__=mod.fn.apply(esCompat?void 0:mod,modArgs)}catch(e){return Y.error("Attach error: "+name,e,name),!1}esCompat&&(exported[name]=__exports__,(condition=mod.details.condition)&&"instead"===condition.when&&(exported[condition.trigger]=__exports__))}if(use)for(j=0;j<use.length;j++)if(!done[use[j]]){if(!Y._attach(use))return!1;break}}else(modInfo=loader&&loader.getModuleInfo(name))&&(mod=modInfo,moot=!0),!moot&&name&&-1===name.indexOf("skin-")&&-1===name.indexOf("css")&&(Y.Env._missed.push(name),Y.Env._missed=Y.Array.dedupe(Y.Env._missed),Y.message("NOT loaded: "+name,"warn","yui"))}return!0},_delayCallback:function(cb,until){var Y=this,mod=["event-base"];return"load"===(until=Y.Lang.isObject(until)?until:{event:until}).event&&mod.push("event-synthetic"),Y.log("Delaying use callback until: "+until.event,"info","yui"),function(){Y.log("Use callback fired, waiting on delay","info","yui");var args=arguments;Y._use(mod,function(){Y.log("Delayed use wrapper callback after dependencies","info","yui"),Y.on(until.event,function(){args[1].delayUntil=until.event,Y.log("Delayed use callback done after "+until.event,"info","yui"),cb.apply(Y,args)},until.args)})}},use:function(){var name,args=SLICE.call(arguments,0),callback=args[args.length-1],Y=this,i=0,Env=Y.Env,provisioned=!0;if(Y.Lang.isFunction(callback)?(args.pop(),Y.config.delayUntil&&(callback=Y._delayCallback(callback,Y.config.delayUntil))):callback=null,Y.Lang.isArray(args[0])&&(args=args[0]),Y.config.cacheUse){for(;name=args[i++];)if(!Env._attached[name]){provisioned=!1;break}if(provisioned)return args.length&&Y.log("already provisioned: "+args,"info","yui"),Y._notify(callback,ALREADY_DONE,args),Y}return Y._loading?(Y._useQueue=Y._useQueue||new Y.Queue,Y._useQueue.add([args,callback])):Y._use(args,function(Y,response){Y._notify(callback,response,args)}),Y},require:function(){var callback,args=SLICE.call(arguments);"function"==typeof args[args.length-1]&&(callback=args.pop(),args.push(function(Y){var i,length=args.length,exported=Y.Env._exported,__imports__={};for(i=0;i<length;i++)exported.hasOwnProperty(args[i])&&(__imports__[args[i]]=exported[args[i]]);callback.call(void 0,Y,__imports__)})),this.use.apply(this,args)},_notify:function(callback,response,args){if(!response.success&&this.config.loadErrorFn)this.config.loadErrorFn.call(this,this,callback,response,args);else if(callback)if(this.Env._missed&&this.Env._missed.length&&(response.msg="Missing modules: "+this.Env._missed.join(),response.success=!1),this.config.throwFail)callback(this,response);else try{callback(this,response)}catch(e){this.error("use callback error",e,args)}},_use:function(args,callback){this.Array||this._attach(["yui-base"]);var len,loader,handleBoot,i,Y=this,G_ENV=YUI.Env,mods=G_ENV.mods,Env=Y.Env,used=Env._used,aliases=G_ENV.aliases,queue=G_ENV._loaderQueue,firstArg=args[0],YArray=Y.Array,config=Y.config,boot=config.bootstrap,missing=[],r=[],fetchCSS=config.fetchCSS,process=function(names,skip){var name,len,m,req,use,i=0,a=[];if(names.length){if(aliases){for(len=names.length,i=0;i<len;i++)aliases[names[i]]&&!mods[names[i]]?a=[].concat(a,aliases[names[i]]):a.push(names[i]);names=a}for(len=names.length,i=0;i<len;i++)name=names[i],skip||r.push(name),used[name]||(req=null,use=null,(m=mods[name])?(used[name]=!0,req=m.details.requires,use=m.details.use):G_ENV._loaded[VERSION][name]?used[name]=!0:missing.push(name),req&&req.length&&process(req),use&&use.length&&process(use,1))}},handleLoader=function(fromLoader){var redo,origMissing,response=fromLoader||{success:!0,msg:"not dynamic"},ret=!0,data=response.data;Y._loading=!1,data&&(origMissing=missing,missing=[],r=[],process(data),(redo=missing.length)&&[].concat(missing).sort().join()==origMissing.sort().join()&&(redo=!1)),redo&&data?(Y._loading=!0,Y._use(missing,function(){Y.log("Nested use callback: "+data,"info","yui"),Y._attach(data)&&Y._notify(callback,response,data)})):(data&&(ret=Y._attach(data)),ret&&Y._notify(callback,response,args)),Y._useQueue&&Y._useQueue.size()&&!Y._loading&&Y._use.apply(Y,Y._useQueue.next())};if("*"===firstArg){for(i in args=[],mods)mods.hasOwnProperty(i)&&args.push(i);return Y._attach(args)&&handleLoader(),Y}return!mods.loader&&!mods["loader-base"]||Y.Loader||(Y.log("Loader was found in meta, but it is not attached. Attaching..","info","yui"),Y._attach(["loader"+(mods.loader?"":"-base")])),boot&&Y.Loader&&args.length&&(Y.log("Using loader to expand dependencies","info","yui"),(loader=getLoader(Y)).require(args),loader.ignoreRegistered=!0,loader._boot=!0,loader.calculate(null,fetchCSS?null:"js"),args=loader.sorted,loader._boot=!1),process(args),(len=missing.length)&&(len=(missing=YArray.dedupe(missing)).length,Y.log("Modules missing: "+missing+", "+missing.length,"info","yui")),boot&&len&&Y.Loader?(Y.log("Using Loader","info","yui"),Y._loading=!0,(loader=getLoader(Y)).onEnd=handleLoader,loader.context=Y,loader.data=args,loader.ignoreRegistered=!1,loader.require(missing),loader.insert(null,fetchCSS?null:"js")):boot&&len&&Y.Get&&!Env.bootstrapped?(Y._loading=!0,handleBoot=function(){Y._loading=!1,queue.running=!1,Env.bootstrapped=!0,G_ENV._bootstrapping=!1,Y._attach(["loader"])&&Y._use(args,callback)},G_ENV._bootstrapping?(Y.log("Waiting for loader","info","yui"),queue.add(handleBoot)):(G_ENV._bootstrapping=!0,Y.log("Fetching loader: "+config.base+config.loaderPath,"info","yui"),Y.Get.script(config.base+config.loaderPath,{onEnd:handleBoot}))):(Y.log("Attaching available dependencies: "+args,"info","yui"),Y._attach(args)&&handleLoader()),Y},namespace:function(){for(var o,j,d,arg,a=arguments,i=0;i<a.length;i++)if(o=this,(arg=a[i]).indexOf(".")>-1)for(j="YAHOO"==(d=arg.split("."))[0]?1:0;j<d.length;j++)o[d[j]]=o[d[j]]||{},o=o[d[j]];else o[arg]=o[arg]||{},o=o[arg];return o},log:NOOP,message:NOOP,dump:function(o){return""+o},error:function(msg,e,src){var ret,Y=this;if(Y.config.errorFn&&(ret=Y.config.errorFn.apply(Y,arguments)),!ret)throw e||new Error(msg);return Y.message(msg,"error",""+src),Y},guid:function(pre){var id=this.Env._guidp+"_"+ ++this.Env._uidx;return pre?pre+id:id},stamp:function(o,readOnly){var uid;if(!o)return o;if(!(uid=o.uniqueID&&o.nodeType&&9!==o.nodeType?o.uniqueID:"string"==typeof o?o:o._yuid)&&(uid=this.guid(),!readOnly))try{o._yuid=uid}catch(e){uid=null}return uid},destroy:function(){var Y=this;Y.Event&&Y.Event._unload(),delete instances[Y.id],delete Y.Env,delete Y.config}},YUI.prototype=proto,proto)proto.hasOwnProperty(prop)&&(YUI[prop]=proto[prop]);YUI.applyConfig=function(o){o&&(YUI.GlobalConfig&&this.prototype.applyConfig.call(this,YUI.GlobalConfig),this.prototype.applyConfig.call(this,o),YUI.GlobalConfig=this.config)},YUI._init(),hasWin?(add(doc,"DOMContentLoaded",handleReady),add(window,"load",handleLoad)):(handleReady(),handleLoad()),YUI.Env.add=add,YUI.Env.remove=remove,"object"==typeof exports&&(exports.YUI=YUI,YUI.setLoadHook=function(fn){YUI._getLoadHook=fn},YUI._getLoadHook=null),YUI.Env[VERSION]={}}(),YUI.add("yui-base",function(Y,NAME){var L=Y.Lang||(Y.Lang={}),STRING_PROTO=String.prototype,TOSTRING=Object.prototype.toString,TYPES={undefined:"undefined",number:"number",boolean:"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"},SUBREGEX=/\{\s*([^|}]+?)\s*(?:\|([^}]*))?\s*\}/g,WHITESPACE="\t\n\v\f\r   ᠎           \u2028\u2029  　\ufeff",TRIM_LEFT_REGEX=new RegExp("^[\t-\r   ᠎ - \u2028\u2029  　\ufeff]+"),TRIM_RIGHT_REGEX=new RegExp("[\t-\r   ᠎ - \u2028\u2029  　\ufeff]+$"),TRIMREGEX=new RegExp(TRIM_LEFT_REGEX.source+"|"+TRIM_RIGHT_REGEX.source,"g"),NATIVE_FN_REGEX=/\{\s*\[(?:native code|function)\]\s*\}/i;L._isNative=function(fn){return!!(Y.config.useNativeES5&&fn&&NATIVE_FN_REGEX.test(fn))},L.isArray=L._isNative(Array.isArray)?Array.isArray:function(o){return"array"===L.type(o)},L.isBoolean=function(o){return"boolean"==typeof o},L.isDate=function(o){return"date"===L.type(o)&&"Invalid Date"!==o.toString()&&!isNaN(o)},L.isFunction=function(o){return"function"===L.type(o)},L.isNull=function(o){return null===o},L.isNumber=function(o){return"number"==typeof o&&isFinite(o)},L.isObject=function(o,failfn){var t=typeof o;return o&&("object"===t||!failfn&&("function"===t||L.isFunction(o)))||!1},L.isRegExp=function(value){return"regexp"===L.type(value)},L.isString=function(o){return"string"==typeof o},L.isUndefined=function(o){return void 0===o},L.isValue=function(o){var t=L.type(o);switch(t){case"number":return isFinite(o);case"null":case"undefined":return!1;default:return!!t}},L.now=Date.now||function(){return(new Date).getTime()},L.sub=function(s,o){return s.replace?s.replace(SUBREGEX,function(match,key){var val=key.indexOf(".")>-1?function value(obj,key){var subkey;return void 0!==obj[key]?obj[key]:(subkey=(key=key.split(".")).slice(1).join("."),key=key[0],subkey&&"object"==typeof obj[key]&&null!==obj[key]?value(obj[key],subkey):void 0)}(o,key):o[key];return void 0===val?match:val}):s},L.trim=L._isNative(STRING_PROTO.trim)&&!WHITESPACE.trim()?function(s){return s&&s.trim?s.trim():s}:function(s){try{return s.replace(TRIMREGEX,"")}catch(e){return s}},L.trimLeft=L._isNative(STRING_PROTO.trimLeft)&&!WHITESPACE.trimLeft()?function(s){return s.trimLeft()}:function(s){return s.replace(TRIM_LEFT_REGEX,"")},L.trimRight=L._isNative(STRING_PROTO.trimRight)&&!WHITESPACE.trimRight()?function(s){return s.trimRight()}:function(s){return s.replace(TRIM_RIGHT_REGEX,"")},L.type=function(o){return TYPES[typeof o]||TYPES[TOSTRING.call(o)]||(o?"object":"null")};var Lang=Y.Lang,Native=Array.prototype,hasOwn=Object.prototype.hasOwnProperty;function YArray(thing,startIndex,force){var len,result;if(startIndex||(startIndex=0),force||YArray.test(thing))try{return Native.slice.call(thing,startIndex)}catch(ex){for(result=[],len=thing.length;startIndex<len;++startIndex)result.push(thing[startIndex]);return result}return[thing]}function Queue(){this._init(),this.add.apply(this,arguments)}Y.Array=YArray,YArray.dedupe=Lang._isNative(Object.create)?function(array){var i,item,len,hash=Object.create(null),results=[];for(i=0,len=array.length;i<len;++i)hash[item=array[i]]||(hash[item]=1,results.push(item));return results}:function(array){var i,item,len,hash={},results=[];for(i=0,len=array.length;i<len;++i)item=array[i],hasOwn.call(hash,item)||(hash[item]=1,results.push(item));return results},YArray.each=YArray.forEach=Lang._isNative(Native.forEach)?function(array,fn,thisObj){return Native.forEach.call(array||[],fn,thisObj||Y),Y}:function(array,fn,thisObj){for(var i=0,len=array&&array.length||0;i<len;++i)i in array&&fn.call(thisObj||Y,array[i],i,array);return Y},YArray.hash=function(keys,values){var i,len,hash={},vlen=values&&values.length||0;for(i=0,len=keys.length;i<len;++i)i in keys&&(hash[keys[i]]=!(vlen>i&&i in values)||values[i]);return hash},YArray.indexOf=Lang._isNative(Native.indexOf)?function(array,value,from){return Native.indexOf.call(array,value,from)}:function(array,value,from){var len=array.length;for((from=((from=+from||0)>0||-1)*Math.floor(Math.abs(from)))<0&&(from+=len)<0&&(from=0);from<len;++from)if(from in array&&array[from]===value)return from;return-1},YArray.numericSort=function(a,b){return a-b},YArray.some=Lang._isNative(Native.some)?function(array,fn,thisObj){return Native.some.call(array,fn,thisObj)}:function(array,fn,thisObj){for(var i=0,len=array.length;i<len;++i)if(i in array&&fn.call(thisObj,array[i],i,array))return!0;return!1},YArray.test=function(obj){var result=0;if(Lang.isArray(obj))result=1;else if(Lang.isObject(obj))try{!("length"in obj)||obj.tagName||obj.scrollTo&&obj.document||obj.apply||(result=2)}catch(ex){}return result},Queue.prototype={_init:function(){this._q=[]},next:function(){return this._q.shift()},last:function(){return this._q.pop()},add:function(){return this._q.push.apply(this._q,arguments),this},size:function(){return this._q.length}},Y.Queue=Queue,YUI.Env._loaderQueue=YUI.Env._loaderQueue||new Queue;hasOwn=Object.prototype.hasOwnProperty;var isObject=Y.Lang.isObject;Y.cached=function(source,cache,refetch){return cache||(cache={}),function(arg){var key=arguments.length>1?Array.prototype.join.call(arguments,"__"):String(arg);return key in cache&&(!refetch||cache[key]!=refetch)||(cache[key]=source.apply(source,arguments)),cache[key]}},Y.getLocation=function(){var win=Y.config.win;return win&&win.location},Y.merge=function(){for(var key,obj,i=0,len=arguments.length,result={};i<len;++i)for(key in obj=arguments[i])hasOwn.call(obj,key)&&(result[key]=obj[key]);return result},Y.mix=function(receiver,supplier,overwrite,whitelist,mode,merge){var alwaysOverwrite,exists,from,i,key,len,to;if(!receiver||!supplier)return receiver||Y;if(mode){if(2===mode&&Y.mix(receiver.prototype,supplier.prototype,overwrite,whitelist,0,merge),from=1===mode||3===mode?supplier.prototype:supplier,to=1===mode||4===mode?receiver.prototype:receiver,!from||!to)return receiver}else from=supplier,to=receiver;if(alwaysOverwrite=overwrite&&!merge,whitelist)for(i=0,len=whitelist.length;i<len;++i)key=whitelist[i],hasOwn.call(from,key)&&(exists=!alwaysOverwrite&&key in to,merge&&exists&&isObject(to[key],!0)&&isObject(from[key],!0)?Y.mix(to[key],from[key],overwrite,null,0,merge):!overwrite&&exists||(to[key]=from[key]));else{for(key in from)hasOwn.call(from,key)&&(exists=!alwaysOverwrite&&key in to,merge&&exists&&isObject(to[key],!0)&&isObject(from[key],!0)?Y.mix(to[key],from[key],overwrite,null,0,merge):!overwrite&&exists||(to[key]=from[key]));Y.Object._hasEnumBug&&Y.mix(to,from,overwrite,Y.Object._forceEnum,mode,merge)}return receiver};Lang=Y.Lang,hasOwn=Object.prototype.hasOwnProperty;var O=Y.Object=Lang._isNative(Object.create)?function(obj){return Object.create(obj)}:function(){function F(){}return function(obj){return F.prototype=obj,new F}}(),forceEnum=O._forceEnum=["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"],hasEnumBug=O._hasEnumBug=!{valueOf:0}.propertyIsEnumerable("valueOf"),hasProtoEnumBug=O._hasProtoEnumBug=function(){}.propertyIsEnumerable("prototype"),owns=O.owns=function(obj,key){return!!obj&&hasOwn.call(obj,key)};O.hasKey=owns,O.keys=Lang._isNative(Object.keys)&&!hasProtoEnumBug?Object.keys:function(obj){if(!Lang.isObject(obj))throw new TypeError("Object.keys called on a non-object");var i,key,len,keys=[];if(hasProtoEnumBug&&"function"==typeof obj)for(key in obj)owns(obj,key)&&"prototype"!==key&&keys.push(key);else for(key in obj)owns(obj,key)&&keys.push(key);if(hasEnumBug)for(i=0,len=forceEnum.length;i<len;++i)owns(obj,key=forceEnum[i])&&keys.push(key);return keys},O.values=function(obj){for(var keys=O.keys(obj),i=0,len=keys.length,values=[];i<len;++i)values.push(obj[keys[i]]);return values},O.size=function(obj){try{return O.keys(obj).length}catch(ex){return 0}},O.hasValue=function(obj,value){return Y.Array.indexOf(O.values(obj),value)>-1},O.each=function(obj,fn,thisObj,proto){var key;for(key in obj)(proto||owns(obj,key))&&fn.call(thisObj||Y,obj[key],key,obj);return Y},O.some=function(obj,fn,thisObj,proto){var key;for(key in obj)if((proto||owns(obj,key))&&fn.call(thisObj||Y,obj[key],key,obj))return!0;return!1},O.getValue=function(o,path){if(Lang.isObject(o)){var i,p=Y.Array(path),l=p.length;for(i=0;void 0!==o&&i<l;i++)o=o[p[i]];return o}},O.setValue=function(o,path,val){var i,p=Y.Array(path),leafIdx=p.length-1,ref=o;if(leafIdx>=0){for(i=0;void 0!==ref&&i<leafIdx;i++)ref=ref[p[i]];if(void 0===ref)return;ref[p[i]]=val}return o},O.isEmpty=function(obj){return!O.keys(Object(obj)).length},YUI.Env.parseUA=function(subUA){var m,numberify=function(s){var c=0;return parseFloat(s.replace(/\./g,function(){return 1==c++?"":"."}))},win=Y.config.win,nav=win&&win.navigator,o={ie:0,opera:0,gecko:0,webkit:0,safari:0,chrome:0,mobile:null,air:0,phantomjs:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,silk:0,ubuntu:0,accel:!1,webos:0,caja:nav&&nav.cajaVersion,secure:!1,os:null,nodejs:0,winjs:!("undefined"==typeof Windows||!Windows.System),touchEnabled:!1},ua=subUA||nav&&nav.userAgent,loc=win&&win.location,href=loc&&loc.href;return o.userAgent=ua,o.secure=href&&0===href.toLowerCase().indexOf("https"),ua&&(/windows|win32/i.test(ua)?o.os="windows":/macintosh|mac_powerpc/i.test(ua)?o.os="macintosh":/android/i.test(ua)?o.os="android":/symbos/i.test(ua)?o.os="symbos":/linux/i.test(ua)?o.os="linux":/rhino/i.test(ua)&&(o.os="rhino"),/KHTML/.test(ua)&&(o.webkit=1),/IEMobile|XBLWP7/.test(ua)&&(o.mobile="windows"),/Fennec/.test(ua)&&(o.mobile="gecko"),(m=ua.match(/AppleWebKit\/([^\s]*)/))&&m[1]&&(o.webkit=numberify(m[1]),o.safari=o.webkit,/PhantomJS/.test(ua)&&(m=ua.match(/PhantomJS\/([^\s]*)/))&&m[1]&&(o.phantomjs=numberify(m[1])),/ Mobile\//.test(ua)||/iPad|iPod|iPhone/.test(ua)?(o.mobile="Apple",(m=ua.match(/OS ([^\s]*)/))&&m[1]&&(m=numberify(m[1].replace("_","."))),o.ios=m,o.os="ios",o.ipad=o.ipod=o.iphone=0,(m=ua.match(/iPad|iPod|iPhone/))&&m[0]&&(o[m[0].toLowerCase()]=o.ios)):((m=ua.match(/NokiaN[^\/]*|webOS\/\d\.\d/))&&(o.mobile=m[0]),/webOS/.test(ua)&&(o.mobile="WebOS",(m=ua.match(/webOS\/([^\s]*);/))&&m[1]&&(o.webos=numberify(m[1]))),/ Android/.test(ua)&&(o.mobile="Android",(m=ua.match(/Android ([^\s]*);/))&&m[1]&&(o.android=numberify(m[1]))),/Silk/.test(ua)&&((m=ua.match(/Silk\/([^\s]*)/))&&m[1]&&(o.silk=numberify(m[1])),o.android||(o.android=2.34,o.os="Android"),/Accelerated=true/.test(ua)&&(o.accel=!0))),(m=ua.match(/OPR\/(\d+\.\d+)/))&&m[1]?o.opera=numberify(m[1]):(m=ua.match(/(Chrome|CrMo|CriOS)\/([^\s]*)/))&&m[1]&&m[2]?(o.chrome=numberify(m[2]),o.safari=0,"CrMo"===m[1]&&(o.mobile="chrome")):(m=ua.match(/AdobeAIR\/([^\s]*)/))&&(o.air=m[0])),(m=ua.match(/Ubuntu\ (\d+\.\d+)/))&&m[1]&&(o.os="linux",o.ubuntu=numberify(m[1]),(m=ua.match(/\ WebKit\/([^\s]*)/))&&m[1]&&(o.webkit=numberify(m[1])),(m=ua.match(/\ Chromium\/([^\s]*)/))&&m[1]&&(o.chrome=numberify(m[1])),/ Mobile$/.test(ua)&&(o.mobile="Ubuntu")),o.webkit||(/Opera/.test(ua)?((m=ua.match(/Opera[\s\/]([^\s]*)/))&&m[1]&&(o.opera=numberify(m[1])),(m=ua.match(/Version\/([^\s]*)/))&&m[1]&&(o.opera=numberify(m[1])),/Opera Mobi/.test(ua)&&(o.mobile="opera",(m=ua.replace("Opera Mobi","").match(/Opera ([^\s]*)/))&&m[1]&&(o.opera=numberify(m[1]))),(m=ua.match(/Opera Mini[^;]*/))&&(o.mobile=m[0])):(m=ua.match(/MSIE ([^;]*)|Trident.*; rv:([0-9.]+)/))&&(m[1]||m[2])?o.ie=numberify(m[1]||m[2]):(m=ua.match(/Gecko\/([^\s]*)/))&&(o.gecko=1,(m=ua.match(/rv:([^\s\)]*)/))&&m[1]&&(o.gecko=numberify(m[1]),/Mobile|Tablet/.test(ua)&&(o.mobile="ffos"))))),!win||!nav||o.chrome&&o.chrome<6||(o.touchEnabled="ontouchstart"in win||"msMaxTouchPoints"in nav&&nav.msMaxTouchPoints>0),subUA||("object"==typeof process&&process.versions&&process.versions.node&&(o.os=process.platform,o.nodejs=numberify(process.versions.node)),YUI.Env.UA=o),o},Y.UA=YUI.Env.UA||YUI.Env.parseUA(),Y.UA.compareVersions=function(a,b){var aPart,aParts,bPart,bParts,i,len;if(a===b)return 0;for(aParts=(a+"").split("."),bParts=(b+"").split("."),i=0,len=Math.max(aParts.length,bParts.length);i<len;++i){if(aPart=parseInt(aParts[i],10),bPart=parseInt(bParts[i],10),isNaN(aPart)&&(aPart=0),isNaN(bPart)&&(bPart=0),aPart<bPart)return-1;if(aPart>bPart)return 1}return 0},YUI.Env.aliases={anim:["anim-base","anim-color","anim-curve","anim-easing","anim-node-plugin","anim-scroll","anim-xy"],"anim-shape-transform":["anim-shape"],app:["app-base","app-content","app-transitions","lazy-model-list","model","model-list","model-sync-rest","model-sync-local","router","view","view-node-map"],attribute:["attribute-base","attribute-complex"],"attribute-events":["attribute-observable"],autocomplete:["autocomplete-base","autocomplete-sources","autocomplete-list","autocomplete-plugin"],axes:["axis-numeric","axis-category","axis-time","axis-stacked"],"axes-base":["axis-numeric-base","axis-category-base","axis-time-base","axis-stacked-base"],base:["base-base","base-pluginhost","base-build"],cache:["cache-base","cache-offline","cache-plugin"],charts:["charts-base"],collection:["array-extras","arraylist","arraylist-add","arraylist-filter","array-invoke"],color:["color-base","color-hsl","color-harmony"],controller:["router"],dataschema:["dataschema-base","dataschema-json","dataschema-xml","dataschema-array","dataschema-text"],datasource:["datasource-local","datasource-io","datasource-get","datasource-function","datasource-cache","datasource-jsonschema","datasource-xmlschema","datasource-arrayschema","datasource-textschema","datasource-polling"],datatable:["datatable-core","datatable-table","datatable-head","datatable-body","datatable-base","datatable-column-widths","datatable-message","datatable-mutable","datatable-sort","datatable-datasource"],datatype:["datatype-date","datatype-number","datatype-xml"],"datatype-date":["datatype-date-parse","datatype-date-format","datatype-date-math"],"datatype-number":["datatype-number-parse","datatype-number-format"],"datatype-xml":["datatype-xml-parse","datatype-xml-format"],dd:["dd-ddm-base","dd-ddm","dd-ddm-drop","dd-drag","dd-proxy","dd-constrain","dd-drop","dd-scroll","dd-delegate"],dom:["dom-base","dom-screen","dom-style","selector-native","selector"],editor:["frame","editor-selection","exec-command","editor-base","editor-para","editor-br","editor-bidi","editor-tab","createlink-base"],event:["event-base","event-delegate","event-synthetic","event-mousewheel","event-mouseenter","event-key","event-focus","event-resize","event-hover","event-outside","event-touch","event-move","event-flick","event-valuechange","event-tap"],"event-custom":["event-custom-base","event-custom-complex"],"event-gestures":["event-flick","event-move"],handlebars:["handlebars-compiler"],highlight:["highlight-base","highlight-accentfold"],history:["history-base","history-hash","history-html5"],io:["io-base","io-xdr","io-form","io-upload-iframe","io-queue"],json:["json-parse","json-stringify"],loader:["loader-base","loader-rollup","loader-yui3"],"loader-pathogen-encoder":["loader-base","loader-rollup","loader-yui3","loader-pathogen-combohandler"],node:["node-base","node-event-delegate","node-pluginhost","node-screen","node-style"],pluginhost:["pluginhost-base","pluginhost-config"],querystring:["querystring-parse","querystring-stringify"],recordset:["recordset-base","recordset-sort","recordset-filter","recordset-indexer"],resize:["resize-base","resize-proxy","resize-constrain"],slider:["slider-base","slider-value-range","clickable-rail","range-slider"],template:["template-base","template-micro"],text:["text-accentfold","text-wordbreak"],widget:["widget-base","widget-htmlparser","widget-skin","widget-uievents"]}},"3.18.1",{use:["yui-base","get","features","intl-base","yui-log","yui-later","loader-base","loader-rollup","loader-yui3"]}),YUI.add("get",function(Y,NAME){var CUSTOM_ATTRS,Get,Transaction,Lang=Y.Lang;Y.Get=Get={cssOptions:{attributes:{rel:"stylesheet"},doc:Y.config.linkDoc||Y.config.doc,pollInterval:50},jsOptions:{autopurge:!0,doc:Y.config.scriptDoc||Y.config.doc},options:{attributes:{charset:"utf-8"},purgethreshold:20},REGEX_CSS:/\.css(?:[?;].*)?$/i,REGEX_JS:/\.js(?:[?;].*)?$/i,_insertCache:{},_pending:null,_purgeNodes:[],_queue:[],abort:function(transaction){var i,id,item,len,pending;if(Y.log("`Y.Get.abort()` is deprecated as of 3.5.0. Use the `abort()` method on the transaction instead.","warn","get"),!transaction.abort)if(id=transaction,transaction=null,(pending=this._pending)&&pending.transaction.id===id)transaction=pending.transaction,this._pending=null;else for(i=0,len=this._queue.length;i<len;++i)if((item=this._queue[i].transaction).id===id){transaction=item,this._queue.splice(i,1);break}transaction&&transaction.abort()},css:function(urls,options,callback){return this._load("css",urls,options,callback)},js:function(urls,options,callback){return this._load("js",urls,options,callback)},load:function(urls,options,callback){return this._load(null,urls,options,callback)},_autoPurge:function(threshold){threshold&&this._purgeNodes.length>=threshold&&(Y.log("autopurge triggered after "+this._purgeNodes.length+" nodes","info","get"),this._purge(this._purgeNodes))},_getEnv:function(){var doc=Y.config.doc,ua=Y.UA;return this._env={async:doc&&!0===doc.createElement("script").async||ua.ie>=10,cssFail:ua.gecko>=9||ua.compareVersions(ua.webkit,535.24)>=0,cssLoad:(!ua.gecko&&!ua.webkit||ua.gecko>=9||ua.compareVersions(ua.webkit,535.24)>=0)&&!(ua.chrome&&ua.chrome<=18),preservesScriptOrder:!!(ua.gecko||ua.opera||ua.ie&&ua.ie>=10)}},_getTransaction:function(urls,options){var i,len,req,url,requests=[];for(Lang.isArray(urls)||(urls=[urls]),(options=Y.merge(this.options,options)).attributes=Y.merge(this.options.attributes,options.attributes),i=0,len=urls.length;i<len;++i){if(req={attributes:{}},"string"==typeof(url=urls[i]))req.url=url;else{if(!url.url){Y.log("URL must be a string or an object with a `url` property.","error","get");continue}Y.mix(req,url,!1,null,0,!0),url=url.url}Y.mix(req,options,!1,null,0,!0),req.type||(this.REGEX_CSS.test(url)?req.type="css":(this.REGEX_JS.test(url)||Y.log("Can't guess file type from URL. Assuming JS: "+url,"warn","get"),req.type="js")),Y.mix(req,"js"===req.type?this.jsOptions:this.cssOptions,!1,null,0,!0),req.attributes.id||(req.attributes.id=Y.guid()),req.win?(Y.log("The `win` option is deprecated as of 3.5.0. Use `doc` instead.","warn","get"),req.doc=req.win.document):req.win=req.doc.defaultView||req.doc.parentWindow,req.charset&&(Y.log("The `charset` option is deprecated as of 3.5.0. Set `attributes.charset` instead.","warn","get"),req.attributes.charset=req.charset),requests.push(req)}return new Transaction(requests,options)},_load:function(type,urls,options,callback){var transaction;return"function"==typeof options&&(callback=options,options={}),options||(options={}),options.type=type,options._onFinish=Get._onTransactionFinish,this._env||this._getEnv(),transaction=this._getTransaction(urls,options),this._queue.push({callback:callback,transaction:transaction}),this._next(),transaction},_onTransactionFinish:function(){Get._pending=null,Get._next()},_next:function(){var item;this._pending||(item=this._queue.shift())&&(this._pending=item,item.transaction.execute(item.callback))},_purge:function(nodes){for(var index,node,purgeNodes=this._purgeNodes,isTransaction=nodes!==purgeNodes;node=nodes.pop();)node._yuiget_finished&&(node.parentNode&&node.parentNode.removeChild(node),isTransaction&&(index=Y.Array.indexOf(purgeNodes,node))>-1&&purgeNodes.splice(index,1))}},Get.script=Get.js,Get.Transaction=Transaction=function(requests,options){this.id=Transaction._lastId+=1,this.data=options.data,this.errors=[],this.nodes=[],this.options=options,this.requests=requests,this._callbacks=[],this._queue=[],this._reqsWaiting=0,this.tId=this.id,this.win=options.win||Y.config.win},Transaction._lastId=0,Transaction.prototype={_state:"new",abort:function(msg){this._pending=null,this._pendingCSS=null,this._pollTimer=clearTimeout(this._pollTimer),this._queue=[],this._reqsWaiting=0,this.errors.push({error:msg||"Aborted"}),this._finish()},execute:function(callback){var i,len,queue,req,self=this,requests=self.requests,state=self._state;if("done"!==state){if(callback&&self._callbacks.push(callback),"executing"!==state){for(self._state="executing",self._queue=queue=[],self.options.timeout&&(self._timeout=setTimeout(function(){self.abort("Timeout")},self.options.timeout)),self._reqsWaiting=requests.length,i=0,len=requests.length;i<len;++i)(req=requests[i]).async||"css"===req.type?self._insert(req):queue.push(req);self._next()}}else callback&&callback(self.errors.length?self.errors:null,self)},purge:function(){Get._purge(this.nodes)},_createNode:function(name,attrs,doc){var attr,testEl,node=doc.createElement(name);for(attr in CUSTOM_ATTRS||((testEl=doc.createElement("div")).setAttribute("class","a"),CUSTOM_ATTRS="a"===testEl.className?{}:{for:"htmlFor",class:"className"}),attrs)attrs.hasOwnProperty(attr)&&node.setAttribute(CUSTOM_ATTRS[attr]||attr,attrs[attr]);return node},_finish:function(){var data,i,len,errors=this.errors.length?this.errors:null,options=this.options,thisObj=options.context||this;if("done"!==this._state){for(this._state="done",i=0,len=this._callbacks.length;i<len;++i)this._callbacks[i].call(thisObj,errors,this);data=this._getEventData(),errors?(options.onTimeout&&"Timeout"===errors[errors.length-1].error&&options.onTimeout.call(thisObj,data),options.onFailure&&options.onFailure.call(thisObj,data)):options.onSuccess&&options.onSuccess.call(thisObj,data),options.onEnd&&options.onEnd.call(thisObj,data),options._onFinish&&options._onFinish()}},_getEventData:function(req){return req?Y.merge(this,{abort:this.abort,purge:this.purge,request:req,url:req.url,win:req.win}):this},_getInsertBefore:function(req){var cache,docStamp,doc=req.doc,el=req.insertBefore;return el?"string"==typeof el?doc.getElementById(el):el:(el=(cache=Get._insertCache)[docStamp=Y.stamp(doc)])?el:(el=doc.getElementsByTagName("base")[0])?cache[docStamp]=el:(el=doc.head||doc.getElementsByTagName("head")[0])?(el.appendChild(doc.createTextNode("")),cache[docStamp]=el.lastChild):cache[docStamp]=doc.getElementsByTagName("script")[0]},_insert:function(req){var cssTimeout,nodeType,env=Get._env,insertBefore=this._getInsertBefore(req),isScript="js"===req.type,node=req.node,self=this,ua=Y.UA;function onError(){self._progress("Failed to load "+req.url,req)}function onLoad(){cssTimeout&&clearTimeout(cssTimeout),self._progress(null,req)}node||(nodeType=isScript?"script":!env.cssLoad&&ua.gecko?"style":"link",node=req.node=this._createNode(nodeType,req.attributes,req.doc)),isScript?(node.setAttribute("src",req.url),req.async?node.async=!0:(env.async&&(node.async=!1),env.preservesScriptOrder||(this._pending=req))):!env.cssLoad&&ua.gecko?node.innerHTML=(req.attributes.charset?'@charset "'+req.attributes.charset+'";':"")+'@import "'+req.url+'";':node.setAttribute("href",req.url),isScript&&ua.ie&&(ua.ie<9||document.documentMode&&document.documentMode<9)?node.onreadystatechange=function(){/loaded|complete/.test(node.readyState)&&(node.onreadystatechange=null,onLoad())}:isScript||env.cssLoad?(ua.ie>=10?(node.onerror=function(){setTimeout(onError,0)},node.onload=function(){setTimeout(onLoad,0)}):(node.onerror=onError,node.onload=onLoad),env.cssFail||isScript||(cssTimeout=setTimeout(onError,req.timeout||3e3))):this._poll(req),this.nodes.push(node),insertBefore.parentNode.insertBefore(node,insertBefore)},_next:function(){this._pending||(this._queue.length?this._insert(this._queue.shift()):this._reqsWaiting||this._finish())},_poll:function(newReq){var i,j,nodeHref,req,sheets,self=this,pendingCSS=self._pendingCSS,isWebKit=Y.UA.webkit;if(!newReq||(pendingCSS||(pendingCSS=self._pendingCSS=[]),pendingCSS.push(newReq),!self._pollTimer)){for(self._pollTimer=null,i=0;i<pendingCSS.length;++i)if(req=pendingCSS[i],isWebKit){for(j=(sheets=req.doc.styleSheets).length,nodeHref=req.node.href;--j>=0;)if(sheets[j].href===nodeHref){pendingCSS.splice(i,1),i-=1,self._progress(null,req);break}}else try{!!req.node.sheet.cssRules,pendingCSS.splice(i,1),i-=1,self._progress(null,req)}catch(ex){}pendingCSS.length&&(self._pollTimer=setTimeout(function(){self._poll.call(self)},self.options.pollInterval))}},_progress:function(err,req){var options=this.options;err&&(req.error=err,this.errors.push({error:err,request:req}),Y.log(err,"error","get")),req.node._yuiget_finished=req.finished=!0,options.onProgress&&options.onProgress.call(options.context||this,this._getEventData(req)),req.autopurge&&(Get._autoPurge(this.options.purgethreshold),Get._purgeNodes.push(req.node)),this._pending===req&&(this._pending=null),this._reqsWaiting-=1,this._next()}}},"3.18.1",{requires:["yui-base"]}),YUI.add("features",function(Y,NAME){var feature_tests={};Y.mix(Y.namespace("Features"),{tests:feature_tests,add:function(cat,name,o){feature_tests[cat]=feature_tests[cat]||{},feature_tests[cat][name]=o},all:function(cat,args){var cat_o=feature_tests[cat],result=[];return cat_o&&Y.Object.each(cat_o,function(v,k){result.push(k+":"+(Y.Features.test(cat,k,args)?1:0))}),result.length?result.join(";"):""},test:function(cat,name,args){args=args||[];var result,ua,test,cat_o=feature_tests[cat],feature=cat_o&&cat_o[name];return feature?(result=feature.result,Y.Lang.isUndefined(result)&&((ua=feature.ua)&&(result=Y.UA[ua]),!(test=feature.test)||ua&&!result||(result=test.apply(Y,args)),feature.result=result)):Y.log("Feature test "+cat+", "+name+" not found"),result}});var add=Y.Features.add;add("load","0",{name:"app-transitions-native",test:function(Y){var doc=Y.config.doc,node=doc?doc.documentElement:null;return!(!node||!node.style)&&("MozTransition"in node.style||"WebkitTransition"in node.style||"transition"in node.style)},trigger:"app-transitions"}),add("load","1",{name:"autocomplete-list-keys",test:function(Y){return!(Y.UA.ios||Y.UA.android)},trigger:"autocomplete-list"}),add("load","2",{name:"dd-gestures",trigger:"dd-drag",ua:"touchEnabled"}),add("load","3",{name:"dom-style-ie",test:function(Y){var testFeature=Y.Features.test,addFeature=Y.Features.add,WINDOW=Y.config.win,DOCUMENT=Y.config.doc;return addFeature("style","computedStyle",{test:function(){return WINDOW&&"getComputedStyle"in WINDOW}}),addFeature("style","opacity",{test:function(){return DOCUMENT&&"opacity"in DOCUMENT.documentElement.style}}),!testFeature("style","opacity")&&!testFeature("style","computedStyle")},trigger:"dom-style"}),add("load","4",{name:"editor-para-ie",trigger:"editor-para",ua:"ie",when:"instead"}),add("load","5",{name:"event-base-ie",test:function(Y){var imp=Y.config.doc&&Y.config.doc.implementation;return imp&&!imp.hasFeature("Events","2.0")},trigger:"node-base"}),add("load","6",{name:"graphics-canvas",test:function(Y){var DOCUMENT=Y.config.doc,useCanvas=Y.config.defaultGraphicEngine&&"canvas"==Y.config.defaultGraphicEngine,canvas=DOCUMENT&&DOCUMENT.createElement("canvas");return(!(DOCUMENT&&DOCUMENT.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))||useCanvas)&&canvas&&canvas.getContext&&canvas.getContext("2d")},trigger:"graphics"}),add("load","7",{name:"graphics-canvas-default",test:function(Y){var DOCUMENT=Y.config.doc,useCanvas=Y.config.defaultGraphicEngine&&"canvas"==Y.config.defaultGraphicEngine,canvas=DOCUMENT&&DOCUMENT.createElement("canvas");return(!(DOCUMENT&&DOCUMENT.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))||useCanvas)&&canvas&&canvas.getContext&&canvas.getContext("2d")},trigger:"graphics"}),add("load","8",{name:"graphics-svg",test:function(Y){var DOCUMENT=Y.config.doc,useSVG=!Y.config.defaultGraphicEngine||"canvas"!=Y.config.defaultGraphicEngine,canvas=DOCUMENT&&DOCUMENT.createElement("canvas");return DOCUMENT&&DOCUMENT.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(useSVG||!canvas)},trigger:"graphics"}),add("load","9",{name:"graphics-svg-default",test:function(Y){var DOCUMENT=Y.config.doc,useSVG=!Y.config.defaultGraphicEngine||"canvas"!=Y.config.defaultGraphicEngine,canvas=DOCUMENT&&DOCUMENT.createElement("canvas");return DOCUMENT&&DOCUMENT.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(useSVG||!canvas)},trigger:"graphics"}),add("load","10",{name:"graphics-vml",test:function(Y){var DOCUMENT=Y.config.doc,canvas=DOCUMENT&&DOCUMENT.createElement("canvas");return DOCUMENT&&!DOCUMENT.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(!canvas||!canvas.getContext||!canvas.getContext("2d"))},trigger:"graphics"}),add("load","11",{name:"graphics-vml-default",test:function(Y){var DOCUMENT=Y.config.doc,canvas=DOCUMENT&&DOCUMENT.createElement("canvas");return DOCUMENT&&!DOCUMENT.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(!canvas||!canvas.getContext||!canvas.getContext("2d"))},trigger:"graphics"}),add("load","12",{name:"history-hash-ie",test:function(Y){var docMode=Y.config.doc&&Y.config.doc.documentMode;return Y.UA.ie&&(!("onhashchange"in Y.config.win)||!docMode||docMode<8)},trigger:"history-hash"}),add("load","13",{name:"io-nodejs",trigger:"io-base",ua:"nodejs"}),add("load","14",{name:"json-parse-shim",test:function(Y){var _JSON=Y.config.global.JSON,Native="[object JSON]"===Object.prototype.toString.call(_JSON)&&_JSON,nativeSupport=!1!==Y.config.useNativeJSONParse&&!!Native;if(nativeSupport)try{nativeSupport=Native.parse('{"ok":false}',function(k,v){return"ok"===k||v}).ok}catch(e){nativeSupport=!1}return!nativeSupport},trigger:"json-parse"}),add("load","15",{name:"json-stringify-shim",test:function(Y){var _JSON=Y.config.global.JSON,Native="[object JSON]"===Object.prototype.toString.call(_JSON)&&_JSON,nativeSupport=!1!==Y.config.useNativeJSONStringify&&!!Native;if(nativeSupport)try{nativeSupport="0"===Native.stringify(0)}catch(e){nativeSupport=!1}return!nativeSupport},trigger:"json-stringify"}),add("load","16",{name:"scrollview-base-ie",trigger:"scrollview-base",ua:"ie"}),add("load","17",{name:"selector-css2",test:function(Y){var DOCUMENT=Y.config.doc;return DOCUMENT&&!("querySelectorAll"in DOCUMENT)},trigger:"selector"}),add("load","18",{name:"transition-timer",test:function(Y){var DOCUMENT=Y.config.doc,node=DOCUMENT?DOCUMENT.documentElement:null,ret=!0;return node&&node.style&&(ret=!("MozTransition"in node.style||"WebkitTransition"in node.style||"transition"in node.style)),ret},trigger:"transition"}),add("load","19",{name:"widget-base-ie",trigger:"widget-base",ua:"ie"}),add("load","20",{name:"yql-jsonp",test:function(Y){return!Y.UA.nodejs&&!Y.UA.winjs},trigger:"yql"}),add("load","21",{name:"yql-nodejs",trigger:"yql",ua:"nodejs"}),add("load","22",{name:"yql-winjs",trigger:"yql",ua:"winjs"})},"3.18.1",{requires:["yui-base"]}),YUI.add("intl-base",function(Y,NAME){var SPLIT_REGEX=/[, ]/;Y.mix(Y.namespace("Intl"),{lookupBestLang:function(preferredLanguages,availableLanguages){var i,language,result,index;function scan(language){var i;for(i=0;i<availableLanguages.length;i+=1)if(language.toLowerCase()===availableLanguages[i].toLowerCase())return availableLanguages[i]}for(Y.Lang.isString(preferredLanguages)&&(preferredLanguages=preferredLanguages.split(SPLIT_REGEX)),i=0;i<preferredLanguages.length;i+=1)if((language=preferredLanguages[i])&&"*"!==language)for(;language.length>0;){if(result=scan(language))return result;if(!((index=language.lastIndexOf("-"))>=0))break;language=language.substring(0,index),index>=2&&"-"===language.charAt(index-2)&&(language=language.substring(0,index-2))}return""}})},"3.18.1",{requires:["yui-base"]}),YUI.add("yui-log",function(Y,NAME){var INSTANCE=Y,LEVELS={debug:1,info:2,warn:4,error:8};INSTANCE.log=function(msg,cat,src,silent){var bail,excl,incl,m,f,minlevel,Y=INSTANCE,c=Y.config,publisher=Y.fire?Y:YUI.Env.globalEvents;return c.debug&&(void 0!==(src=src||"")&&(excl=c.logExclude,!(incl=c.logInclude)||src in incl?incl&&src in incl?bail=!incl[src]:excl&&src in excl&&(bail=excl[src]):bail=1,void 0===cat&&(cat="info"),Y.config.logLevel=Y.config.logLevel||"debug",minlevel=LEVELS[Y.config.logLevel.toLowerCase()],cat in LEVELS&&LEVELS[cat]<minlevel&&(bail=1)),bail||(c.useBrowserConsole&&(m=src?src+": "+msg:msg,Y.Lang.isFunction(c.logFn)?c.logFn.call(Y,msg,cat,src):"undefined"!=typeof console&&console.log?(f=cat&&console[cat]&&cat in LEVELS?cat:"log",console[f](m)):"undefined"!=typeof opera&&opera.postError(m)),publisher&&!silent&&(publisher!==Y||publisher.getEvent("yui:log")||publisher.publish("yui:log",{broadcast:2}),publisher.fire("yui:log",{msg:msg,cat:cat,src:src})))),Y},INSTANCE.message=function(){return INSTANCE.log.apply(INSTANCE,arguments)}},"3.18.1",{requires:["yui-base"]}),YUI.add("yui-later",function(Y,NAME){var NO_ARGS=[];Y.later=function(when,o,fn,data,periodic){when=when||0,data=Y.Lang.isUndefined(data)?NO_ARGS:Y.Array(data);var cancelled=!1,method=(o=o||Y.config.win||Y)&&Y.Lang.isString(fn)?o[fn]:fn,wrapper=function(){cancelled||(method.apply?method.apply(o,data||NO_ARGS):method(data[0],data[1],data[2],data[3]))},id=periodic?setInterval(wrapper,when):setTimeout(wrapper,when);return{id:id,interval:periodic,cancel:function(){cancelled=!0,this.interval?clearInterval(id):clearTimeout(id)}}},Y.Lang.later=Y.later},"3.18.1",{requires:["yui-base"]}),YUI.add("loader-base",function(Y,NAME){!function(){var VERSION=Y.version,ROOT=VERSION+"/",CDN_BASE=Y.Env.base,COMBO_BASE=CDN_BASE+"combo?",META={version:VERSION,root:ROOT,base:Y.Env.base,comboBase:COMBO_BASE,skin:{defaultSkin:"sam",base:"assets/skins/",path:"skin.css",after:["cssreset","cssfonts","cssgrids","cssbase","cssreset-context","cssfonts-context"]},groups:{},patterns:{}},groups=META.groups,yui2Update=function(tnt,yui2,config){var root="2in3."+(tnt||"4")+"/"+(yui2||"2.9.0")+"/build/",base=config&&config.base?config.base:CDN_BASE,combo=config&&config.comboBase?config.comboBase:COMBO_BASE;groups.yui2.base=base+root,groups.yui2.root=root,groups.yui2.comboBase=combo},galleryUpdate=function(tag,config){var root=(tag||"gallery-2014.07.31-18-26")+"/build/",base=config&&config.base?config.base:CDN_BASE,combo=config&&config.comboBase?config.comboBase:COMBO_BASE;groups.gallery.base=base+root,groups.gallery.root=root,groups.gallery.comboBase=combo};groups[VERSION]={},groups.gallery={ext:!1,combine:!0,comboBase:COMBO_BASE,update:galleryUpdate,patterns:{"gallery-":{},"lang/gallery-":{},"gallerycss-":{type:"css"}}},groups.yui2={combine:!0,ext:!1,comboBase:COMBO_BASE,update:yui2Update,patterns:{"yui2-":{configFn:function(me){/-skin|reset|fonts|grids|base/.test(me.name)&&(me.type="css",me.path=me.path.replace(/\.js/,".css"),me.path=me.path.replace(/\/yui2-skin/,"/assets/skins/sam/yui2-skin"))}}}},galleryUpdate(),yui2Update(),YUI.Env[VERSION]&&Y.mix(META,YUI.Env[VERSION],!1,["modules","groups","skin"],0,!0),YUI.Env[VERSION]=META}();var NOT_FOUND={},NO_REQUIREMENTS=[],GLOBAL_ENV=YUI.Env,GLOBAL_LOADED=GLOBAL_ENV._loaded,CSS="css",JS="js",VERSION=Y.version,YObject=Y.Object,oeach=YObject.each,yArray=Y.Array,_queue=GLOBAL_ENV._loaderQueue,META=GLOBAL_ENV[VERSION],L=Y.Lang,ON_PAGE=GLOBAL_ENV.mods,_path=function(dir,file,type,nomin){var path=dir+"/"+file;return nomin||(path+="-min"),path+="."+(type||CSS)};YUI.Env._cssLoaded||(YUI.Env._cssLoaded={}),Y.Env.meta=META,Y.Loader=function(o){o=o||{},META.md5,this.context=Y,o.doBeforeLoader&&o.doBeforeLoader.apply(this,arguments),this.base=Y.Env.meta.base+Y.Env.meta.root,this.comboBase=Y.Env.meta.comboBase,this.combine=o.base&&o.base.indexOf(this.comboBase.substr(0,20))>-1,this.comboSep="&",this.maxURLLength=1024,this.ignoreRegistered=o.ignoreRegistered,this.root=Y.Env.meta.root,this.timeout=0,this.forceMap={},this.allowRollup=!1,this.filters={},this.required={},this.patterns={},this.moduleInfo={},this.groups=Y.merge(Y.Env.meta.groups),this.skin=Y.merge(Y.Env.meta.skin),this.conditions={},this.config=o,this._internal=!0,this._populateConditionsCache(),this.loaded=GLOBAL_LOADED[VERSION],this.async=!0,this._inspectPage(),this._internal=!1,this._config(o),this.forceMap=this.force?Y.Array.hash(this.force):{},this.testresults=null,Y.config.tests&&(this.testresults=Y.config.tests),this.sorted=[],this.dirty=!0,this.inserted={},this.skipped={},this.tested={},this.ignoreRegistered&&this._resetModules()},Y.Loader.prototype={getModuleInfo:function(name){var rawMetaModules,globalRenderedMods,internal,v,m=this.moduleInfo[name];return m||(rawMetaModules=META.modules,globalRenderedMods=GLOBAL_ENV._renderedMods,internal=this._internal,globalRenderedMods&&globalRenderedMods.hasOwnProperty(name)&&!this.ignoreRegistered?this.moduleInfo[name]=Y.merge(globalRenderedMods[name]):rawMetaModules.hasOwnProperty(name)&&(this._internal=!0,(v=this.addModule(rawMetaModules[name],name))&&v.type===CSS&&this.isCSSLoaded(v.name,!0)&&(Y.log("Found CSS module on page: "+v.name,"info","loader"),this.loaded[v.name]=!0),this._internal=internal),this.moduleInfo[name])},_expandAliases:function(list){var i,name,expanded=[],aliases=YUI.Env.aliases;for(list=Y.Array(list),i=0;i<list.length;i+=1)name=list[i],expanded.push.apply(expanded,aliases[name]?aliases[name]:[name]);return expanded},_populateConditionsCache:function(){var i,j,t,trigger,rawMetaModules=META.modules,cache=GLOBAL_ENV._conditions;if(cache&&!this.ignoreRegistered)for(i in cache)cache.hasOwnProperty(i)&&(this.conditions[i]=Y.merge(cache[i]));else{for(i in rawMetaModules)if(rawMetaModules.hasOwnProperty(i)&&rawMetaModules[i].condition)for(t=this._expandAliases(rawMetaModules[i].condition.trigger),j=0;j<t.length;j+=1)trigger=t[j],this.conditions[trigger]=this.conditions[trigger]||{},this.conditions[trigger][rawMetaModules[i].name||i]=rawMetaModules[i].condition;GLOBAL_ENV._conditions=this.conditions}},_resetModules:function(){var i,o,mod,name,details;for(i in this.moduleInfo)if(this.moduleInfo.hasOwnProperty(i)&&this.moduleInfo[i]){if(name=(mod=this.moduleInfo[i]).name,(details=YUI.Env.mods[name]?YUI.Env.mods[name].details:null)&&(this.moduleInfo[name]._reset=!0,this.moduleInfo[name].requires=details.requires||[],this.moduleInfo[name].optional=details.optional||[],this.moduleInfo[name].supersedes=details.supercedes||[]),mod.defaults)for(o in mod.defaults)mod.defaults.hasOwnProperty(o)&&mod[o]&&(mod[o]=mod.defaults[o]);mod.langCache=void 0,mod.skinCache=void 0,mod.skinnable&&this._addSkin(this.skin.defaultSkin,mod.name)}},REGEX_CSS:/\.css(?:[?;].*)?$/i,FILTER_DEFS:{RAW:{searchExp:"-min\\.js",replaceStr:".js"},DEBUG:{searchExp:"-min\\.js",replaceStr:"-debug.js"},COVERAGE:{searchExp:"-min\\.js",replaceStr:"-coverage.js"}},_inspectPage:function(){var v,m,req,mr,i;for(i in ON_PAGE)ON_PAGE.hasOwnProperty(i)&&(v=ON_PAGE[i]).details&&(m=this.getModuleInfo(v.name),req=v.details.requires,mr=m&&m.requires,m?!m._inspected&&req&&mr.length!==req.length&&delete m.expanded:m=this.addModule(v.details,i),m._inspected=!0)},_requires:function(mod1,mod2){var i,rm,after_map,s,m=this.getModuleInfo(mod1),other=this.getModuleInfo(mod2);if(!m||!other)return!1;if(rm=m.expanded_map,(after_map=m.after_map)&&mod2 in after_map)return!0;if((after_map=other.after_map)&&mod1 in after_map)return!1;if(s=other.supersedes)for(i=0;i<s.length;i++)if(this._requires(mod1,s[i]))return!0;if(s=m.supersedes)for(i=0;i<s.length;i++)if(this._requires(mod2,s[i]))return!1;return!!(rm&&mod2 in rm)||!(!m.ext||m.type!==CSS||other.ext||other.type!==CSS)},_config:function(o){var i,j,val,a,f,group,groupName,mod,modInfo,self=this,mods=[];if(o)for(i in o)if(o.hasOwnProperty(i))if(val=o[i],"require"===i)self.require(val);else if("skin"===i)"string"==typeof val&&(self.skin.defaultSkin=o.skin,val={defaultSkin:val}),Y.mix(self.skin,val,!0);else if("groups"===i){for(j in val)if(val.hasOwnProperty(j)&&(groupName=j,group=val[j],self.addGroup(group,groupName),group.aliases))for(a in group.aliases)group.aliases.hasOwnProperty(a)&&self.addAlias(group.aliases[a],a)}else if("modules"===i)for(j in val)val.hasOwnProperty(j)&&self.addModule(val[j],j);else if("aliases"===i)for(j in val)val.hasOwnProperty(j)&&self.addAlias(val[j],j);else"gallery"===i?this.groups.gallery.update&&this.groups.gallery.update(val,o):"yui2"===i||"2in3"===i?this.groups.yui2.update&&this.groups.yui2.update(o["2in3"],o.yui2,o):self[i]=val;if(f=self.filter,L.isString(f)&&(f=f.toUpperCase(),self.filterName=f,self.filter=self.FILTER_DEFS[f],"DEBUG"===f&&self.require("yui-log","dump")),self.filterName&&self.coverage&&"COVERAGE"===self.filterName&&L.isArray(self.coverage)&&self.coverage.length){for(i=0;i<self.coverage.length;i++)mod=self.coverage[i],(modInfo=self.getModuleInfo(mod))&&modInfo.use?mods=mods.concat(modInfo.use):mods.push(mod);self.filters=self.filters||{},Y.Array.each(mods,function(mod){self.filters[mod]=self.FILTER_DEFS.COVERAGE}),self.filterName="RAW",self.filter=self.FILTER_DEFS[self.filterName]}},formatSkin:function(skin,mod){var s="skin-"+skin;return mod&&(s=s+"-"+mod),s},_addSkin:function(skin,mod,parent){var pkg,name,nmod,sinf=this.skin,mdef=mod&&this.getModuleInfo(mod),ext=mdef&&mdef.ext;return mod&&(name=this.formatSkin(skin,mod),this.getModuleInfo(name)||(pkg=mdef.pkg||mod,nmod={skin:!0,name:name,group:mdef.group,type:"css",after:sinf.after,path:(parent||pkg)+"/"+sinf.base+skin+"/"+mod+".css",ext:ext},mdef.base&&(nmod.base=mdef.base),mdef.configFn&&(nmod.configFn=mdef.configFn),this.addModule(nmod,name),Y.log("Adding skin ("+name+"), "+parent+", "+pkg+", "+nmod.path,"info","loader"))),name},addAlias:function(use,name){YUI.Env.aliases[name]=use,this.addModule({name:name,use:use})},addGroup:function(o,name){var i,v,mods=o.modules,defaultBase=o.defaultBase||Y.config.defaultBase;if(name=name||o.name,o.name=name,this.groups[name]=o,!o.base&&defaultBase&&o.root&&(o.base=defaultBase+o.root),o.patterns)for(i in o.patterns)o.patterns.hasOwnProperty(i)&&(o.patterns[i].group=name,this.patterns[i]=o.patterns[i]);if(mods)for(i in mods)mods.hasOwnProperty(i)&&("string"==typeof(v=mods[i])&&(v={name:i,fullpath:v}),v.group=name,this.addModule(v,i))},addModule:function(o,name){name=name||o.name,"string"==typeof o&&(o={name:name,fullpath:o});var subs,i,l,t,sup,s,smod,plugins,plug,j,langs,packName,supName,flatSup,flatLang,lang,overrides,skinname,when,g,p,trigger,modInfo=this.moduleInfo[name],conditions=this.conditions;if(modInfo&&modInfo.temp&&(o=Y.merge(modInfo,o)),o.name=name,!o||!o.name)return null;if(o.type||(o.type=JS,(p=o.path||o.fullpath)&&this.REGEX_CSS.test(p)&&(Y.log("Auto determined module type as CSS","warn","loader"),o.type=CSS)),o.path||o.fullpath||(o.path=_path(name,name,o.type)),o.supersedes=o.supersedes||o.use,o.ext="ext"in o?o.ext:!this._internal,subs=o.submodules,this.moduleInfo[name]=o,o.requires=o.requires||[],this.requires)for(i=0;i<this.requires.length;i++)o.requires.push(this.requires[i]);if(o.group&&this.groups&&this.groups[o.group]&&(g=this.groups[o.group]).requires)for(i=0;i<g.requires.length;i++)o.requires.push(g.requires[i]);if(o.defaults||(o.defaults={requires:o.requires?[].concat(o.requires):null,supersedes:o.supersedes?[].concat(o.supersedes):null,optional:o.optional?[].concat(o.optional):null}),o.skinnable&&o.ext&&o.temp&&(skinname=this._addSkin(this.skin.defaultSkin,name),o.requires.unshift(skinname)),o.requires.length&&(o.requires=this.filterRequires(o.requires)||[]),!o.langPack&&o.lang)for(langs=yArray(o.lang),j=0;j<langs.length;j++)lang=langs[j],packName=this.getLangPackName(lang,name),(smod=this.getModuleInfo(packName))||(smod=this._addLangPack(lang,o,packName));if(subs){for(i in sup=o.supersedes||[],l=0,subs)if(subs.hasOwnProperty(i)){if((s=subs[i]).path=s.path||_path(name,i,o.type),s.pkg=name,s.group=o.group,s.supersedes&&(sup=sup.concat(s.supersedes)),smod=this.addModule(s,i),sup.push(i),smod.skinnable){if(o.skinnable=!0,(overrides=this.skin.overrides)&&overrides[i])for(j=0;j<overrides[i].length;j++)skinname=this._addSkin(overrides[i][j],i,name),sup.push(skinname);skinname=this._addSkin(this.skin.defaultSkin,i,name),sup.push(skinname)}if(s.lang&&s.lang.length)for(langs=yArray(s.lang),j=0;j<langs.length;j++)lang=langs[j],packName=this.getLangPackName(lang,name),supName=this.getLangPackName(lang,i),(smod=this.getModuleInfo(packName))||(smod=this._addLangPack(lang,o,packName)),supName in(flatSup=flatSup||yArray.hash(smod.supersedes))||smod.supersedes.push(supName),o.lang=o.lang||[],lang in(flatLang=flatLang||yArray.hash(o.lang))||o.lang.push(lang),packName=this.getLangPackName("",name),supName=this.getLangPackName("",i),(smod=this.getModuleInfo(packName))||(smod=this._addLangPack(lang,o,packName)),supName in flatSup||smod.supersedes.push(supName);l++}o.supersedes=yArray.dedupe(sup),this.allowRollup&&(o.rollup=l<4?l:Math.min(l-1,4))}if(plugins=o.plugins)for(i in plugins)plugins.hasOwnProperty(i)&&((plug=plugins[i]).pkg=name,plug.path=plug.path||_path(name,i,o.type),plug.requires=plug.requires||[],plug.group=o.group,this.addModule(plug,i),o.skinnable&&this._addSkin(this.skin.defaultSkin,i,name));if(o.condition)for(t=this._expandAliases(o.condition.trigger),i=0;i<t.length;i++)trigger=t[i],when=o.condition.when,conditions[trigger]=conditions[trigger]||{},conditions[trigger][name]=o.condition,when&&"after"!==when?"instead"===when&&(o.supersedes=o.supersedes||[],o.supersedes.push(trigger)):(o.after=o.after||[],o.after.push(trigger));return o.supersedes&&(o.supersedes=this.filterRequires(o.supersedes)),o.after&&(o.after=this.filterRequires(o.after),o.after_map=yArray.hash(o.after)),o.configFn&&!1===o.configFn(o)&&(Y.log("Config function returned false for "+name+", skipping.","info","loader"),delete this.moduleInfo[name],delete GLOBAL_ENV._renderedMods[name],o=null),o&&(GLOBAL_ENV._renderedMods||(GLOBAL_ENV._renderedMods={}),GLOBAL_ENV._renderedMods[name]=Y.mix(GLOBAL_ENV._renderedMods[name]||{},o),GLOBAL_ENV._conditions=conditions),o},require:function(what){var a="string"==typeof what?yArray(arguments):what;this.dirty=!0,this.required=Y.merge(this.required,yArray.hash(this.filterRequires(a))),this._explodeRollups()},_explodeRollups:function(){var m,m2,i,a,v,len,len2,r=this.required;if(!this.allowRollup){for(i in r)if(r.hasOwnProperty(i)&&(m=this.getModule(i))&&m.use)for(len=m.use.length,a=0;a<len;a++)if((m2=this.getModule(m.use[a]))&&m2.use)for(len2=m2.use.length,v=0;v<len2;v++)r[m2.use[v]]=!0;else r[m.use[a]]=!0;this.required=r}},filterRequires:function(r){if(r){Y.Lang.isArray(r)||(r=[r]),r=Y.Array(r);var i,mod,o,m,c=[];for(i=0;i<r.length;i++)if((mod=this.getModule(r[i]))&&mod.use)for(o=0;o<mod.use.length;o++)(m=this.getModule(mod.use[o]))&&m.use&&m.name!==mod.name?c=Y.Array.dedupe([].concat(c,this.filterRequires(m.use))):c.push(mod.use[o]);else c.push(r[i]);r=c}return r},_canBeAttached:function(m){return!(m=this.getModule(m))||!m.test||(m.hasOwnProperty("_testResult")||(m._testResult=m.test(Y)),m._testResult)},getRequires:function(mod){if(!mod)return NO_REQUIREMENTS;if(mod._parsed)return mod.expanded||NO_REQUIREMENTS;var i,m,j,length,add,packName,lang,cond,d,def,r,old_mod,o,skinmod,skindef,skinpar,skinname,hash,reparse,testresults=this.testresults,name=mod.name,adddef=ON_PAGE[name]&&ON_PAGE[name].details,optReqs=mod.optionalRequires,intl=mod.lang||mod.intl,ftests=Y.Features&&Y.Features.tests.load;if(mod.temp&&adddef&&(old_mod=mod,(mod=this.addModule(adddef,name)).group=old_mod.group,mod.pkg=old_mod.pkg,delete mod.expanded),reparse=!((!this.lang||mod.langCache===this.lang)&&mod.skinCache===this.skin.defaultSkin),mod.expanded&&!reparse)return mod.expanded;if(optReqs)for(i=0,length=optReqs.length;i<length;i++)this._canBeAttached(optReqs[i])&&mod.requires.push(optReqs[i]);for(d=[],hash={},r=this.filterRequires(mod.requires),mod.lang&&(d.unshift("intl"),r.unshift("intl"),intl=!0),o=this.filterRequires(mod.optional),mod._parsed=!0,mod.langCache=this.lang,mod.skinCache=this.skin.defaultSkin,i=0;i<r.length;i++)if(!hash[r[i]]&&(d.push(r[i]),hash[r[i]]=!0,m=this.getModule(r[i]))){add=this.getRequires(m),intl=intl||m.expanded_map&&"intl"in m.expanded_map;for(j=0;j<add.length;j++)d.push(add[j])}if(r=this.filterRequires(mod.supersedes))for(i=0;i<r.length;i++)if(!hash[r[i]]&&(mod.submodules&&d.push(r[i]),hash[r[i]]=!0,m=this.getModule(r[i]))){add=this.getRequires(m),intl=intl||m.expanded_map&&"intl"in m.expanded_map;for(j=0;j<add.length;j++)d.push(add[j])}if(o&&this.loadOptional)for(i=0;i<o.length;i++)if(!hash[o[i]]&&(d.push(o[i]),hash[o[i]]=!0,m=this.getModuleInfo(o[i]))){add=this.getRequires(m),intl=intl||m.expanded_map&&"intl"in m.expanded_map;for(j=0;j<add.length;j++)d.push(add[j])}if(cond=this.conditions[name])if(mod._parsed=!1,testresults&&ftests)oeach(testresults,function(result,id){var condmod=ftests[id].name;hash[condmod]||ftests[id].trigger!==name||result&&ftests[id]&&(hash[condmod]=!0,d.push(condmod))});else for(i in cond)if(cond.hasOwnProperty(i)&&!hash[i]&&((def=cond[i])&&(!def.ua&&!def.test||def.ua&&Y.UA[def.ua]||def.test&&def.test(Y,r)))&&(hash[i]=!0,d.push(i),m=this.getModule(i)))for(add=this.getRequires(m),j=0;j<add.length;j++)d.push(add[j]);if(mod.skinnable){for(i in skindef=this.skin.overrides,YUI.Env.aliases)YUI.Env.aliases.hasOwnProperty(i)&&Y.Array.indexOf(YUI.Env.aliases[i],name)>-1&&(skinpar=i);if(skindef&&(skindef[name]||skinpar&&skindef[skinpar]))for(skinname=name,skindef[skinpar]&&(skinname=skinpar),i=0;i<skindef[skinname].length;i++)skinmod=this._addSkin(skindef[skinname][i],name),this.isCSSLoaded(skinmod,this._boot)||d.push(skinmod);else skinmod=this._addSkin(this.skin.defaultSkin,name),this.isCSSLoaded(skinmod,this._boot)||d.push(skinmod)}return mod._parsed=!1,intl&&(mod.lang&&!mod.langPack&&Y.Intl&&(lang=Y.Intl.lookupBestLang(this.lang||"",mod.lang),(packName=this.getLangPackName(lang,name))&&d.unshift(packName)),d.unshift("intl")),mod.expanded_map=yArray.hash(d),mod.expanded=YObject.keys(mod.expanded_map),mod.expanded},isCSSLoaded:function(name,skip){if(!name||!YUI.Env.cssStampEl||!skip&&this.ignoreRegistered)return Y.log("isCSSLoaded was skipped for "+name,"warn","loader"),!1;var el=YUI.Env.cssStampEl,ret=!1,mod=YUI.Env._cssLoaded[name],style=el.currentStyle;return void 0!==mod?mod:(el.className=name,style||(style=Y.config.doc.defaultView.getComputedStyle(el,null)),style&&"none"===style.display&&(ret=!0),Y.log("Has Skin? "+name+" : "+ret,"info","loader"),el.className="",YUI.Env._cssLoaded[name]=ret,ret)},getProvides:function(name){var o,s,m=this.getModule(name);return m?(m&&!m.provides&&(o={},(s=m.supersedes)&&yArray.each(s,function(v){Y.mix(o,this.getProvides(v))},this),o[name]=!0,m.provides=o),m.provides):NOT_FOUND},calculate:function(o,type){(o||type||this.dirty)&&(o&&this._config(o),this._init||this._setup(),this._explode(),this.allowRollup?this._rollup():this._explodeRollups(),this._reduce(),this._sort())},_addLangPack:function(lang,m,packName){var conf,name=m.name;return this.getModuleInfo(packName)||(conf={path:_path(m.pkg||name,packName,JS,!0),intl:!0,langPack:!0,ext:m.ext,group:m.group,supersedes:[]},m.root&&(conf.root=m.root),m.base&&(conf.base=m.base),m.configFn&&(conf.configFn=m.configFn),this.addModule(conf,packName),lang&&(Y.Env.lang=Y.Env.lang||{},Y.Env.lang[lang]=Y.Env.lang[lang]||{},Y.Env.lang[lang][name]=!0)),this.getModuleInfo(packName)},_setup:function(){var name,i,j,m,l,packName,info=this.moduleInfo;for(name in info)info.hasOwnProperty(name)&&(m=info[name])&&(m.requires=yArray.dedupe(m.requires),m.lang&&(packName=this.getLangPackName("",name),this._addLangPack(null,m,packName)));for(j in l={},this.ignoreRegistered||Y.mix(l,GLOBAL_ENV.mods),this.ignore&&Y.mix(l,yArray.hash(this.ignore)),l)l.hasOwnProperty(j)&&Y.mix(l,this.getProvides(j));if(this.force)for(i=0;i<this.force.length;i++)this.force[i]in l&&delete l[this.force[i]];Y.mix(this.loaded,l),this._init=!0},getLangPackName:function(lang,mname){return"lang/"+mname+(lang?"_"+lang:"")},_explode:function(){var m,reqs,name,expound,r=this.required,done={};for(name in this.dirty=!1,this._explodeRollups(),r=this.required)r.hasOwnProperty(name)&&(done[name]||(done[name]=!0,(m=this.getModule(name))&&((expound=m.expound)&&(r[expound]=this.getModule(expound),reqs=this.getRequires(r[expound]),Y.mix(r,yArray.hash(reqs))),reqs=this.getRequires(m),Y.mix(r,yArray.hash(reqs)))))},_patternTest:function(mname,pname){return mname.indexOf(pname)>-1},getModule:function(mname){if(!mname)return null;var p,found,pname,m=this.getModuleInfo(mname),patterns=this.patterns;if(!m||m&&m.ext)for(pname in patterns)if(patterns.hasOwnProperty(pname)&&((p=patterns[pname]).test||(p.test=this._patternTest),p.test(mname,pname))){found=p;break}return m?found&&m&&found.configFn&&!m.configFn&&(m.configFn=found.configFn,m.configFn(m)):found&&(p.action?p.action.call(this,mname,pname):(Y.log("Undefined module: "+mname+", matched a pattern: "+pname,"info","loader"),(m=this.addModule(Y.merge(found,{test:void 0,temp:!0}),mname))&&found.configFn&&(m.configFn=found.configFn))),m},_rollup:function(){},_reduce:function(r){r=r||this.required;var i,j,s,m,type=this.loadType,ignore=!!this.ignore&&yArray.hash(this.ignore);for(i in r)if(r.hasOwnProperty(i)&&(m=this.getModule(i),((this.loaded[i]||ON_PAGE[i])&&!this.forceMap[i]&&!this.ignoreRegistered||type&&m&&m.type!==type)&&delete r[i],ignore&&ignore[i]&&delete r[i],s=m&&m.supersedes))for(j=0;j<s.length;j++)s[j]in r&&delete r[s[j]];return r},_finish:function(msg,success){Y.log("loader finishing: "+msg+", "+Y.id+", "+this.data,"info","loader"),_queue.running=!1;var onEnd=this.onEnd;onEnd&&onEnd.call(this.context,{msg:msg,data:this.data,success:success}),this._continue()},_onSuccess:function(){var fn,success,msg,i,mod,skipped=Y.merge(this.skipped),failed=[],rreg=this.requireRegistration;for(i in skipped)skipped.hasOwnProperty(i)&&delete this.inserted[i];for(i in this.skipped={},this.inserted)this.inserted.hasOwnProperty(i)&&(!(mod=this.getModule(i))||!rreg||mod.type!==JS||i in YUI.Env.mods?Y.mix(this.loaded,this.getProvides(i)):failed.push(i));fn=this.onSuccess,msg=failed.length?"notregistered":"success",success=!failed.length,fn&&fn.call(this.context,{msg:msg,data:this.data,success:success,failed:failed,skipped:skipped}),this._finish(msg,success)},_onProgress:function(e){var i;if(e.data&&e.data.length)for(i=0;i<e.data.length;i++)e.data[i]=this.getModule(e.data[i].name);this.onProgress&&this.onProgress.call(this.context,{name:e.url,data:e.data})},_onFailure:function(o){for(var f=this.onFailure,msg=[],i=0,len=o.errors.length;i<len;i++)msg.push(o.errors[i].error);msg=msg.join(","),Y.log("load error: "+msg+", "+Y.id,"error","loader"),f&&f.call(this.context,{msg:msg,data:this.data,success:!1}),this._finish(msg,!1)},_onTimeout:function(transaction){Y.log("loader timeout: "+Y.id,"error","loader");var f=this.onTimeout;f&&f.call(this.context,{msg:"timeout",data:this.data,success:!1,transaction:transaction})},_sort:function(){var name,required=this.required,visited={};for(name in this.sorted=[],required)!visited[name]&&required.hasOwnProperty(name)&&this._visit(name,visited)},_visit:function(name,visited){var required,condition,moduleInfo,dependency,dependencies,trigger,isAfter,i,l;if(visited[name]=!0,required=this.required,moduleInfo=this.moduleInfo[name],condition=this.conditions[name]||{},moduleInfo)for(i=0,l=(dependencies=moduleInfo.expanded||moduleInfo.requires).length;i<l;++i)isAfter=(trigger=condition[dependency=dependencies[i]])&&(!trigger.when||"after"===trigger.when),!required[dependency]||visited[dependency]||isAfter||this._visit(dependency,visited);this.sorted.push(name)},_insert:function(source,o,type,skipcalc){Y.log("private _insert() "+(type||"")+", "+Y.id,"info","loader"),source&&this._config(source);var deps,complete,modules=this.resolve(!skipcalc),self=this,comp=0,actions=0,mods={};if(self._refetch=[],type&&(modules[type===JS?CSS:JS]=[]),self.fetchCSS||(modules.css=[]),modules.js.length&&comp++,modules.css.length&&comp++,complete=function(d){actions++;var fn,modName,resMods,errs={},i=0,o=0,u="";if(d&&d.errors)for(i=0;i<d.errors.length;i++)errs[u=d.errors[i].request?d.errors[i].request.url:d.errors[i]]=u;if(d&&d.data&&d.data.length&&"success"===d.type)for(i=0;i<d.data.length;i++)self.inserted[d.data[i].name]=!0,(d.data[i].lang||d.data[i].skinnable)&&(delete self.inserted[d.data[i].name],self._refetch.push(d.data[i].name));if(actions===comp){if(self._loading=null,Y.log("Loader actions complete!","info","loader"),self._refetch.length){for(Y.log("Found potential modules to refetch","info","loader"),i=0;i<self._refetch.length;i++)for(deps=self.getRequires(self.getModule(self._refetch[i])),o=0;o<deps.length;o++)self.inserted[deps[o]]||(mods[deps[o]]=deps[o]);if((mods=Y.Object.keys(mods)).length){if(Y.log("Refetching modules with new meta-data","info","loader"),self.require(mods),(resMods=self.resolve(!0)).cssMods.length){for(i=0;i<resMods.cssMods.length;i++)modName=resMods.cssMods[i].name,delete YUI.Env._cssLoaded[modName],self.isCSSLoaded(modName)&&(self.inserted[modName]=!0,delete self.required[modName]);self.sorted=[],self._sort()}d=null,self._insert()}}d&&d.fn&&(Y.log("Firing final Loader callback!","info","loader"),fn=d.fn,delete d.fn,fn.call(self,d))}},this._loading=!0,!modules.js.length&&!modules.css.length)return Y.log("No modules resolved..","warn","loader"),actions=-1,void complete({fn:self._onSuccess});modules.css.length&&(Y.log("Loading CSS modules","info","loader"),Y.Get.css(modules.css,{data:modules.cssMods,attributes:self.cssAttributes,insertBefore:self.insertBefore,charset:self.charset,timeout:self.timeout,context:self,onProgress:function(e){self._onProgress.call(self,e)},onTimeout:function(d){self._onTimeout.call(self,d)},onSuccess:function(d){d.type="success",d.fn=self._onSuccess,complete.call(self,d)},onFailure:function(d){d.type="failure",d.fn=self._onFailure,complete.call(self,d)}})),modules.js.length&&(Y.log("Loading JS modules","info","loader"),Y.Get.js(modules.js,{data:modules.jsMods,insertBefore:self.insertBefore,attributes:self.jsAttributes,charset:self.charset,timeout:self.timeout,autopurge:!1,context:self,async:self.async,onProgress:function(e){self._onProgress.call(self,e)},onTimeout:function(d){self._onTimeout.call(self,d)},onSuccess:function(d){d.type="success",d.fn=self._onSuccess,complete.call(self,d)},onFailure:function(d){d.type="failure",d.fn=self._onFailure,complete.call(self,d)}}))},_continue:function(){!_queue.running&&_queue.size()>0&&(_queue.running=!0,_queue.next()())},insert:function(o,type,skipsort){Y.log("public insert() "+(type||"")+", "+Y.Object.keys(this.required),"info","loader");var self=this,copy=Y.merge(this);delete copy.require,delete copy.dirty,_queue.add(function(){self._insert(copy,o,type,skipsort)}),this._continue()},loadNext:function(){Y.log("loadNext was called..","error","loader")},_filter:function(u,name,group){var f=this.filter,hasFilter=name&&name in this.filters,modFilter=hasFilter&&this.filters[name],groupName=group||(this.getModuleInfo(name)||{}).group||null;return groupName&&this.groups[groupName]&&this.groups[groupName].filter&&(modFilter=this.groups[groupName].filter,hasFilter=!0),u&&(hasFilter&&(f=L.isString(modFilter)?this.FILTER_DEFS[modFilter.toUpperCase()]||null:modFilter),f&&(u=u.replace(new RegExp(f.searchExp,"g"),f.replaceStr))),u},_url:function(path,name,base){return this._filter((base||this.base||"")+path,name)},resolve:function(calc,sorted){var addSingle,self=this,resolved={js:[],jsMods:[],css:[],cssMods:[]},usePathogen=Y.config.comboLoader&&Y.config.customComboBase;(self.skin.overrides||"sam"!==self.skin.defaultSkin||self.ignoreRegistered)&&self._resetModules(),calc&&self.calculate(),sorted=sorted||self.sorted,addSingle=function(mod){if(mod){var url,group=mod.group&&self.groups[mod.group]||NOT_FOUND;!1===group.async&&(mod.async=group.async),url=mod.fullpath?self._filter(mod.fullpath,mod.name):self._url(mod.path,mod.name,group.base||mod.base),(mod.attributes||!1===mod.async)&&(url={url:url,async:mod.async},mod.attributes&&(url.attributes=mod.attributes)),resolved[mod.type].push(url),resolved[mod.type+"Mods"].push(mod)}else Y.log("Undefined Module","warn","loader")};var comboSources,maxURLLength,comboMeta,comboBase,comboSep,group,mod,len,i,inserted=self.ignoreRegistered?{}:self.inserted,hasComboModule=!1;for(i=0,len=sorted.length;i<len;i++)if((mod=self.getModule(sorted[i]))&&!inserted[mod.name]){if(group=self.groups[mod.group],comboBase=self.comboBase,group){if(!group.combine||mod.fullpath){addSingle(mod);continue}mod.combine=!0,"string"==typeof group.root&&(mod.root=group.root),comboBase=group.comboBase||comboBase,comboSep=group.comboSep,maxURLLength=group.maxURLLength}else if(!self.combine){addSingle(mod);continue}mod.combine||!mod.ext?(hasComboModule=!0,(comboSources=comboSources||{})[comboBase]=comboSources[comboBase]||{js:[],jsMods:[],css:[],cssMods:[]},(comboMeta=comboSources[comboBase]).group=mod.group,comboMeta.comboSep=comboSep||self.comboSep,comboMeta.maxURLLength=maxURLLength||self.maxURLLength,comboMeta[mod.type+"Mods"].push(mod),mod.type!==JS&&mod.type!==CSS||resolved[mod.type+"Mods"].push(mod)):addSingle(mod)}return hasComboModule&&(resolved=usePathogen?this._pathogenEncodeComboSources(resolved):this._encodeComboSources(resolved,comboSources)),resolved},_encodeComboSources:function(resolved,comboSources){var fragSubset,modules,tmpBase,baseLen,frags,frag,type,mod,maxURLLength,comboBase,comboMeta,comboSep,i,len;for(comboBase in comboSources)if(comboSources.hasOwnProperty(comboBase))for(type in comboSep=(comboMeta=comboSources[comboBase]).comboSep,maxURLLength=comboMeta.maxURLLength,Y.log("Using maxURLLength of "+maxURLLength,"info","loader"),comboMeta)if(type===JS||type===CSS){for(frags=[],i=0,len=(modules=comboMeta[type+"Mods"]).length;i<len;i+=1)frag=("string"==typeof(mod=modules[i]).root?mod.root:this.root)+(mod.path||mod.fullpath),frags.push(this._filter(frag,mod.name));if(baseLen=(tmpBase=comboBase+frags.join(comboSep)).length,maxURLLength<=comboBase.length&&(Y.log("maxURLLength ("+maxURLLength+") is lower than the comboBase length ("+comboBase.length+"), resetting to default (1024)","error","loader"),maxURLLength=1024),frags.length)if(baseLen>maxURLLength){for(Y.log("Exceeded maxURLLength ("+maxURLLength+") for "+type+", splitting","info","loader"),fragSubset=[],i=0,len=frags.length;i<len;i++)fragSubset.push(frags[i]),(tmpBase=comboBase+fragSubset.join(comboSep)).length>maxURLLength&&(frag=fragSubset.pop(),tmpBase=comboBase+fragSubset.join(comboSep),resolved[type].push(this._filter(tmpBase,null,comboMeta.group)),fragSubset=[],frag&&fragSubset.push(frag));fragSubset.length&&(tmpBase=comboBase+fragSubset.join(comboSep),resolved[type].push(this._filter(tmpBase,null,comboMeta.group)))}else resolved[type].push(this._filter(tmpBase,null,comboMeta.group))}return resolved},load:function(cb){if(cb){var self=this,out=self.resolve(!0);self.data=out,self.onEnd=function(){cb.apply(self.context||self,arguments)},self.insert()}else Y.log("No callback supplied to load()","error","loader")}}},"3.18.1",{requires:["get","features"]}),YUI.add("loader-rollup",function(Y,NAME){Y.Loader.prototype._rollup=function(){var i,j,m,s,roll,rolled,c,smod,r=this.required,info=this.moduleInfo;if(this.dirty||!this.rollups)for(i in this.rollups={},info)info.hasOwnProperty(i)&&(m=this.getModule(i))&&m.rollup&&(this.rollups[i]=m);for(;;){for(i in rolled=!1,this.rollups)if(this.rollups.hasOwnProperty(i)&&!r[i]&&(!this.loaded[i]||this.forceMap[i])){if(s=(m=this.getModule(i)).supersedes||[],roll=!1,!m.rollup)continue;for(c=0,j=0;j<s.length;j++){if(smod=info[s[j]],this.loaded[s[j]]&&!this.forceMap[s[j]]){roll=!1;break}if(r[s[j]]&&m.type===smod.type&&(roll=++c>=m.rollup))break}roll&&(r[i]=!0,rolled=!0,this.getRequires(m))}if(!rolled)break}}},"3.18.1",{requires:["loader-base"]}),YUI.add("loader-yui3",function(Y,NAME){YUI.Env[Y.version].modules=YUI.Env[Y.version].modules||{},Y.mix(YUI.Env[Y.version].modules,{"align-plugin":{requires:["node-screen","node-pluginhost"]},anim:{use:["anim-base","anim-color","anim-curve","anim-easing","anim-node-plugin","anim-scroll","anim-xy"]},"anim-base":{requires:["base-base","node-style","color-base"]},"anim-color":{requires:["anim-base"]},"anim-curve":{requires:["anim-xy"]},"anim-easing":{requires:["anim-base"]},"anim-node-plugin":{requires:["node-pluginhost","anim-base"]},"anim-scroll":{requires:["anim-base"]},"anim-shape":{requires:["anim-base","anim-easing","anim-color","matrix"]},"anim-shape-transform":{use:["anim-shape"]},"anim-xy":{requires:["anim-base","node-screen"]},app:{use:["app-base","app-content","app-transitions","lazy-model-list","model","model-list","model-sync-rest","model-sync-local","router","view","view-node-map"]},"app-base":{requires:["classnamemanager","pjax-base","router","view"]},"app-content":{requires:["app-base","pjax-content"]},"app-transitions":{requires:["app-base"]},"app-transitions-css":{type:"css"},"app-transitions-native":{condition:{name:"app-transitions-native",test:function(Y){var doc=Y.config.doc,node=doc?doc.documentElement:null;return!(!node||!node.style)&&("MozTransition"in node.style||"WebkitTransition"in node.style||"transition"in node.style)},trigger:"app-transitions"},requires:["app-transitions","app-transitions-css","parallel","transition"]},"array-extras":{requires:["yui-base"]},"array-invoke":{requires:["yui-base"]},arraylist:{requires:["yui-base"]},"arraylist-add":{requires:["arraylist"]},"arraylist-filter":{requires:["arraylist"]},arraysort:{requires:["yui-base"]},"async-queue":{requires:["event-custom"]},attribute:{use:["attribute-base","attribute-complex"]},"attribute-base":{requires:["attribute-core","attribute-observable","attribute-extras"]},"attribute-complex":{requires:["attribute-base"]},"attribute-core":{requires:["oop"]},"attribute-events":{use:["attribute-observable"]},"attribute-extras":{requires:["oop"]},"attribute-observable":{requires:["event-custom"]},autocomplete:{use:["autocomplete-base","autocomplete-sources","autocomplete-list","autocomplete-plugin"]},"autocomplete-base":{optional:["autocomplete-sources"],requires:["array-extras","base-build","escape","event-valuechange","node-base"]},"autocomplete-filters":{requires:["array-extras","text-wordbreak"]},"autocomplete-filters-accentfold":{requires:["array-extras","text-accentfold","text-wordbreak"]},"autocomplete-highlighters":{requires:["array-extras","highlight-base"]},"autocomplete-highlighters-accentfold":{requires:["array-extras","highlight-accentfold"]},"autocomplete-list":{after:["autocomplete-sources"],lang:["en","es","hu","it"],requires:["autocomplete-base","event-resize","node-screen","selector-css3","shim-plugin","widget","widget-position","widget-position-align"],skinnable:!0},"autocomplete-list-keys":{condition:{name:"autocomplete-list-keys",test:function(Y){return!(Y.UA.ios||Y.UA.android)},trigger:"autocomplete-list"},requires:["autocomplete-list","base-build"]},"autocomplete-plugin":{requires:["autocomplete-list","node-pluginhost"]},"autocomplete-sources":{optional:["io-base","json-parse","jsonp","yql"],requires:["autocomplete-base"]},axes:{use:["axis-numeric","axis-category","axis-time","axis-stacked"]},"axes-base":{use:["axis-numeric-base","axis-category-base","axis-time-base","axis-stacked-base"]},axis:{requires:["dom","widget","widget-position","widget-stack","graphics","axis-base"]},"axis-base":{requires:["classnamemanager","datatype-number","datatype-date","base","event-custom"]},"axis-category":{requires:["axis","axis-category-base"]},"axis-category-base":{requires:["axis-base"]},"axis-numeric":{requires:["axis","axis-numeric-base"]},"axis-numeric-base":{requires:["axis-base"]},"axis-stacked":{requires:["axis-numeric","axis-stacked-base"]},"axis-stacked-base":{requires:["axis-numeric-base"]},"axis-time":{requires:["axis","axis-time-base"]},"axis-time-base":{requires:["axis-base"]},base:{use:["base-base","base-pluginhost","base-build"]},"base-base":{requires:["attribute-base","base-core","base-observable"]},"base-build":{requires:["base-base"]},"base-core":{requires:["attribute-core"]},"base-observable":{requires:["attribute-observable","base-core"]},"base-pluginhost":{requires:["base-base","pluginhost"]},button:{requires:["button-core","cssbutton","widget"]},"button-core":{requires:["attribute-core","classnamemanager","node-base","escape"]},"button-group":{requires:["button-plugin","cssbutton","widget"]},"button-plugin":{requires:["button-core","cssbutton","node-pluginhost"]},cache:{use:["cache-base","cache-offline","cache-plugin"]},"cache-base":{requires:["base"]},"cache-offline":{requires:["cache-base","json"]},"cache-plugin":{requires:["plugin","cache-base"]},calendar:{requires:["calendar-base","calendarnavigator"],skinnable:!0},"calendar-base":{lang:["de","en","es","es-AR","fr","hu","it","ja","nb-NO","nl","pt-BR","ru","zh-Hans","zh-Hans-CN","zh-Hant","zh-Hant-HK","zh-HANT-TW"],requires:["widget","datatype-date","datatype-date-math","cssgrids"],skinnable:!0},calendarnavigator:{requires:["plugin","classnamemanager","datatype-date","node"],skinnable:!0},charts:{use:["charts-base"]},"charts-base":{requires:["dom","event-mouseenter","event-touch","graphics-group","axes","series-pie","series-line","series-marker","series-area","series-spline","series-column","series-bar","series-areaspline","series-combo","series-combospline","series-line-stacked","series-marker-stacked","series-area-stacked","series-spline-stacked","series-column-stacked","series-bar-stacked","series-areaspline-stacked","series-combo-stacked","series-combospline-stacked"]},"charts-legend":{requires:["charts-base"]},classnamemanager:{requires:["yui-base"]},"clickable-rail":{requires:["slider-base"]},collection:{use:["array-extras","arraylist","arraylist-add","arraylist-filter","array-invoke"]},color:{use:["color-base","color-hsl","color-harmony"]},"color-base":{requires:["yui-base"]},"color-harmony":{requires:["color-hsl"]},"color-hsl":{requires:["color-base"]},"color-hsv":{requires:["color-base"]},console:{lang:["en","es","hu","it","ja"],requires:["yui-log","widget"],skinnable:!0},"console-filters":{requires:["plugin","console"],skinnable:!0},"content-editable":{requires:["node-base","editor-selection","stylesheet","plugin"]},controller:{use:["router"]},cookie:{requires:["yui-base"]},"createlink-base":{requires:["editor-base"]},cssbase:{after:["cssreset","cssfonts","cssgrids","cssreset-context","cssfonts-context","cssgrids-context"],type:"css"},"cssbase-context":{after:["cssreset","cssfonts","cssgrids","cssreset-context","cssfonts-context","cssgrids-context"],type:"css"},cssbutton:{type:"css"},cssfonts:{type:"css"},"cssfonts-context":{type:"css"},cssgrids:{optional:["cssnormalize"],type:"css"},"cssgrids-base":{optional:["cssnormalize"],type:"css"},"cssgrids-responsive":{optional:["cssnormalize"],requires:["cssgrids","cssgrids-responsive-base"],type:"css"},"cssgrids-units":{optional:["cssnormalize"],requires:["cssgrids-base"],type:"css"},cssnormalize:{type:"css"},"cssnormalize-context":{type:"css"},cssreset:{type:"css"},"cssreset-context":{type:"css"},dataschema:{use:["dataschema-base","dataschema-json","dataschema-xml","dataschema-array","dataschema-text"]},"dataschema-array":{requires:["dataschema-base"]},"dataschema-base":{requires:["base"]},"dataschema-json":{requires:["dataschema-base","json"]},"dataschema-text":{requires:["dataschema-base"]},"dataschema-xml":{requires:["dataschema-base"]},datasource:{use:["datasource-local","datasource-io","datasource-get","datasource-function","datasource-cache","datasource-jsonschema","datasource-xmlschema","datasource-arrayschema","datasource-textschema","datasource-polling"]},"datasource-arrayschema":{requires:["datasource-local","plugin","dataschema-array"]},"datasource-cache":{requires:["datasource-local","plugin","cache-base"]},"datasource-function":{requires:["datasource-local"]},"datasource-get":{requires:["datasource-local","get"]},"datasource-io":{requires:["datasource-local","io-base"]},"datasource-jsonschema":{requires:["datasource-local","plugin","dataschema-json"]},"datasource-local":{requires:["base"]},"datasource-polling":{requires:["datasource-local"]},"datasource-textschema":{requires:["datasource-local","plugin","dataschema-text"]},"datasource-xmlschema":{requires:["datasource-local","plugin","datatype-xml","dataschema-xml"]},datatable:{use:["datatable-core","datatable-table","datatable-head","datatable-body","datatable-base","datatable-column-widths","datatable-message","datatable-mutable","datatable-sort","datatable-datasource"]},"datatable-base":{requires:["datatable-core","datatable-table","datatable-head","datatable-body","base-build","widget"],skinnable:!0},"datatable-body":{requires:["datatable-core","view","classnamemanager"]},"datatable-column-widths":{requires:["datatable-base"]},"datatable-core":{requires:["escape","model-list","node-event-delegate"]},"datatable-datasource":{requires:["datatable-base","plugin","datasource-local"]},"datatable-foot":{requires:["datatable-core","view"]},"datatable-formatters":{requires:["datatable-body","datatype-number-format","datatype-date-format","escape"]},"datatable-head":{requires:["datatable-core","view","classnamemanager"]},"datatable-highlight":{requires:["datatable-base","event-hover"],skinnable:!0},"datatable-keynav":{requires:["datatable-base"]},"datatable-message":{lang:["en","fr","es","hu","it"],requires:["datatable-base"],skinnable:!0},"datatable-mutable":{requires:["datatable-base"]},"datatable-paginator":{lang:["en","fr"],requires:["model","view","paginator-core","datatable-foot","datatable-paginator-templates"],skinnable:!0},"datatable-paginator-templates":{requires:["template"]},"datatable-scroll":{requires:["datatable-base","datatable-column-widths","dom-screen"],skinnable:!0},"datatable-sort":{lang:["en","fr","es","hu"],requires:["datatable-base"],skinnable:!0},"datatable-table":{requires:["datatable-core","datatable-head","datatable-body","view","classnamemanager"]},datatype:{use:["datatype-date","datatype-number","datatype-xml"]},"datatype-date":{use:["datatype-date-parse","datatype-date-format","datatype-date-math"]},"datatype-date-format":{lang:["ar","ar-JO","ca","ca-ES","da","da-DK","de","de-AT","de-DE","el","el-GR","en","en-AU","en-CA","en-GB","en-IE","en-IN","en-JO","en-MY","en-NZ","en-PH","en-SG","en-US","es","es-AR","es-BO","es-CL","es-CO","es-EC","es-ES","es-MX","es-PE","es-PY","es-US","es-UY","es-VE","fi","fi-FI","fr","fr-BE","fr-CA","fr-FR","hi","hi-IN","hu","id","id-ID","it","it-IT","ja","ja-JP","ko","ko-KR","ms","ms-MY","nb","nb-NO","nl","nl-BE","nl-NL","pl","pl-PL","pt","pt-BR","ro","ro-RO","ru","ru-RU","sv","sv-SE","th","th-TH","tr","tr-TR","vi","vi-VN","zh-Hans","zh-Hans-CN","zh-Hant","zh-Hant-HK","zh-Hant-TW"]},"datatype-date-math":{requires:["yui-base"]},"datatype-date-parse":{},"datatype-number":{use:["datatype-number-parse","datatype-number-format"]},"datatype-number-format":{},"datatype-number-parse":{requires:["escape"]},"datatype-xml":{use:["datatype-xml-parse","datatype-xml-format"]},"datatype-xml-format":{},"datatype-xml-parse":{},dd:{use:["dd-ddm-base","dd-ddm","dd-ddm-drop","dd-drag","dd-proxy","dd-constrain","dd-drop","dd-scroll","dd-delegate"]},"dd-constrain":{requires:["dd-drag"]},"dd-ddm":{requires:["dd-ddm-base","event-resize"]},"dd-ddm-base":{requires:["node","base","yui-throttle","classnamemanager"]},"dd-ddm-drop":{requires:["dd-ddm"]},"dd-delegate":{requires:["dd-drag","dd-drop-plugin","event-mouseenter"]},"dd-drag":{requires:["dd-ddm-base","selector-css2"]},"dd-drop":{requires:["dd-drag","dd-ddm-drop"]},"dd-drop-plugin":{requires:["dd-drop"]},"dd-gestures":{condition:{name:"dd-gestures",trigger:"dd-drag",ua:"touchEnabled"},requires:["dd-drag","event-synthetic","event-gestures"]},"dd-plugin":{optional:["dd-constrain","dd-proxy"],requires:["dd-drag"]},"dd-proxy":{requires:["dd-drag"]},"dd-scroll":{requires:["dd-drag"]},dial:{lang:["en","es","hu"],requires:["widget","dd-drag","event-mouseenter","event-move","event-key","transition","intl"],skinnable:!0},dom:{use:["dom-base","dom-screen","dom-style","selector-native","selector"]},"dom-base":{requires:["dom-core"]},"dom-core":{requires:["oop","features"]},"dom-screen":{requires:["dom-base","dom-style"]},"dom-style":{requires:["dom-base"]},"dom-style-ie":{condition:{name:"dom-style-ie",test:function(Y){var testFeature=Y.Features.test,addFeature=Y.Features.add,WINDOW=Y.config.win,DOCUMENT=Y.config.doc;return addFeature("style","computedStyle",{test:function(){return WINDOW&&"getComputedStyle"in WINDOW}}),addFeature("style","opacity",{test:function(){return DOCUMENT&&"opacity"in DOCUMENT.documentElement.style}}),!testFeature("style","opacity")&&!testFeature("style","computedStyle")},trigger:"dom-style"},requires:["dom-style","color-base"]},dump:{requires:["yui-base"]},editor:{use:["frame","editor-selection","exec-command","editor-base","editor-para","editor-br","editor-bidi","editor-tab","createlink-base"]},"editor-base":{requires:["base","frame","node","exec-command","editor-selection"]},"editor-bidi":{requires:["editor-base"]},"editor-br":{requires:["editor-base"]},"editor-inline":{requires:["editor-base","content-editable"]},"editor-lists":{requires:["editor-base"]},"editor-para":{requires:["editor-para-base"]},"editor-para-base":{requires:["editor-base"]},"editor-para-ie":{condition:{name:"editor-para-ie",trigger:"editor-para",ua:"ie",when:"instead"},requires:["editor-para-base"]},"editor-selection":{requires:["node"]},"editor-tab":{requires:["editor-base"]},escape:{requires:["yui-base"]},event:{after:["node-base"],use:["event-base","event-delegate","event-synthetic","event-mousewheel","event-mouseenter","event-key","event-focus","event-resize","event-hover","event-outside","event-touch","event-move","event-flick","event-valuechange","event-tap"]},"event-base":{after:["node-base"],requires:["event-custom-base"]},"event-base-ie":{after:["event-base"],condition:{name:"event-base-ie",test:function(Y){var imp=Y.config.doc&&Y.config.doc.implementation;return imp&&!imp.hasFeature("Events","2.0")},trigger:"node-base"},requires:["node-base"]},"event-contextmenu":{requires:["event-synthetic","dom-screen"]},"event-custom":{use:["event-custom-base","event-custom-complex"]},"event-custom-base":{requires:["oop"]},"event-custom-complex":{requires:["event-custom-base"]},"event-delegate":{requires:["node-base"]},"event-flick":{requires:["node-base","event-touch","event-synthetic"]},"event-focus":{requires:["event-synthetic"]},"event-gestures":{use:["event-flick","event-move"]},"event-hover":{requires:["event-mouseenter"]},"event-key":{requires:["event-synthetic"]},"event-mouseenter":{requires:["event-synthetic"]},"event-mousewheel":{requires:["node-base"]},"event-move":{requires:["node-base","event-touch","event-synthetic"]},"event-outside":{requires:["event-synthetic"]},"event-resize":{requires:["node-base","event-synthetic"]},"event-simulate":{requires:["event-base"]},"event-synthetic":{requires:["node-base","event-custom-complex"]},"event-tap":{requires:["node-base","event-base","event-touch","event-synthetic"]},"event-touch":{requires:["node-base"]},"event-valuechange":{requires:["event-focus","event-synthetic"]},"exec-command":{requires:["frame"]},features:{requires:["yui-base"]},file:{requires:["file-flash","file-html5"]},"file-flash":{requires:["base"]},"file-html5":{requires:["base"]},frame:{requires:["base","node","plugin","selector-css3","yui-throttle"]},"gesture-simulate":{requires:["async-queue","event-simulate","node-screen"]},get:{requires:["yui-base"]},graphics:{requires:["node","event-custom","pluginhost","matrix","classnamemanager"]},"graphics-canvas":{condition:{name:"graphics-canvas",test:function(Y){var DOCUMENT=Y.config.doc,useCanvas=Y.config.defaultGraphicEngine&&"canvas"==Y.config.defaultGraphicEngine,canvas=DOCUMENT&&DOCUMENT.createElement("canvas");return(!(DOCUMENT&&DOCUMENT.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))||useCanvas)&&canvas&&canvas.getContext&&canvas.getContext("2d")},trigger:"graphics"},requires:["graphics","color-base"]},"graphics-canvas-default":{condition:{name:"graphics-canvas-default",test:function(Y){var DOCUMENT=Y.config.doc,useCanvas=Y.config.defaultGraphicEngine&&"canvas"==Y.config.defaultGraphicEngine,canvas=DOCUMENT&&DOCUMENT.createElement("canvas");return(!(DOCUMENT&&DOCUMENT.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))||useCanvas)&&canvas&&canvas.getContext&&canvas.getContext("2d")},trigger:"graphics"}},"graphics-group":{requires:["graphics"]},"graphics-svg":{condition:{name:"graphics-svg",test:function(Y){var DOCUMENT=Y.config.doc,useSVG=!Y.config.defaultGraphicEngine||"canvas"!=Y.config.defaultGraphicEngine,canvas=DOCUMENT&&DOCUMENT.createElement("canvas");return DOCUMENT&&DOCUMENT.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(useSVG||!canvas)},trigger:"graphics"},requires:["graphics"]},"graphics-svg-default":{condition:{name:"graphics-svg-default",test:function(Y){var DOCUMENT=Y.config.doc,useSVG=!Y.config.defaultGraphicEngine||"canvas"!=Y.config.defaultGraphicEngine,canvas=DOCUMENT&&DOCUMENT.createElement("canvas");return DOCUMENT&&DOCUMENT.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(useSVG||!canvas)},trigger:"graphics"}},"graphics-vml":{condition:{name:"graphics-vml",test:function(Y){var DOCUMENT=Y.config.doc,canvas=DOCUMENT&&DOCUMENT.createElement("canvas");return DOCUMENT&&!DOCUMENT.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(!canvas||!canvas.getContext||!canvas.getContext("2d"))},trigger:"graphics"},requires:["graphics","color-base"]},"graphics-vml-default":{condition:{name:"graphics-vml-default",test:function(Y){var DOCUMENT=Y.config.doc,canvas=DOCUMENT&&DOCUMENT.createElement("canvas");return DOCUMENT&&!DOCUMENT.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(!canvas||!canvas.getContext||!canvas.getContext("2d"))},trigger:"graphics"}},handlebars:{use:["handlebars-compiler"]},"handlebars-base":{requires:[]},"handlebars-compiler":{requires:["handlebars-base"]},highlight:{use:["highlight-base","highlight-accentfold"]},"highlight-accentfold":{requires:["highlight-base","text-accentfold"]},"highlight-base":{requires:["array-extras","classnamemanager","escape","text-wordbreak"]},history:{use:["history-base","history-hash","history-html5"]},"history-base":{requires:["event-custom-complex"]},"history-hash":{after:["history-html5"],requires:["event-synthetic","history-base","yui-later"]},"history-hash-ie":{condition:{name:"history-hash-ie",test:function(Y){var docMode=Y.config.doc&&Y.config.doc.documentMode;return Y.UA.ie&&(!("onhashchange"in Y.config.win)||!docMode||docMode<8)},trigger:"history-hash"},requires:["history-hash","node-base"]},"history-html5":{optional:["json"],requires:["event-base","history-base","node-base"]},imageloader:{requires:["base-base","node-style","node-screen"]},intl:{requires:["intl-base","event-custom"]},"intl-base":{requires:["yui-base"]},io:{use:["io-base","io-xdr","io-form","io-upload-iframe","io-queue"]},"io-base":{requires:["event-custom-base","querystring-stringify-simple"]},"io-form":{requires:["io-base","node-base"]},"io-nodejs":{condition:{name:"io-nodejs",trigger:"io-base",ua:"nodejs"},requires:["io-base"]},"io-queue":{requires:["io-base","queue-promote"]},"io-upload-iframe":{requires:["io-base","node-base"]},"io-xdr":{requires:["io-base","datatype-xml-parse"]},json:{use:["json-parse","json-stringify"]},"json-parse":{requires:["yui-base"]},"json-parse-shim":{condition:{name:"json-parse-shim",test:function(Y){var _JSON=Y.config.global.JSON,Native="[object JSON]"===Object.prototype.toString.call(_JSON)&&_JSON,nativeSupport=!1!==Y.config.useNativeJSONParse&&!!Native;if(nativeSupport)try{nativeSupport=Native.parse('{"ok":false}',function(k,v){return"ok"===k||v}).ok}catch(e){nativeSupport=!1}return!nativeSupport},trigger:"json-parse"},requires:["json-parse"]},"json-stringify":{requires:["yui-base"]},"json-stringify-shim":{condition:{name:"json-stringify-shim",test:function(Y){var _JSON=Y.config.global.JSON,Native="[object JSON]"===Object.prototype.toString.call(_JSON)&&_JSON,nativeSupport=!1!==Y.config.useNativeJSONStringify&&!!Native;if(nativeSupport)try{nativeSupport="0"===Native.stringify(0)}catch(e){nativeSupport=!1}return!nativeSupport},trigger:"json-stringify"},requires:["json-stringify"]},jsonp:{requires:["get","oop"]},"jsonp-url":{requires:["jsonp"]},"lazy-model-list":{requires:["model-list"]},loader:{use:["loader-base","loader-rollup","loader-yui3"]},"loader-base":{requires:["get","features"]},"loader-pathogen-combohandler":{},"loader-pathogen-encoder":{use:["loader-base","loader-rollup","loader-yui3","loader-pathogen-combohandler"]},"loader-rollup":{requires:["loader-base"]},"loader-yui3":{requires:["loader-base"]},matrix:{requires:["yui-base"]},model:{requires:["base-build","escape","json-parse"]},"model-list":{requires:["array-extras","array-invoke","arraylist","base-build","escape","json-parse","model"]},"model-sync-local":{requires:["model","json-stringify"]},"model-sync-rest":{requires:["model","io-base","json-stringify"]},node:{use:["node-base","node-event-delegate","node-pluginhost","node-screen","node-style"]},"node-base":{requires:["event-base","node-core","dom-base","dom-style"]},"node-core":{requires:["dom-core","selector"]},"node-event-delegate":{requires:["node-base","event-delegate"]},"node-event-html5":{requires:["node-base"]},"node-event-simulate":{requires:["node-base","event-simulate","gesture-simulate"]},"node-flick":{requires:["classnamemanager","transition","event-flick","plugin"],skinnable:!0},"node-focusmanager":{requires:["attribute","node","plugin","node-event-simulate","event-key","event-focus"]},"node-load":{requires:["node-base","io-base"]},"node-menunav":{requires:["node","classnamemanager","plugin","node-focusmanager"],skinnable:!0},"node-pluginhost":{requires:["node-base","pluginhost"]},"node-screen":{requires:["dom-screen","node-base"]},"node-scroll-info":{requires:["array-extras","base-build","event-resize","node-pluginhost","plugin","selector"]},"node-style":{requires:["dom-style","node-base"]},oop:{requires:["yui-base"]},overlay:{requires:["widget","widget-stdmod","widget-position","widget-position-align","widget-stack","widget-position-constrain"],skinnable:!0},paginator:{requires:["paginator-core"]},"paginator-core":{requires:["base"]},"paginator-url":{requires:["paginator"]},panel:{requires:["widget","widget-autohide","widget-buttons","widget-modality","widget-position","widget-position-align","widget-position-constrain","widget-stack","widget-stdmod"],skinnable:!0},parallel:{requires:["yui-base"]},pjax:{requires:["pjax-base","pjax-content"]},"pjax-base":{requires:["classnamemanager","node-event-delegate","router"]},"pjax-content":{requires:["io-base","node-base","router"]},"pjax-plugin":{requires:["node-pluginhost","pjax","plugin"]},plugin:{requires:["base-base"]},pluginhost:{use:["pluginhost-base","pluginhost-config"]},"pluginhost-base":{requires:["yui-base"]},"pluginhost-config":{requires:["pluginhost-base"]},promise:{requires:["timers"]},querystring:{use:["querystring-parse","querystring-stringify"]},"querystring-parse":{requires:["yui-base","array-extras"]},"querystring-parse-simple":{requires:["yui-base"]},"querystring-stringify":{requires:["yui-base"]},"querystring-stringify-simple":{requires:["yui-base"]},"queue-promote":{requires:["yui-base"]},"range-slider":{requires:["slider-base","slider-value-range","clickable-rail"]},recordset:{use:["recordset-base","recordset-sort","recordset-filter","recordset-indexer"]},"recordset-base":{requires:["base","arraylist"]},"recordset-filter":{requires:["recordset-base","array-extras","plugin"]},"recordset-indexer":{requires:["recordset-base","plugin"]},"recordset-sort":{requires:["arraysort","recordset-base","plugin"]},resize:{use:["resize-base","resize-proxy","resize-constrain"]},"resize-base":{requires:["base","widget","event","oop","dd-drag","dd-delegate","dd-drop"],skinnable:!0},"resize-constrain":{requires:["plugin","resize-base"]},"resize-plugin":{optional:["resize-constrain"],requires:["resize-base","plugin"]},"resize-proxy":{requires:["plugin","resize-base"]},router:{optional:["querystring-parse"],requires:["array-extras","base-build","history"]},scrollview:{requires:["scrollview-base","scrollview-scrollbars"]},"scrollview-base":{requires:["widget","event-gestures","event-mousewheel","transition"],skinnable:!0},"scrollview-base-ie":{condition:{name:"scrollview-base-ie",trigger:"scrollview-base",ua:"ie"},requires:["scrollview-base"]},"scrollview-list":{requires:["plugin","classnamemanager"],skinnable:!0},"scrollview-paginator":{requires:["plugin","classnamemanager"]},"scrollview-scrollbars":{requires:["classnamemanager","transition","plugin"],skinnable:!0},selector:{requires:["selector-native"]},"selector-css2":{condition:{name:"selector-css2",test:function(Y){var DOCUMENT=Y.config.doc;return DOCUMENT&&!("querySelectorAll"in DOCUMENT)},trigger:"selector"},requires:["selector-native"]},"selector-css3":{requires:["selector-native","selector-css2"]},"selector-native":{requires:["dom-base"]},"series-area":{requires:["series-cartesian","series-fill-util"]},"series-area-stacked":{requires:["series-stacked","series-area"]},"series-areaspline":{requires:["series-area","series-curve-util"]},"series-areaspline-stacked":{requires:["series-stacked","series-areaspline"]},"series-bar":{requires:["series-marker","series-histogram-base"]},"series-bar-stacked":{requires:["series-stacked","series-bar"]},"series-base":{requires:["graphics","axis-base"]},"series-candlestick":{requires:["series-range"]},"series-cartesian":{requires:["series-base"]},"series-column":{requires:["series-marker","series-histogram-base"]},"series-column-stacked":{requires:["series-stacked","series-column"]},"series-combo":{requires:["series-cartesian","series-line-util","series-plot-util","series-fill-util"]},"series-combo-stacked":{requires:["series-stacked","series-combo"]},"series-combospline":{requires:["series-combo","series-curve-util"]},"series-combospline-stacked":{requires:["series-combo-stacked","series-curve-util"]},"series-curve-util":{},"series-fill-util":{},"series-histogram-base":{requires:["series-cartesian","series-plot-util"]},"series-line":{requires:["series-cartesian","series-line-util"]},"series-line-stacked":{requires:["series-stacked","series-line"]},"series-line-util":{},"series-marker":{requires:["series-cartesian","series-plot-util"]},"series-marker-stacked":{requires:["series-stacked","series-marker"]},"series-ohlc":{requires:["series-range"]},"series-pie":{requires:["series-base","series-plot-util"]},"series-plot-util":{},"series-range":{requires:["series-cartesian"]},"series-spline":{requires:["series-line","series-curve-util"]},"series-spline-stacked":{requires:["series-stacked","series-spline"]},"series-stacked":{requires:["axis-stacked"]},"shim-plugin":{requires:["node-style","node-pluginhost"]},slider:{use:["slider-base","slider-value-range","clickable-rail","range-slider"]},"slider-base":{requires:["widget","dd-constrain","event-key"],skinnable:!0},"slider-value-range":{requires:["slider-base"]},sortable:{requires:["dd-delegate","dd-drop-plugin","dd-proxy"]},"sortable-scroll":{requires:["dd-scroll","sortable"]},stylesheet:{requires:["yui-base"]},substitute:{optional:["dump"],requires:["yui-base"]},swf:{requires:["event-custom","node","swfdetect","escape"]},swfdetect:{requires:["yui-base"]},tabview:{requires:["widget","widget-parent","widget-child","tabview-base","node-pluginhost","node-focusmanager"],skinnable:!0},"tabview-base":{requires:["node-event-delegate","classnamemanager"]},"tabview-plugin":{requires:["tabview-base"]},template:{use:["template-base","template-micro"]},"template-base":{requires:["yui-base"]},"template-micro":{requires:["escape"]},test:{requires:["event-simulate","event-custom","json-stringify"]},"test-console":{requires:["console-filters","test","array-extras"],skinnable:!0},text:{use:["text-accentfold","text-wordbreak"]},"text-accentfold":{requires:["array-extras","text-data-accentfold"]},"text-data-accentfold":{requires:["yui-base"]},"text-data-wordbreak":{requires:["yui-base"]},"text-wordbreak":{requires:["array-extras","text-data-wordbreak"]},timers:{requires:["yui-base"]},transition:{requires:["node-style"]},"transition-timer":{condition:{name:"transition-timer",test:function(Y){var DOCUMENT=Y.config.doc,node=DOCUMENT?DOCUMENT.documentElement:null,ret=!0;return node&&node.style&&(ret=!("MozTransition"in node.style||"WebkitTransition"in node.style||"transition"in node.style)),ret},trigger:"transition"},requires:["transition"]},tree:{requires:["base-build","tree-node"]},"tree-labelable":{requires:["tree"]},"tree-lazy":{requires:["base-pluginhost","plugin","tree"]},"tree-node":{},"tree-openable":{requires:["tree"]},"tree-selectable":{requires:["tree"]},"tree-sortable":{requires:["tree"]},uploader:{requires:["uploader-html5","uploader-flash"]},"uploader-flash":{requires:["swfdetect","escape","widget","base","cssbutton","node","event-custom","uploader-queue"]},"uploader-html5":{requires:["widget","node-event-simulate","file-html5","uploader-queue"]},"uploader-queue":{requires:["base"]},view:{requires:["base-build","node-event-delegate"]},"view-node-map":{requires:["view"]},widget:{use:["widget-base","widget-htmlparser","widget-skin","widget-uievents"]},"widget-anim":{requires:["anim-base","plugin","widget"]},"widget-autohide":{requires:["base-build","event-key","event-outside","widget"]},"widget-base":{requires:["attribute","base-base","base-pluginhost","classnamemanager","event-focus","node-base","node-style"],skinnable:!0},"widget-base-ie":{condition:{name:"widget-base-ie",trigger:"widget-base",ua:"ie"},requires:["widget-base"]},"widget-buttons":{requires:["button-plugin","cssbutton","widget-stdmod"]},"widget-child":{requires:["base-build","widget"]},"widget-htmlparser":{requires:["widget-base"]},"widget-modality":{requires:["base-build","event-outside","widget"],skinnable:!0},"widget-parent":{requires:["arraylist","base-build","widget"]},"widget-position":{requires:["base-build","node-screen","widget"]},"widget-position-align":{requires:["widget-position"]},"widget-position-constrain":{requires:["widget-position"]},"widget-skin":{requires:["widget-base"]},"widget-stack":{requires:["base-build","widget"],skinnable:!0},"widget-stdmod":{requires:["base-build","widget"]},"widget-uievents":{requires:["node-event-delegate","widget-base"]},yql:{requires:["oop"]},"yql-jsonp":{condition:{name:"yql-jsonp",test:function(Y){return!Y.UA.nodejs&&!Y.UA.winjs},trigger:"yql"},requires:["yql","jsonp","jsonp-url"]},"yql-nodejs":{condition:{name:"yql-nodejs",trigger:"yql",ua:"nodejs"},requires:["yql"]},"yql-winjs":{condition:{name:"yql-winjs",trigger:"yql",ua:"winjs"},requires:["yql"]},yui:{},"yui-base":{},"yui-later":{requires:["yui-base"]},"yui-log":{requires:["yui-base"]},"yui-throttle":{requires:["yui-base"]}}),YUI.Env[Y.version].md5="2fd2be6b12ee9f999b4367499ae61aae"},"3.18.1",{requires:["loader-base"]}),YUI.add("yui",function(Y,NAME){},"3.18.1",{use:["yui-base","get","features","intl-base","yui-log","yui-later","loader-base","loader-rollup","loader-yui3"]}),function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var i;if(e)for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}function eachReverse(e,t){var i;if(e)for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(e,t,i,r){return t&&eachProp(t,function(t,n){!i&&hasProp(e,n)||(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[n]=t:(e[n]||(e[n]={}),mixin(e[n],t,i,r)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,i,r){var n=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return n.requireType=e,n.requireModules=r,i&&(n.originalError=i),n}function newContext(e){function i(e,i,r){var o,a,s,u,c,d,p,f,l,h,g=i&&i.split("/"),v=y.map,x=v&&v["*"];if(e&&(d=(e=e.split("/")).length-1,y.nodeIdCompat&&jsSuffixRegExp.test(e[d])&&(e[d]=e[d].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&g&&(e=g.slice(0,g.length-1).concat(e)),function(e){var t,i;for(t=0;t<e.length;t++)if("."===(i=e[t]))e.splice(t,1),t-=1;else if(".."===i){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),r&&v&&(g||x)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(c=a.slice(0,s).join("/"),g)for(u=g.length;u>0;u-=1)if((o=getOwn(v,g.slice(0,u).join("/")))&&(o=getOwn(o,c))){p=o,f=s;break e}!l&&x&&getOwn(x,c)&&(l=getOwn(x,c),h=s)}!p&&l&&(p=l,f=h),p&&(a.splice(0,f,p),e=a.join("/"))}return getOwn(y.pkgs,e)||e}function r(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===q.contextName)return t.parentNode.removeChild(t),!0})}function n(e){var t=getOwn(y.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),q.require.undef(e),q.makeRequire(null,{skipMap:!0})([e]),!0}function o(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function a(e,t,r,n){var a,s,u,c,d=null,p=t?t.name:null,f=e,l=!0,h="";return e||(l=!1,e="_@r"+(T+=1)),d=(c=o(e))[0],e=c[1],d&&(d=i(d,p,n),s=getOwn(j,d)),e&&(d?h=s&&s.normalize?s.normalize(e,function(e){return i(e,p,n)}):-1===e.indexOf("!")?i(e,p,n):e:(d=(c=o(h=i(e,p,n)))[0],h=c[1],r=!0,a=q.nameToUrl(h))),{prefix:d,name:h,parentMap:t,unnormalized:!!(u=!d||s||r?"":"_unnormalized"+(A+=1)),url:a,originalName:f,isDefine:l,id:(d?d+"!"+h:h)+u}}function s(e){var t=e.id,i=getOwn(S,t);return i||(i=S[t]=new q.Module(e)),i}function u(e,t,i){var r=e.id,n=getOwn(S,r);!hasProp(j,r)||n&&!n.defineEmitComplete?(n=s(e)).error&&"error"===t?i(n.error):n.on(t,i):"defined"===t&&i(j[r])}function c(e,t){var i=e.requireModules,r=!1;t?t(e):(each(i,function(t){var i=getOwn(S,t);i&&(i.error=e,i.events.error&&(r=!0,i.emit("error",e)))}),r||req.onError(e))}function d(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(q.defQueueMap[t]=!0),O.push(e)}),globalDefQueue=[])}function p(e){delete S[e],delete k[e]}function l(){var e,t,i=1e3*y.waitSeconds,o=i&&q.startTime+i<(new Date).getTime(),a=[],s=[],u=!1,d=!0;if(!x){if(x=!0,eachProp(k,function(e){var i=e.map,c=i.id;if(e.enabled&&(i.isDefine||s.push(e),!e.error))if(!e.inited&&o)n(c)?(t=!0,u=!0):(a.push(c),r(c));else if(!e.inited&&e.fetched&&i.isDefine&&(u=!0,!i.prefix))return d=!1}),o&&a.length)return(e=makeError("timeout","Load timeout for modules: "+a,null,a)).contextName=q.contextName,c(e);d&&each(s,function(e){!function f(e,t,i){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,n){var o=r.id,a=getOwn(S,o);!a||e.depMatched[n]||i[o]||(getOwn(t,o)?(e.defineDep(n,j[o]),e.check()):f(a,t,i))}),i[r]=!0)}(e,{},{})}),o&&!t||!u||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,l()},50)),x=!1}}function h(e){hasProp(j,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function m(e,t,i,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(i,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return m(t,q.onScriptLoad,"load","onreadystatechange"),m(t,q.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(d();O.length;){if(null===(e=O.shift())[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));h(e)}q.defQueueMap={}}var x,b,q,E,w,y={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},S={},k={},M={},O=[],j={},P={},R={},T=1,A=1;return E={require:function(e){return e.require?e.require:e.require=q.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?j[e.map.id]=e.exports:e.exports=j[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(y.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(b=function(e){this.events=getOwn(M,e.id)||{},this.map=e,this.shim=getOwn(y.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,i,r){r=r||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,q.startTime=(new Date).getTime();var e=this.map;return this.shim?void q.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,q.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id,r=this.depExports,n=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{n=q.execCb(i,o,r,n)}catch(t){e=t}else n=q.execCb(i,o,r,n);if(this.map.isDefine&&void 0===n&&((t=this.module)?n=t.exports:this.usingExports&&(n=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else n=o;if(this.exports=n,this.map.isDefine&&!this.ignore&&(j[i]=n,req.onResourceLoad)){var a=[];each(this.depMaps,function(e){a.push(e.normalizedMap||e)}),req.onResourceLoad(q,this.map,a)}p(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(q.defQueueMap,i)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=a(e.prefix);this.depMaps.push(r),u(r,"defined",bind(this,function(r){var n,o,d,f=getOwn(R,this.map.id),l=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,m=q.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(l=r.normalize(l,function(e){return i(e,h,!0)})||""),u(o=a(e.prefix+"!"+l,this.map.parentMap),"defined",bind(this,function(e){this.map.normalizedMap=o,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((d=getOwn(S,o.id))&&(this.depMaps.push(o),this.events.error&&d.on("error",bind(this,function(e){this.emit("error",e)})),d.enable()))):f?(this.map.url=q.nameToUrl(f),void this.load()):((n=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(S,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&p(e.map.id)}),c(e)}),n.fromText=bind(this,function(i,r){var o=e.name,u=a(o),d=useInteractive;r&&(i=r),d&&(useInteractive=!1),s(u),hasProp(y.config,t)&&(y.config[o]=y.config[t]);try{req.exec(i)}catch(e){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}d&&(useInteractive=!0),this.depMaps.push(u),q.completeLoad(o),m([o],n)}),void r.load(e.name,m,n,y))})),q.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){k[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var i,r,n;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,n=getOwn(E,e.id))return void(this.depExports[t]=n(this));this.depCount+=1,u(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?u(e,"error",bind(this,this.errback)):this.events.error&&u(e,"error",bind(this,function(e){this.emit("error",e)}))}i=e.id,r=S[i],hasProp(E,i)||!r||r.enabled||q.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(S,e.id);t&&!t.enabled&&q.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(q={config:y,contextName:e,registry:S,defined:j,urlFetched:P,defQueue:O,defQueueMap:{},Module:b,makeModuleMap:a,nextTick:req.nextTick,onError:c,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,i){return(-1===i.indexOf("?")?"?":"&")+t}}var i=y.shim,r={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?(y[t]||(y[t]={}),mixin(y[t],e,!0,!0)):y[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(R[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=q.makeShimExports(e)),i[t]=e}),y.shim=i),e.packages&&each(e.packages,function(e){var i;i=(e="string"==typeof e?{name:e}:e).name,e.location&&(y.paths[i]=e.location),y.pkgs[i]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(S,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&q.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(t,n){function o(i,r,u){var d,f;return n.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof i?isFunction(r)?c(makeError("requireargs","Invalid require call"),u):t&&hasProp(E,i)?E[i](S[t.id]):req.get?req.get(q,i,t,o):(d=a(i,t,!1,!0).id,hasProp(j,d)?j[d]:c(makeError("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),q.nextTick(function(){v(),(f=s(a(null,t))).skipMap=n.skipMap,f.init(i,r,u,{enabled:!0}),l()}),o)}return n=n||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,n=e.lastIndexOf("."),o=e.split("/")[0];return-1!==n&&(!("."===o||".."===o)||n>1)&&(r=e.substring(n,e.length),e=e.substring(0,n)),q.nameToUrl(i(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(j,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(j,e)||hasProp(S,e)}}),t||(o.undef=function(e){d();var i=a(e,t,!0),n=getOwn(S,e);n.undefed=!0,r(e),delete j[e],delete P[i.url],delete M[e],eachReverse(O,function(t,i){t[0]===e&&O.splice(i,1)}),delete q.defQueueMap[e],n&&(n.events.defined&&(M[e]=n.events),p(e))}),o},enable:function(e){getOwn(S,e.id)&&s(e).enable()},completeLoad:function(e){var t,i,r,o=getOwn(y.shim,e)||{},a=o.exports;for(d();O.length;){if(null===(i=O.shift())[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);h(i)}if(q.defQueueMap={},r=getOwn(S,e),!t&&!hasProp(j,e)&&r&&!r.inited){if(!(!y.enforceDefine||a&&getGlobal(a)))return n(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));h([e,o.deps||[],o.exportsFn])}l()},nameToUrl:function(e,t,i){var r,n,o,s,u,c,d=getOwn(y.pkgs,e);if(d&&(e=d),c=getOwn(R,e))return q.nameToUrl(c,t,i);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(r=y.paths,o=(n=e.split("/")).length;o>0;o-=1)if(u=getOwn(r,n.slice(0,o).join("/"))){isArray(u)&&(u=u[0]),n.splice(0,o,u);break}s=n.join("/"),s=("/"===(s+=t||(/^data\:|^blob\:|\?/.test(s)||i?"":".js")).charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":y.baseUrl)+s}return y.urlArgs&&!/^blob\:/.test(s)?s+y.urlArgs(e,s):s},load:function(e,t){req.load(q,e,t)},execCb:function(e,t,i,r){return t.apply(r,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);q.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);if(!n(t.id)){var i=[];return eachProp(S,function(e,r){0!==r.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return i.push(r),!0})}),c(makeError("scripterror",'Script error for "'+t.id+(i.length?'", needed by: '+i.join(", "):'"'),e,[t.id]))}}}).require=q.makeRequire(),q}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.2",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,r){var n,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=i,i=r):e=[]),o&&o.context&&(a=o.context),(n=getOwn(contexts,a))||(n=contexts[a]=req.s.newContext(a)),o&&n.configure(o),n.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,i){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,i){var r,n=e&&e.config||{};if(isBrowser)return(r=req.createNode(n,t,i)).setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=i,n.onNodeCreated&&n.onNodeCreated(r,n,t,i),currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{setTimeout(function(){},0),importScripts(i),e.completeLoad(t)}catch(r){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+i,r,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,i){var r,n;"string"!=typeof e&&(i=t,t=e,e=null),isArray(t)||(i=t,t=null),!t&&isFunction(i)&&(t=[],i.length&&(i.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&((r=currentlyAddingScript||getInteractiveScript())&&(e||(e=r.getAttribute("data-requiremodule")),n=contexts[r.getAttribute("data-requirecontext")])),n?(n.defQueue.push([e,t,i]),n.defQueueMap[e]=!0):globalDefQueue.push([e,t,i])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.2",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(match,singlePrefix){return singlePrefix||""}function isFunction(it){return"[object Function]"===ostring.call(it)}function isArray(it){return"[object Array]"===ostring.call(it)}function each(ary,func){var i;if(ary)for(i=0;i<ary.length&&(!ary[i]||!func(ary[i],i,ary));i+=1);}function eachReverse(ary,func){var i;if(ary)for(i=ary.length-1;i>-1&&(!ary[i]||!func(ary[i],i,ary));i-=1);}function hasProp(obj,prop){return hasOwn.call(obj,prop)}function getOwn(obj,prop){return hasProp(obj,prop)&&obj[prop]}function eachProp(obj,func){var prop;for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break}function mixin(target,source,force,deepStringMixin){return source&&eachProp(source,function(value,prop){!force&&hasProp(target,prop)||(!deepStringMixin||"object"!=typeof value||!value||isArray(value)||isFunction(value)||value instanceof RegExp?target[prop]=value:(target[prop]||(target[prop]={}),mixin(target[prop],value,force,deepStringMixin)))}),target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(err){throw err}function getGlobal(value){if(!value)return value;var g=global;return each(value.split("."),function(part){g=g[part]}),g}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);return e.requireType=id,e.requireModules=requireModules,err&&(e.originalError=err),e}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName;return isArray(deps)||"string"==typeof deps||(config=deps,isArray(callback)?(deps=callback,callback=errback,errback=optional):deps=[]),config&&config.context&&(contextName=config.context),(context=getOwn(contexts,contextName))||(context=contexts[contextName]=req.s.newContext(contextName)),config&&context.configure(config),context.require(deps,callback,errback)},req.config=function(config){return req(config)},req.nextTick=void 0!==setTimeout?function(fn){setTimeout(fn,4)}:function(fn){fn()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(prop){req[prop]=function(){var ctx=contexts[defContextName];return ctx.require[prop].apply(ctx,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(config,moduleName,url){var node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return node.type=config.scriptType||"text/javascript",node.charset="utf-8",node.async=!0,node},req.load=function(context,moduleName,url){var node,config=context&&context.config||{};if(isBrowser)return(node=req.createNode(config,moduleName,url)).setAttribute("data-requirecontext",context.contextName),node.setAttribute("data-requiremodule",moduleName),!node.attachEvent||node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0||isOpera?(node.addEventListener("load",context.onScriptLoad,!1),node.addEventListener("error",context.onScriptError,!1)):(useInteractive=!0,node.attachEvent("onreadystatechange",context.onScriptLoad)),node.src=url,config.onNodeCreated&&config.onNodeCreated(node,config,moduleName,url),currentlyAddingScript=node,baseElement?head.insertBefore(node,baseElement):head.appendChild(node),currentlyAddingScript=null,node;if(isWebWorker)try{setTimeout(function(){},0),importScripts(url),context.completeLoad(moduleName)}catch(e){context.onError(makeError("importscripts","importScripts failed for "+moduleName+" at "+url,e,[moduleName]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(script){if(head||(head=script.parentNode),dataMain=script.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(name,deps,callback){var node,context;"string"!=typeof name&&(callback=deps,deps=name,name=null),isArray(deps)||(callback=deps,deps=null),!deps&&isFunction(callback)&&(deps=[],callback.length&&(callback.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(match,dep){deps.push(dep)}),deps=(1===callback.length?["require"]:["require","exports","module"]).concat(deps))),useInteractive&&(node=currentlyAddingScript||getInteractiveScript())&&(name||(name=node.getAttribute("data-requiremodule")),context=contexts[node.getAttribute("data-requirecontext")]),context?(context.defQueue.push([name,deps,callback]),context.defQueueMap[name]=!0):globalDefQueue.push([name,deps,callback])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(contextName){var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},registry={},enabledRegistry={},undefEvents={},defQueue=[],defined={},urlFetched={},bundlesMap={},requireCounter=1,unnormalizedCounter=1;function normalize(name,baseName,applyMap){var mapValue,nameParts,i,j,nameSegment,lastIndex,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"];if(name&&(lastIndex=(name=name.split("/")).length-1,config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")),"."===name[0].charAt(0)&&baseParts&&(name=baseParts.slice(0,baseParts.length-1).concat(name)),function(ary){var i,part;for(i=0;i<ary.length;i++)if("."===(part=ary[i]))ary.splice(i,1),i-=1;else if(".."===part){if(0===i||1===i&&".."===ary[2]||".."===ary[i-1])continue;i>0&&(ary.splice(i-1,2),i-=2)}}(name),name=name.join("/")),applyMap&&map&&(baseParts||starMap)){nameParts=name.split("/");outerLoop:for(i=nameParts.length;i>0;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;j>0;j-=1)if((mapValue=getOwn(map,baseParts.slice(0,j).join("/")))&&(mapValue=getOwn(mapValue,nameSegment))){foundMap=mapValue,foundI=i;break outerLoop}!foundStarMap&&starMap&&getOwn(starMap,nameSegment)&&(foundStarMap=getOwn(starMap,nameSegment),starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return getOwn(config.pkgs,name)||name}function removeScript(name){isBrowser&&each(scripts(),function(scriptNode){if(scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName)return scriptNode.parentNode.removeChild(scriptNode),!0})}function hasPathFallback(id){var pathConfig=getOwn(config.paths,id);if(pathConfig&&isArray(pathConfig)&&pathConfig.length>1)return pathConfig.shift(),context.require.undef(id),context.makeRequire(null,{skipMap:!0})([id]),!0}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return index>-1&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=!0,normalizedName="";return name||(isDefine=!1,name="_@r"+(requireCounter+=1)),prefix=(nameParts=splitPrefix(name))[0],name=nameParts[1],prefix&&(prefix=normalize(prefix,parentName,applyMap),pluginModule=getOwn(defined,prefix)),name&&(prefix?normalizedName=pluginModule&&pluginModule.normalize?pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)}):-1===name.indexOf("!")?normalize(name,parentName,applyMap):name:(prefix=(nameParts=splitPrefix(normalizedName=normalize(name,parentName,applyMap)))[0],normalizedName=nameParts[1],isNormalized=!0,url=context.nameToUrl(normalizedName))),{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!(suffix=!prefix||pluginModule||isNormalized?"":"_unnormalized"+(unnormalizedCounter+=1)),url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=getOwn(registry,id);return mod||(mod=registry[id]=new context.Module(depMap)),mod}function on(depMap,name,fn){var id=depMap.id,mod=getOwn(registry,id);!hasProp(defined,id)||mod&&!mod.defineEmitComplete?(mod=getModule(depMap)).error&&"error"===name?fn(mod.error):mod.on(name,fn):"defined"===name&&fn(defined[id])}function onError(err,errback){var ids=err.requireModules,notified=!1;errback?errback(err):(each(ids,function(id){var mod=getOwn(registry,id);mod&&(mod.error=err,mod.events.error&&(notified=!0,mod.emit("error",err)))}),notified||req.onError(err))}function takeGlobalQueue(){globalDefQueue.length&&(each(globalDefQueue,function(queueItem){var id=queueItem[0];"string"==typeof id&&(context.defQueueMap[id]=!0),defQueue.push(queueItem)}),globalDefQueue=[])}function cleanRegistry(id){delete registry[id],delete enabledRegistry[id]}function checkLoaded(){var err,usingPathFallback,waitInterval=1e3*config.waitSeconds,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[],reqCalls=[],stillLoading=!1,needCycleCheck=!0;if(!inCheckLoaded){if(inCheckLoaded=!0,eachProp(enabledRegistry,function(mod){var map=mod.map,modId=map.id;if(mod.enabled&&(map.isDefine||reqCalls.push(mod),!mod.error))if(!mod.inited&&expired)hasPathFallback(modId)?(usingPathFallback=!0,stillLoading=!0):(noLoads.push(modId),removeScript(modId));else if(!mod.inited&&mod.fetched&&map.isDefine&&(stillLoading=!0,!map.prefix))return needCycleCheck=!1}),expired&&noLoads.length)return(err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads)).contextName=context.contextName,onError(err);needCycleCheck&&each(reqCalls,function(mod){!function breakCycle(mod,traced,processed){var id=mod.map.id;mod.error?mod.emit("error",mod.error):(traced[id]=!0,each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=getOwn(registry,depId);!dep||mod.depMatched[i]||processed[depId]||(getOwn(traced,depId)?(mod.defineDep(i,defined[depId]),mod.check()):breakCycle(dep,traced,processed))}),processed[id]=!0)}(mod,{},{})}),expired&&!usingPathFallback||!stillLoading||!isBrowser&&!isWebWorker||checkLoadedTimeoutId||(checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0,checkLoaded()},50)),inCheckLoaded=!1}}function callGetModule(args){hasProp(defined,args[0])||getModule(makeModuleMap(args[0],null,!0)).init(args[1],args[2])}function removeListener(node,func,name,ieName){node.detachEvent&&!isOpera?ieName&&node.detachEvent(ieName,func):node.removeEventListener(name,func,!1)}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement;return removeListener(node,context.onScriptLoad,"load","onreadystatechange"),removeListener(node,context.onScriptError,"error"),{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0])return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]));callGetModule(args)}context.defQueueMap={}}return handlers={require:function(mod){return mod.require?mod.require:mod.require=context.makeRequire(mod.map)},exports:function(mod){if(mod.usingExports=!0,mod.map.isDefine)return mod.exports?defined[mod.map.id]=mod.exports:mod.exports=defined[mod.map.id]={}},module:function(mod){return mod.module?mod.module:mod.module={id:mod.map.id,uri:mod.map.url,config:function(){return getOwn(config.config,mod.map.id)||{}},exports:mod.exports||(mod.exports={})}}},(Module=function(map){this.events=getOwn(undefEvents,map.id)||{},this.map=map,this.shim=getOwn(config.shim,map.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(depMaps,factory,errback,options){options=options||{},this.inited||(this.factory=factory,errback?this.on("error",errback):this.events.error&&(errback=bind(this,function(err){this.emit("error",err)})),this.depMaps=depMaps&&depMaps.slice(0),this.errback=errback,this.inited=!0,this.ignore=options.ignore,options.enabled||this.enabled?this.enable():this.check())},defineDep:function(i,depExports){this.depMatched[i]||(this.depMatched[i]=!0,this.depCount-=1,this.depExports[i]=depExports)},fetch:function(){if(!this.fetched){this.fetched=!0,context.startTime=(new Date).getTime();var map=this.map;if(!this.shim)return map.prefix?this.callPlugin():this.load();context.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()}))}},load:function(){var url=this.map.url;urlFetched[url]||(urlFetched[url]=!0,context.load(this.map.id,url))},check:function(){if(this.enabled&&!this.enabling){var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}else exports=context.execCb(id,factory,depExports,exports);if(this.map.isDefine&&void 0===exports&&((cjsModule=this.module)?exports=cjsModule.exports:this.usingExports&&(exports=this.exports)),err)return err.requireMap=this.map,err.requireModules=this.map.isDefine?[this.map.id]:null,err.requireType=this.map.isDefine?"define":"require",onError(this.error=err)}else exports=factory;if(this.exports=exports,this.map.isDefine&&!this.ignore&&(defined[id]=exports,req.onResourceLoad)){var resLoadMaps=[];each(this.depMaps,function(depMap){resLoadMaps.push(depMap.normalizedMap||depMap)}),req.onResourceLoad(context,this.map,resLoadMaps)}cleanRegistry(id),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(context.defQueueMap,id)||this.fetch()}},callPlugin:function(){var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix);this.depMaps.push(pluginMap),on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,bundleId=getOwn(bundlesMap,this.map.id),name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(plugin.normalize&&(name=plugin.normalize(name,function(name){return normalize(name,parentName,!0)})||""),on(normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap),"defined",bind(this,function(value){this.map.normalizedMap=normalizedMap,this.init([],function(){return value},null,{enabled:!0,ignore:!0})})),void((normalizedMod=getOwn(registry,normalizedMap.id))&&(this.depMaps.push(normalizedMap),this.events.error&&normalizedMod.on("error",bind(this,function(err){this.emit("error",err)})),normalizedMod.enable()))):bundleId?(this.map.url=context.nameToUrl(bundleId),void this.load()):((load=bind(this,function(value){this.init([],function(){return value},null,{enabled:!0})})).error=bind(this,function(err){this.inited=!0,this.error=err,err.requireModules=[id],eachProp(registry,function(mod){0===mod.map.id.indexOf(id+"_unnormalized")&&cleanRegistry(mod.map.id)}),onError(err)}),load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;textAlt&&(text=textAlt),hasInteractive&&(useInteractive=!1),getModule(moduleMap),hasProp(config.config,id)&&(config.config[moduleName]=config.config[id]);try{req.exec(text)}catch(e){return onError(makeError("fromtexteval","fromText eval for "+id+" failed: "+e,e,[id]))}hasInteractive&&(useInteractive=!0),this.depMaps.push(moduleMap),context.completeLoad(moduleName),localRequire([moduleName],load)}),void plugin.load(map.name,localRequire,load,config))})),context.enable(pluginMap,this),this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){enabledRegistry[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if("string"==typeof depMap){if(depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=depMap,handler=getOwn(handlers,depMap.id))return void(this.depExports[i]=handler(this));this.depCount+=1,on(depMap,"defined",bind(this,function(depExports){this.undefed||(this.defineDep(i,depExports),this.check())})),this.errback?on(depMap,"error",bind(this,this.errback)):this.events.error&&on(depMap,"error",bind(this,function(err){this.emit("error",err)}))}id=depMap.id,mod=registry[id],hasProp(handlers,id)||!mod||mod.enabled||context.enable(depMap,this)})),eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=getOwn(registry,pluginMap.id);mod&&!mod.enabled&&context.enable(pluginMap,this)})),this.enabling=!1,this.check()},on:function(name,cb){var cbs=this.events[name];cbs||(cbs=this.events[name]=[]),cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)}),"error"===name&&delete this.events[name]}},(context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,defQueueMap:{},Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,onError:onError,configure:function(cfg){if(cfg.baseUrl&&"/"!==cfg.baseUrl.charAt(cfg.baseUrl.length-1)&&(cfg.baseUrl+="/"),"string"==typeof cfg.urlArgs){var urlArgs=cfg.urlArgs;cfg.urlArgs=function(id,url){return(-1===url.indexOf("?")?"?":"&")+urlArgs}}var shim=config.shim,objs={paths:!0,bundles:!0,config:!0,map:!0};eachProp(cfg,function(value,prop){objs[prop]?(config[prop]||(config[prop]={}),mixin(config[prop],value,!0,!0)):config[prop]=value}),cfg.bundles&&eachProp(cfg.bundles,function(value,prop){each(value,function(v){v!==prop&&(bundlesMap[v]=prop)})}),cfg.shim&&(eachProp(cfg.shim,function(value,id){isArray(value)&&(value={deps:value}),!value.exports&&!value.init||value.exportsFn||(value.exportsFn=context.makeShimExports(value)),shim[id]=value}),config.shim=shim),cfg.packages&&each(cfg.packages,function(pkgObj){var name;name=(pkgObj="string"==typeof pkgObj?{name:pkgObj}:pkgObj).name,pkgObj.location&&(config.paths[name]=pkgObj.location),config.pkgs[name]=pkgObj.name+"/"+(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(registry,function(mod,id){mod.inited||mod.map.unnormalized||(mod.map=makeModuleMap(id,null,!0))}),(cfg.deps||cfg.callback)&&context.require(cfg.deps||[],cfg.callback)},makeShimExports:function(value){return function(){var ret;return value.init&&(ret=value.init.apply(global,arguments)),ret||value.exports&&getGlobal(value.exports)}},makeRequire:function(relMap,options){function localRequire(deps,callback,errback){var id,requireMod;return options.enableBuildCallback&&callback&&isFunction(callback)&&(callback.__requireJsBuild=!0),"string"==typeof deps?isFunction(callback)?onError(makeError("requireargs","Invalid require call"),errback):relMap&&hasProp(handlers,deps)?handlers[deps](registry[relMap.id]):req.get?req.get(context,deps,relMap,localRequire):(id=makeModuleMap(deps,relMap,!1,!0).id,hasProp(defined,id)?defined[id]:onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))):(intakeDefines(),context.nextTick(function(){intakeDefines(),(requireMod=getModule(makeModuleMap(null,relMap))).skipMap=options.skipMap,requireMod.init(deps,callback,errback,{enabled:!0}),checkLoaded()}),localRequire)}return options=options||{},mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var ext,index=moduleNamePlusExt.lastIndexOf("."),segment=moduleNamePlusExt.split("/")[0];return-1!==index&&(!("."===segment||".."===segment)||index>1)&&(ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length),moduleNamePlusExt=moduleNamePlusExt.substring(0,index)),context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,!0),ext,!0)},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,!1,!0).id)},specified:function(id){return id=makeModuleMap(id,relMap,!1,!0).id,hasProp(defined,id)||hasProp(registry,id)}}),relMap||(localRequire.undef=function(id){takeGlobalQueue();var map=makeModuleMap(id,relMap,!0),mod=getOwn(registry,id);mod.undefed=!0,removeScript(id),delete defined[id],delete urlFetched[map.url],delete undefEvents[id],eachReverse(defQueue,function(args,i){args[0]===id&&defQueue.splice(i,1)}),delete context.defQueueMap[id],mod&&(mod.events.defined&&(undefEvents[id]=mod.events),cleanRegistry(id))}),localRequire},enable:function(depMap){getOwn(registry,depMap.id)&&getModule(depMap).enable()},completeLoad:function(moduleName){var found,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0]){if(args[0]=moduleName,found)break;found=!0}else args[0]===moduleName&&(found=!0);callGetModule(args)}if(context.defQueueMap={},mod=getOwn(registry,moduleName),!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){if(!(!config.enforceDefine||shExports&&getGlobal(shExports)))return hasPathFallback(moduleName)?void 0:onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]));callGetModule([moduleName,shim.deps||[],shim.exportsFn])}checkLoaded()},nameToUrl:function(moduleName,ext,skipExt){var paths,syms,i,url,parentPath,bundleId,pkgMain=getOwn(config.pkgs,moduleName);if(pkgMain&&(moduleName=pkgMain),bundleId=getOwn(bundlesMap,moduleName))return context.nameToUrl(bundleId,ext,skipExt);if(req.jsExtRegExp.test(moduleName))url=moduleName+(ext||"");else{for(paths=config.paths,i=(syms=moduleName.split("/")).length;i>0;i-=1)if(parentPath=getOwn(paths,syms.slice(0,i).join("/"))){isArray(parentPath)&&(parentPath=parentPath[0]),syms.splice(0,i,parentPath);break}url=syms.join("/"),url=("/"===(url+=ext||(/^data\:|^blob\:|\?/.test(url)||skipExt?"":".js")).charAt(0)||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs&&!/^blob\:/.test(url)?url+config.urlArgs(moduleName,url):url},load:function(id,url){req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if("load"===evt.type||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);if(!hasPathFallback(data.id)){var parents=[];return eachProp(registry,function(value,key){0!==key.indexOf("_@r")&&each(value.depMaps,function(depMap){if(depMap.id===data.id)return parents.push(key),!0})}),onError(makeError("scripterror",'Script error for "'+data.id+(parents.length?'", needed by: '+parents.join(", "):'"'),evt,[data.id]))}}}).require=context.makeRequire(),context}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(script){if("interactive"===script.readyState)return interactiveScript=script}),interactiveScript)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),function(){function n(n){return H(n)&&pn.call(n,"callee")&&!yn.call(n,"callee")}function t(n,t){return n.push.apply(n,t),n}function r(n){return function(t){return null==t?Z:t[n]}}function o(n){return n instanceof i?n:new i(n)}function i(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t}function c(n,t,r){if("function"!=typeof n)throw new TypeError("Expected a function");return setTimeout(function(){n.apply(Z,r)},t)}function a(n,t,r){for(var e=-1,u=n.length;++e<u;){var o=n[e],i=t(o);if(null!=i&&(c===Z?i==i:r(i,c)))var c=i,f=o}return f}function l(n,t){var r=[];return mn(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function p(n,r,e,u,o){var i=-1,c=n.length;for(e||(e=R),o||(o=[]);++i<c;){var f=n[i];0<r&&e(f)?1<r?p(f,r-1,e,u,o):t(o,f):u||(o[o.length]=f)}return o}function s(n,t){return n&&On(n,t,Dn)}function h(n,t){return l(t,function(t){return U(n[t])})}function v(n,t){return n>t}function b(n,t,r,e,u){return n===t||(null==n||null==t||!H(n)&&!H(t)?n!=n&&t!=t:function(n,t,r,e,u,o){var i=Nn(n),c=Nn(t),f=i?"[object Array]":hn.call(n),a=c?"[object Array]":hn.call(t),l="[object Object]"==(f="[object Arguments]"==f?"[object Object]":f),c="[object Object]"==(a="[object Arguments]"==a?"[object Object]":a),a=f==a;o||(o=[]);var p=An(o,function(t){return t[0]==n}),s=An(o,function(n){return n[0]==t});if(p&&s)return p[1]==t;if(o.push([n,t]),o.push([t,n]),a&&!l){if(i)r=function(n,t,r,e,u,o){var i=n.length,c=t.length;if(i!=c&&!(1&r&&c>i))return!1;for(var c=-1,f=!0,a=2&r?[]:Z;++c<i;){var l=n[c],p=t[c];if(void 0!==Z){f=!1;break}if(a){if(!E(t,function(n,t){if(!P(a,t)&&(l===n||u(l,n,r,e,o)))return a.push(t)})){f=!1;break}}else if(l!==p&&!u(l,p,r,e,o)){f=!1;break}}return f}(n,t,r,e,u,o);else n:{switch(f){case"[object Boolean]":case"[object Date]":case"[object Number]":r=J(+n,+t);break n;case"[object Error]":r=n.name==t.name&&n.message==t.message;break n;case"[object RegExp]":case"[object String]":r=n==t+"";break n}r=!1}return o.pop(),r}return 1&r||(i=l&&pn.call(n,"__wrapped__"),f=c&&pn.call(t,"__wrapped__"),!i&&!f)?!!a&&(r=function(n,t,r,e,u,o){var i=1&r,c=Dn(n),f=c.length,a=Dn(t).length;if(f!=a&&!i)return!1;for(var l=f;l--;){var p=c[l];if(!(i?p in t:pn.call(t,p)))return!1}for(a=!0;++l<f;){var p=c[l],s=n[p],h=t[p];if(void 0!==Z||s!==h&&!u(s,h,r,e,o)){a=!1;break}i||(i="constructor"==p)}return a&&!i&&(r=n.constructor,e=t.constructor,r!=e&&"constructor"in n&&"constructor"in t&&!("function"==typeof r&&r instanceof r&&"function"==typeof e&&e instanceof e)&&(a=!1)),a}(n,t,r,e,u,o),o.pop(),r):(i=i?n.value():n,f=f?t.value():t,r=u(i,f,r,e,o),o.pop(),r)}(n,t,r,e,b,u))}function g(n){return"function"==typeof n?n:null==n?X:("object"==typeof n?d:r)(n)}function _(n,t){return n<t}function j(n,t){var r=-1,e=M(n)?Array(n.length):[];return mn(n,function(n,u,o){e[++r]=t(n,u,o)}),e}function d(n){var t=_n(n);return function(r){var e=t.length;if(null==r)return!e;for(r=Object(r);e--;){var u=t[e];if(!(u in r&&b(n[u],r[u],3)))return!1}return!0}}function O(n){return xn(I(n,void 0,X),n+"")}function x(n,t,r){var e=-1,u=n.length;for(0>t&&(t=-t>u?0:u+t),0>(r=r>u?u:r)&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=Array(u);++e<u;)r[e]=n[e+t];return r}function A(n){return x(n,0,n.length)}function E(n,t){var r;return mn(n,function(n,e,u){return!(r=t(n,e,u))}),!!r}function k(n,t,r){var e=!r;r||(r={});for(var u=-1,o=t.length;++u<o;){var i=t[u],c=Z;if(c===Z&&(c=n[i]),e)r[i]=c;else{var f=r,a=f[i];pn.call(f,i)&&J(a,c)&&(c!==Z||i in f)||(f[i]=c)}}return r}function N(n){return O(function(t,r){var e=-1,u=r.length,o=1<u?r[u-1]:Z;o=3<n.length&&"function"==typeof o?(u--,o):Z;for(t=Object(t);++e<u;){var i=r[e];i&&n(t,i,e,o)}return t})}function S(n,t,r){if("function"!=typeof n)throw new TypeError("Expected a function");var u=function(n){return function(){var t=arguments,r=dn(n.prototype);return V(t=n.apply(r,t))?t:r}}(n);return function e(){for(var o=-1,i=arguments.length,c=-1,f=r.length,a=Array(f+i),l=this&&this!==on&&this instanceof e?u:n;++c<f;)a[c]=r[c];for(;i--;)a[c++]=arguments[++o];return l.apply(t,a)}}function R(t){return Nn(t)||n(t)}function D(n){var t=[];if(null!=n)for(var r in Object(n))t.push(r);return t}function I(n,t,r){return t=jn(t===Z?n.length-1:t,0),function(){for(var e=arguments,u=-1,o=jn(e.length-t,0),i=Array(o);++u<o;)i[u]=e[t+u];for(u=-1,o=Array(t+1);++u<t;)o[u]=e[u];return o[t]=r(i),n.apply(this,o)}}function $(n){return null!=n&&n.length?p(n,1):[]}function q(n){return n&&n.length?n[0]:Z}function P(n,t,r){var e=null==n?0:n.length;r=((r="number"==typeof r?0>r?jn(e+r,0):r:0)||0)-1;for(var u=t==t;++r<e;){var o=n[r];if(u?o===t:o!=o)return r}return-1}function z(n,t){return mn(n,g(t))}function C(n,t,r){return function(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=!1,n):t(r,n,u,o)}),r}(n,g(t),r,3>arguments.length,mn)}function G(n,t){var r;if("function"!=typeof t)throw new TypeError("Expected a function");return n=Fn(n),function(){return 0<--n&&(r=t.apply(this,arguments)),1>=n&&(t=Z),r}}function J(n,t){return n===t||n!=n&&t!=t}function M(n){var t;return(t=null!=n)&&(t="number"==typeof(t=n.length)&&-1<t&&0==t%1&&9007199254740991>=t),t&&!U(n)}function U(n){return!!V(n)&&("[object Function]"==(n=hn.call(n))||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n)}function V(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function H(n){return null!=n&&"object"==typeof n}function K(n){return"number"==typeof n||H(n)&&"[object Number]"==hn.call(n)}function L(n){return"string"==typeof n||!Nn(n)&&H(n)&&"[object String]"==hn.call(n)}function Q(n){return"string"==typeof n?n:null==n?"":n+""}function W(n){return null==n?[]:function(n,t){return j(t,function(t){return n[t]})}(n,Dn(n))}function X(n){return n}function Y(n,r,e){var u=Dn(r),o=h(r,u);null!=e||V(r)&&(o.length||!u.length)||(e=r,r=n,n=this,o=h(r,Dn(r)));var i=!(V(e)&&"chain"in e&&!e.chain),c=U(n);return mn(o,function(e){var u=r[e];n[e]=u,c&&(n.prototype[e]=function(){var r=this.__chain__;if(i||r){var e=n(this.__wrapped__);return(e.__actions__=A(this.__actions__)).push({func:u,args:arguments,thisArg:n}),e.__chain__=r,e}return u.apply(n,t([this.value()],arguments))})}),n}var Z,tn=/[&<>"']/g,rn=RegExp(tn.source),en=/^(?:0|[1-9]\d*)$/,un="object"==typeof self&&self&&self.Object===Object&&self,on="object"==typeof global&&global&&global.Object===Object&&global||un||Function("return this")(),cn=(un="object"==typeof exports&&exports&&!exports.nodeType&&exports)&&"object"==typeof module&&module&&!module.nodeType&&module,fn=function(n){return function(t){return null==n?Z:n[t]}}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),an=Array.prototype,ln=Object.prototype,pn=ln.hasOwnProperty,sn=0,hn=ln.toString,vn=on._,bn=Object.create,yn=ln.propertyIsEnumerable,gn=on.isFinite,_n=function(n,t){return function(r){return n(t(r))}}(Object.keys,Object),jn=Math.max,dn=function(){function n(){}return function(t){return V(t)?bn?bn(t):(n.prototype=t,t=new n,n.prototype=Z,t):{}}}();i.prototype=dn(o.prototype),i.prototype.constructor=i;var mn=function(n,t){return function(r,e){if(null==r)return r;if(!M(r))return n(r,e);for(var u=r.length,o=-1,i=Object(r);++o<u&&!1!==e(i[o],o,i););return r}}(s),On=function(t,r,e){for(var u=-1,o=Object(t),i=(e=e(t)).length;i--;){var c=e[++u];if(!1===r(o[c],c,o))break}return t},xn=X,An=function(t,r,e){var u=Object(t);if(!M(t)){var o=g(r);t=Dn(t),r=function(n){return o(u[n],n,u)}}return-1<(r=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;0>(r=null==r?0:Fn(r))&&(r=jn(e+r,0));n:{for(t=g(t),e=n.length,r+=-1;++r<e;)if(t(n[r],r,n)){n=r;break n}n=-1}return n}(t,r,e))?u[o?t[r]:r]:Z},En=O(function(n,t,r){return S(n,t,r)}),wn=O(function(n,t){return c(n,1,t)}),kn=O(function(n,t,r){return c(n,Sn(t)||0,r)}),Nn=Array.isArray,Fn=Number,Sn=Number,Tn=N(function(n,t){k(t,_n(t),n)}),Bn=N(function(n,t){k(t,D(t),n)}),Rn=O(function(n,t){n=Object(n);var r,e=-1,u=t.length,o=2<u?t[2]:Z;if(r=o){r=t[0];var i=t[1];if(V(o)){if("number"==(c=typeof i)){if(c=M(o))var f=typeof i,c=!!(c=null==(c=o.length)?9007199254740991:c)&&("number"==f||"symbol"!=f&&en.test(i))&&-1<i&&0==i%1&&i<c}else c="string"==c&&i in o;r=!!c&&J(o[i],r)}else r=!1}for(r&&(u=1);++e<u;)for(o=t[e],i=-1,c=(r=In(o)).length;++i<c;){var a=n[f=r[i]];(a===Z||J(a,ln[f])&&!pn.call(n,f))&&(n[f]=o[f])}return n}),Dn=_n,In=D,$n=function(n){return xn(I(n,Z,$),n+"")}(function(n,t){return null==n?{}:function(n,t){return n=Object(n),C(t,function(t,r){return r in n&&(t[r]=n[r]),t},{})}(n,t)});o.assignIn=Bn,o.before=G,o.bind=En,o.chain=function(n){return(n=o(n)).__chain__=!0,n},o.compact=function(n){return l(n,Boolean)},o.concat=function(){var n=arguments.length;if(!n)return[];for(var r=Array(n-1),e=arguments[0];n--;)r[n-1]=arguments[n];return t(Nn(e)?A(e):[e],p(r,1))},o.create=function(n,t){var r=dn(n);return null==t?r:Tn(r,t)},o.defaults=Rn,o.defer=wn,o.delay=kn,o.filter=function(n,t){return l(n,g(t))},o.flatten=$,o.flattenDeep=function(n){return null!=n&&n.length?p(n,1/0):[]},o.iteratee=g,o.keys=Dn,o.map=function(n,t){return j(n,g(t))},o.matches=function(n){return d(Tn({},n))},o.mixin=Y,o.negate=function(n){if("function"!=typeof n)throw new TypeError("Expected a function");return function(){return!n.apply(this,arguments)}},o.once=function(n){return G(2,n)},o.pick=$n,o.slice=function(n,t,r){var e=null==n?0:n.length;return r=r===Z?e:+r,e?x(n,null==t?0:+t,r):[]},o.sortBy=function(n,t){var e=0;return t=g(t),j(j(n,function(n,r,u){return{value:n,index:e++,criteria:t(n,r,u)}}).sort(function(n,t){var r;n:{r=n.criteria;var e=t.criteria;if(r!==e){var u=r!==Z,o=null===r,i=r==r,c=e!==Z,f=null===e,a=e==e;if(!f&&r>e||o&&c&&a||!u&&a||!i){r=1;break n}if(!o&&r<e||f&&u&&i||!c&&i||!a){r=-1;break n}}r=0}return r||n.index-t.index}),r("value"))},o.tap=function(n,t){return t(n),n},o.thru=function(n,t){return t(n)},o.toArray=function(n){return M(n)?n.length?A(n):[]:W(n)},o.values=W,o.extend=Bn,Y(o,o),o.clone=function(n){return V(n)?Nn(n)?A(n):k(n,_n(n)):n},o.escape=function(n){return(n=Q(n))&&rn.test(n)?n.replace(tn,fn):n},o.every=function(n,t,r){return function(n,t){var r=!0;return mn(n,function(n,e,u){return r=!!t(n,e,u)}),r}(n,g(t=r?Z:t))},o.find=An,o.forEach=z,o.has=function(n,t){return null!=n&&pn.call(n,t)},o.head=q,o.identity=X,o.indexOf=P,o.isArguments=n,o.isArray=Nn,o.isBoolean=function(n){return!0===n||!1===n||H(n)&&"[object Boolean]"==hn.call(n)},o.isDate=function(n){return H(n)&&"[object Date]"==hn.call(n)},o.isEmpty=function(t){return M(t)&&(Nn(t)||L(t)||U(t.splice)||n(t))?!t.length:!_n(t).length},o.isEqual=function(n,t){return b(n,t)},o.isFinite=function(n){return"number"==typeof n&&gn(n)},o.isFunction=U,o.isNaN=function(n){return K(n)&&n!=+n},o.isNull=function(n){return null===n},o.isNumber=K,o.isObject=V,o.isRegExp=function(n){return H(n)&&"[object RegExp]"==hn.call(n)},o.isString=L,o.isUndefined=function(n){return n===Z},o.last=function(n){var t=null==n?0:n.length;return t?n[t-1]:Z},o.max=function(n){return n&&n.length?a(n,X,v):Z},o.min=function(n){return n&&n.length?a(n,X,_):Z},o.noConflict=function(){return on._===this&&(on._=vn),this},o.noop=function(){},o.reduce=C,o.result=function(n,t,r){return(t=null==n?Z:n[t])===Z&&(t=r),U(t)?t.call(n):t},o.size=function(n){return null==n?0:(n=M(n)?n:_n(n)).length},o.some=function(n,t,r){return E(n,g(t=r?Z:t))},o.uniqueId=function(n){var t=++sn;return Q(n)+t},o.each=z,o.first=q,Y(o,function(){var n={};return s(o,function(t,r){pn.call(o.prototype,r)||(n[r]=t)}),n}(),{chain:!1}),o.VERSION="4.17.5",mn("pop join replace reverse split push shift sort splice unshift".split(" "),function(n){var t=(/^(?:replace|split)$/.test(n)?String.prototype:an)[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|join|replace|shift)$/.test(n);o.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(Nn(u)?u:[],n)}return this[r](function(r){return t.apply(Nn(r)?r:[],n)})}}),o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=function(){return n=this.__wrapped__,C(this.__actions__,function(n,r){return r.func.apply(r.thisArg,t([n],r.args))},n);var n},"function"==typeof define&&"object"==typeof define.amd&&define.amd?(on._=o,define(function(){return o})):cn?((cn.exports=o)._=o,un._=o):on._=o}.call(this),YUI.add("agnes",function(Y){function inSeries(first,second){return(first+1)%13==second%13}function seedRank(){return Agnes.foundation.stacks[0].first().rank}const Solitaire=Y.Solitaire,Klondike=Solitaire.Klondike,Agnes=Solitaire.Agnes=Solitaire.instance(Klondike,{fields:["Foundation","Deck","Waste","Tableau","Reserve"],height:function(){return 5.6*this.Card.base.height},maxStackHeight:function(){return 4.3*this.Card.height},deal:function(){const deck=this.deck.stacks[0],foundation=this.foundation.stacks[0];Klondike.deal.call(this),deck.my_Last().faceUp().moveTo(foundation),this.turnOver()},redeal:Solitaire.noop,turnOver:function(){const deck=this.deck.stacks[0],reserves=this.reserve.stacks,waste=this.waste.stacks;let count,target,i;for(deck.cards.length<7?(count=2,target=waste):(count=7,target=reserves),i=0;i<count;i++)deck.my_Last().faceUp().moveTo(target[i])},Waste:Solitaire.instance(Klondike.Waste,{stackConfig:{total:2,layout:{hspacing:1.5,top:0,left:0}},Stack:Solitaire.instance(Solitaire.Stack,{setCardPosition:function(card){const last=this.my_Last(),top=this.top,left=last?last.left+1.5*Solitaire.Card.width:this.left;card.top=top,card.left=left}})}),Reserve:{field:"reserve",stackConfig:{total:7,layout:{hspacing:1.25,left:0,top:function(){return 4.4*Solitaire.Card.height}}},Stack:Solitaire.instance(Klondike.Stack,{images:{},setCardPosition:function(card){return this.lastCardSetCardPosition(card)}})},Card:Solitaire.instance(Klondike.Card,{playable:function(){return"reserve"===this.stack.field?this.isFree():Klondike.Card.playable.call(this)},validTarget:function(stack){const target=stack.my_Last();switch(stack.field){case"tableau":return target?!target.isFaceDown&&target.color!==this.color&&inSeries(this.rank,target.rank):inSeries(this.rank,seedRank());case"foundation":return this.validFoundationTarget(target);default:return!1}},validFoundationTarget:function(target){return target?this.suit===target.suit&&this.rank%13==(target.rank+1)%13:this.rank===seedRank()}})})},"0.0.1",{requires:["klondike"]}),define(["./solitaire"],function(solitaire){let newGameRun,schedule,schedule_cb,enable_solitairey_ui=!1;return function(){const active={name:"freecell",game:null},yui=YUI({base:"js/yui-unpack/yui/build/"});let Y;const games={agnes:"Agnes",klondike:"Klondike",klondike1t:"Klondike1T","flower-garden":"FlowerGarden","forty-thieves":"FortyThieves",freecell:"Freecell",golf:"Golf","grandfathers-clock":"GClock","monte-carlo":"MonteCarlo",pyramid:"Pyramid","russian-solitaire":"RussianSolitaire",scorpion:"Scorpion",spider:"Spider",spider1s:"Spider1S",spider2s:"Spider2S",spiderette:"Spiderette","tri-towers":"TriTowers","will-o-the-wisp":"WillOTheWisp",yukon:"Yukon"},extensions=["auto-turnover","statistics","solitaire-autoplay","solitaire"],Fade=function(){let body,el=null;const css={position:"absolute",display:"none",backgroundColor:"#000",opacity:.7,top:0,left:0,width:0,height:0,zIndex:1e3},element=function(){return null===el&&((el=Y.Node.create("<div></div>")).setStyles(css),body=Y.one(".solitairey_body").append(el)),el};return{show:function(){const el=element();css.display="block",css.width=el.get("winWidth"),css.height=el.get("winHeight"),el.setStyles(css)},hide:function(){css.display="none",element().setStyles(css)}}}();function switchToGame(name){active.name=name,active.game=Y.Solitaire[games[name]]}function playGame(name){switchToGame(name),Y.Cookie.set("options",name,{expires:new Date((new Date).getTime()+12096e5)}),newGame()}const GameChooser={selected:null,fade:!1,init:function(){this.refit()},refit:function(){const node=Y.one("#game-chooser");if(!node)return;const height=node.get("winHeight");node.setStyle("min-height",height)},show:function(fade){this.selected||this.select(active.name),fade&&(Fade.show(),this.fade=!0),Y.one("#game-chooser").addClass("show"),Y.one(".solitairey_body").addClass("scrollable")},hide:function(){this.fade&&Fade.hide(),Y.one("#game-chooser").removeClass("show"),Y.fire("gamechooser:hide",this),Y.one(".solitairey_body").removeClass("scrollable")},choose:function(){this.selected&&(this.hide(),playGame(this.selected))},select:function(game){const node=Y.one("#"+game+"> div"),previous=this.selected;previous!==game&&this.unSelect(),node&&(this.selected=game,new Y.Node(document.getElementById(game)).addClass("selected")),previous&&previous!==game&&Y.fire("gamechooser:select",this)},unSelect:function(){this.selected&&(new Y.Node(document.getElementById(this.selected)).removeClass("selected"),this.selected=null)}};const Themes={dondorf:{sizes:[61,79,95,122],61:{hiddenRankHeight:7,rankHeight:25,dimensions:[61,95]},79:{hiddenRankHeight:10,rankHeight:32,dimensions:[79,123]},95:{hiddenRankHeight:12,rankHeight:38,dimensions:[95,148]},122:{hiddenRankHeight:15,rankHeight:48,dimensions:[122,190]}},load:function(name){const base=Y.Solitaire.Card.base;name in this||(name="dondorf"),base.theme!==name&&this.set(name,122)},set:function(name,size){const theme=this[name][size];Y.mix(Y.Solitaire.Card.base,{theme:name+"/"+size,hiddenRankHeight:theme.hiddenRankHeight,rankHeight:theme.rankHeight,width:theme.dimensions[0],height:theme.dimensions[1]},!0)}};function attachEvents(){if(Y.on("newAppGame",function(){return newGame()}),enable_solitairey_ui&&(Y.on("click",restart,Y.one("#restart")),Y.on("click",function(){GameChooser.show(!1)},Y.one("#choose_game")),Y.on("click",newGame,Y.one("#new_deal")),Y.on("click",function(){GameChooser.hide()},Y.one("#close-chooser")),Y.on("click",function(){active.game.undo()},Y.one("#undo"))),enable_solitairey_ui){Y.on("click",function(){const chromestore=Y.one(".chromestore");chromestore&&chromestore.addClass("hidden"),Y.Cookie.set("disable-chromestore-link",!0,{expires:new Date((new Date).getTime()+31536e6)})},Y.one(".chromestore")),Y.delegate("click",function(e){GameChooser.select(e.currentTarget._node.id),GameChooser.choose()},"#descriptions","li")}Y.one("document").on("keydown",function(e){27===e.keyCode&&GameChooser.hide()}),Y.on("afterSetup",function(){active.game.stationary(function(){resize()})}),function(){let timer,attachEvent;window.addEventListener?attachEvent="addEventListener":window.attachEvent&&(attachEvent="attachEvent"),window[attachEvent](Y.Solitaire.Application.resizeEvent,function(){clearTimeout(timer),timer=setTimeout(resize,250)},!1)}()}const Preloader={loadingCount:0,loaded:function(callback){if(this.loadingCount)setTimeout(function(){this.loaded(callback)}.bind(this),100);else{const loading=Y.one(".loading");loading&&loading.addClass("hidden"),callback(),Fade.hide()}},load:function(path){const image=new Image;image.onload=function(){--this.loadingCount}.bind(this),image.src=path,this.loadingCount++},preload:function(){const that=this;let rank;Y.Array.each(["s","h","c","d"],function(suit){for(rank=1;rank<=13;rank++)that.load(Y.Solitaire.Card.base.theme+"/"+suit+rank+".png")},this),this.load(Y.Solitaire.Card.base.theme+"/facedown.png"),Y.Array.each(["agnes","flower-garden","forty-thieves","freecell","gclock","golf","klondike1t","klondike","montecarlo","pyramid","scorpion","spider1s","spider2s","spiderette","spider","tritowers","will-o-the-wisp","yukon"],function(image){that.load("layouts/mini/"+image+".png")},that),Fade.show();const loading=Y.one(".loading");loading&&loading.removeClass("hidden")}};function _my_load_func(){const save=Y.Cookie.get("saved-game");attachEvents(),function(){const options=Y.Cookie.get("options");options&&(active.name=options),Themes.load("dondorf")}(),Preloader.preload(),Preloader.loaded(function(){save?(clearDOM(),active.game=Y.Solitaire[games[active.name]],active.game.loadGame(save)):enable_solitairey_ui&&playGame(active.name)}),GameChooser.init(),schedule_cb&&schedule_cb(Y)}function resize(){const game=active.game,el=game.container(),padding=Y.Solitaire.padding,offset=Y.Solitaire.offset,width=el.get("winWidth")-padding.x,height=el.get("winHeight")-padding.y;Y.Solitaire.Application.windowHeight=height;const ratio=Math.min((width-offset.left)/game.width(),(height-offset.top)/game.height());active.game.resize(ratio),GameChooser.refit()}function clearDOM(){Y.all(".stack, .card").remove()}function restart(){const init=Y.Cookie.get("initial-game");if(init){clearDOM();const game=active.game;game.cleanup(),game.loadGame(init),game.save()}}function clearGame(){const game=active.game;clearDOM(),game.cleanup()}function newGame(){clearGame(),active.game.newGame()}newGameRun=function(){playGame("freecell")},schedule=function(cb){schedule_cb=cb},yui.use.apply(yui,function(){const modules=extensions.slice();for(const m in games)games.hasOwnProperty(m)&&modules.unshift(m);return modules}().concat(function(YUI){(Y=YUI).on("newGameRun",newGameRun),Y.Solitaire.Application={windowHeight:0,resizeEvent:"resize",GameChooser:GameChooser,newGame:newGame,clearDOM:clearGame,switchToGame:switchToGame},Y.on("domready",_my_load_func)})),window.setTimeout(function(){yui.use.apply(yui,["solver-freecell"])},400)}(),{schedule:schedule,newGameRun:newGameRun,setUI:v=>{enable_solitairey_ui=v}}}),define(["./solitaire"],function(solitaire){return YUI.add("auto-stack-clear",function(Y){const Solitaire=Y.Solitaire;function clearComplete(stack,startIndex){const cards=stack.cards;let count=cards.length-startIndex;const foundation=Y.Array.find(Solitaire.game.foundation.stacks,function(stack){return!stack.cards.length});Solitaire.stationary(function(){for(;count;)_.last(cards).moveTo(foundation),count--}),stack.updateCardsPosition()}Y.namespace("Solitaire.AutoStackClear"),Solitaire.AutoStackClear.register=function(){Y.on("solitaire|tableau:afterPush",function(stack){!function(stack,callback){const cards=stack.cards;let rank,suit,card,i;if(!cards.length)return!1;for(i=cards.length-1,rank=1,suit=cards[i].suit;i>=0&&rank<14;i--,rank++)if((card=cards[i]).isFaceDown||card.rank!==rank||card.suit!==suit)return!1;const complete=14===rank;complete&&"function"==typeof callback&&callback(stack,i+1)}(stack,clearComplete)})}},"0.0.1",{requires:["solitaire"]}),{auto_stack:!0}}),define(["./solitaire"],function(solitaire){return YUI.add("auto-turnover",function(Y){Y.on("tableau:afterPop",function(stack){Y.Array.each(stack.cards,function(card){card&&card.isFaceDown&&card.isFree()&&card.faceUp()})})},"0.0.1",{requires:["solitaire"]}),{}}),define(["./solitaire"],function(solitaire){return YUI.add("solitaire-autoplay",function(Y){Y.namespace("Solitaire.Autoplay");const Solitaire=Y.Solitaire,Autoplay=Solitaire.Autoplay;let whenWon=!0,autoPlayInterval=null;const autoPlayable=["Klondike","Klondike1T","FortyThieves","GClock","Freecell","FlowerGarden","Yukon"];function autoPlay(){let played=!1;Solitaire.game.eachStack(function(stack){const field=stack.field;played||"foundation"===field||"deck"===field||(played=!stack.eachCard(function(card){return!card.autoPlay()}))})}Y.on("endTurn",function(){whenWon&&-1!==autoPlayable.indexOf(Solitaire.game.name())&&null===autoPlayInterval&&function(){let stop=!1;return Solitaire.game.eachStack(function(stack){const field=stack.field;let prevRank=14;stop||"tableau"!==field&&"waste"!==field||stack.eachCard(function(card){if(card.rank>prevRank||card.isFaceDown)return stop=!0,!1;prevRank=card.rank})}),!stop}()&&Y.fire("autoPlay")}),Y.on("win",function(){clearInterval(autoPlayInterval),autoPlayInterval=null}),Y.on("autoPlay",function(){autoPlayInterval=setInterval(autoPlay,130)}),Y.mix(Autoplay,{enable:function(){whenWon=!0},disable:function(){whenWon=!1}})},"0.0.1",{requires:["solitaire"]}),{}}),YUI.add("flower-garden",function(Y){const Solitaire=Y.Solitaire,FlowerGarden=Y.Solitaire.FlowerGarden=Solitaire.instance(Solitaire,{fields:["Foundation","Reserve","Tableau"],deal:function(){let card,i,stack=0;const stacks=this.tableau.stacks;for(deck=this.deck,reserve=this.reserve.stacks[0],i=0;i<36;i++)card=deck.pop(),stacks[stack].push(card.faceUp()),6===++stack&&(stack=0);for(;card=deck.pop();)card.faceUp(),reserve.push(card)},height:function(){return 5.5*this.Card.base.height},maxStackHeight:function(){return 4.4*this.Card.height},Stack:Solitaire.instance(Solitaire.Stack),Foundation:{stackConfig:{total:4,layout:{hspacing:1.25,top:0,left:function(){return 4.25*Solitaire.Card.width}}},field:"foundation",draggable:!1},Reserve:{stackConfig:{total:1,layout:{hspacing:1.25,top:function(){return 4.5*Solitaire.Card.height},left:function(){return 3*Solitaire.Card.width}}},field:"reserve",draggable:!0},Tableau:{stackConfig:{total:6,layout:{hspacing:1.25,top:function(){return 1.25*Solitaire.Card.height},left:function(){return 3*Solitaire.Card.width}}},field:"tableau",draggable:!0},Card:Solitaire.instance(Solitaire.Card,{rankHeight:24,createProxyStack:function(){let stack;switch(this.stack.field){case"foundation":this.proxyStack=null;break;case"tableau":return Solitaire.Card.createProxyStack.call(this);case"reserve":(stack=Solitaire.instance(this.stack)).cards=[this],this.proxyStack=stack}return this.proxyStack},moveTo:function(stack){const cards=this.stack.cards,index=cards.indexOf(this);let i,len;for(Solitaire.Card.moveTo.call(this,stack),cards.splice(index,0,null),i=index+1,len=cards.length;i<len;i++)cards[i].pushPosition();cards.splice(index,1)},validTarget:function(stack){const target=stack.my_Last();switch(stack.field){case"tableau":return!target||target.rank===this.rank+1;case"foundation":return target?target.suit===this.suit&&target.rank===this.rank-1:1===this.rank;default:return!1}},isFree:function(){return"reserve"===this.stack.field||Solitaire.Card.isFree.call(this)}})},!0);Y.Array.each(FlowerGarden.fields,function(field){FlowerGarden[field].Stack=Solitaire.instance(FlowerGarden.Stack)},!0),Y.mix(FlowerGarden.Stack,{images:{foundation:"freeslot.png",tableau:"freeslot.png"},validTarget:function(stack){return"tableau"===stack.field&&this.first().validTarget(stack)},validCard:function(){return!1}},!0),Y.mix(FlowerGarden.Tableau.Stack,{setCardPosition:function(card){return this.lastCardSetCardPosition(card)}},!0),Y.mix(FlowerGarden.Reserve.Stack,{setCardPosition:function(card){const last=_.last(this.cards),left=last?last.left+.4*Solitaire.Card.width:this.left,top=this.top;card.left=left,card.top=top},update:function(undo){if(undo)return;const stack=this;Y.Array.each(this.cards,function(card,i){const left=stack.left+i*card.width*.4;left!==card.left&&(card.left=left,card.updatePosition())})}},!0)},"0.0.1",{requires:["solitaire"]}),YUI.add("forty-thieves",function(Y){const Solitaire=Y.Solitaire,FortyThieves=Y.Solitaire.FortyThieves=Solitaire.instance(Solitaire,{fields:["Foundation","Deck","Waste","Tableau"],deal:function(){let card,stack,row;const deck=this.deck,stacks=this.tableau.stacks;for(row=0;row<4;row++)for(stack=0;stack<10;stack++)card=deck.pop().faceUp(),stacks[stack].push(card);deck.createStack()},redeal:function(){},turnOver:function(){const deck=this.deck.stacks[0],waste=this.waste.stacks[0];for(let i=deck.cards.length,stop=i-1;i>stop&&i;i--)deck.my_Last().faceUp().moveTo(waste)},Stack:Solitaire.instance(Solitaire.Stack),Foundation:{stackConfig:{total:8,layout:{hspacing:1.25,top:0,left:function(){return 3*Solitaire.Card.width}}},field:"foundation",draggable:!1},Deck:Solitaire.instance(Solitaire.Deck,{count:2,stackConfig:{total:1,layout:{hspacing:0,top:0,left:0}},field:"deck",init:function(){Solitaire.Deck.init.call(this),Y.Array.each(this.cards,function(c){c.faceDown()})},createStack:function(){for(let i=this.cards.length-1;i>=0;i--)this.stacks[0].push(this.cards[i])}}),Waste:{stackConfig:{total:1,layout:{hspacing:0,top:0,left:function(){return 1.25*Solitaire.Card.width}}},field:"waste",draggable:!0},Tableau:{stackConfig:{total:10,layout:{hspacing:1.31,top:function(){return 1.5*Solitaire.Card.height},left:0}},field:"tableau",draggable:!0},Card:Solitaire.instance(Solitaire.Card,{validTarget:function(stack){const target=stack.my_Last();switch(stack.field){case"tableau":return target?!target.isFaceDown&&target.suit===this.suit&&target.rank===this.rank+1:13===this.rank;case"foundation":return target?target.suit===this.suit&&target.rank===this.rank-1:1===this.rank;default:return!1}}})});Y.Array.each(FortyThieves.fields,function(field){FortyThieves[field].Stack=Solitaire.instance(FortyThieves.Stack)}),Y.mix(FortyThieves.Stack,{cssClass:"freestack",validTarget:function(stack){return"tableau"===stack.field&&this.first().validTarget(stack)},validCard:function(){return!1}},!0),Y.mix(FortyThieves.Tableau.Stack,{setCardPosition:function(card){return this.lastCardSetCardPosition(card)}},!0),Y.mix(FortyThieves.Deck.Stack,{createDOMElement:function(){Solitaire.Stack.createDOMElement.call(this),this.node.on("click",Solitaire.Events.clickEmptyDeck)}},!0),FortyThieves.Foundation.Stack.cssClass="freefoundation"},"0.0.1",{requires:["solitaire"]}),define(["./solitaire"],function(solitaire){const instance=solitaire.instance;return YUI.add("freecell",function(Y){const Solitaire=Y.Solitaire,Freecell=Y.Solitaire.Freecell=instance(Solitaire,{fields:["Foundation","Reserve","Tableau"],deal:function(){let card,stack=0;const stacks=this.tableau.stacks;for(;card=this.deck.pop();)stacks[stack].push(card.faceUp()),8===++stack&&(stack=0)},openSlots:function(exclude){let total=1,freeTableaus=0;const rStacks=this.reserve.stacks,tStacks=this.tableau.stacks;for(let i=0;i<4;i++)rStacks[i].my_Last()||++total;for(let i=0;i<8;i++){const stack=tStacks[i];exclude!==stack&&!stack.my_Last()&&++freeTableaus}return total*Math.pow(2,freeTableaus)},Stack:instance(Solitaire.Stack),height:function(){return 5*this.Card.base.height},Foundation:{stackConfig:{total:4,layout:{hspacing:1.25,top:0,left:function(){return 6*Solitaire.Card.width}}},field:"foundation",draggable:!1},Reserve:{stackConfig:{total:4,layout:{hspacing:1.25,top:0,left:0}},field:"reserve",draggable:!0},Tableau:{stackConfig:{total:8,layout:{hspacing:1.25,top:function(){return 1.5*Solitaire.Card.height},left:0}},field:"tableau",draggable:!0},Card:instance(Solitaire.Card,{playable:function(){switch(this.stack.field){case"reserve":return!0;case"tableau":return this.createProxyStack();case"foundation":return!1}},createProxyStack:function(){const stack=Solitaire.Card.createProxyStack.call(this);return this.proxyStack=stack&&stack.cards.length<=Freecell.openSlots(stack)?stack:null,this.proxyStack},validTarget:function(stack){const target=stack.my_Last();switch(stack.field){case"tableau":return!target||target.color!==this.color&&target.rank===this.rank+1;case"foundation":return target?target.suit===this.suit&&target.rank===this.rank-1:1===this.rank;case"reserve":return!target}}})});Y.Array.each(Freecell.fields,function(field){Freecell[field].Stack=instance(Freecell.Stack)},!0),Y.mix(Freecell.Stack,{validTarget:function(stack){return!("tableau"!==stack.field||!this.first().validTarget(stack))&&this.cards.length<=Freecell.openSlots(stack)}},!0),Y.mix(Freecell.Tableau.Stack,{setCardPosition:function(card){return this.lastCardSetCardPosition(card)}},!0)},"0.0.1",{requires:["solitaire"]}),{instance:instance}}),YUI.add("golf",function(Y){const Solitaire=Y.Solitaire,Golf=Y.Solitaire.Golf=Solitaire.instance(Solitaire,{fields:["Deck","Foundation","Tableau"],deal:function(){let card,stack,row;const stacks=this.tableau.stacks,deck=this.deck,foundation=this.foundation.stacks[0];for(row=0;row<5;row++)for(stack=0;stack<7;stack++)card=deck.pop().faceUp(),stacks[stack].push(card);card=deck.pop().faceUp(),foundation.push(card),deck.createStack()},turnOver:function(){const deck=this.deck.stacks[0],foundation=this.foundation.stacks[0],last=deck.my_Last();last&&last.faceUp().moveTo(foundation)},isWon:function(){let won=!0;return this.eachStack(function(stack){stack.eachCard(function(card){return card&&(won=!1),won})},"tableau"),won},height:function(){return 4*this.Card.base.height},Deck:Solitaire.instance(Solitaire.Deck,{field:"deck",stackConfig:{total:1,layout:{hspacing:0,top:function(){return 3*Solitaire.Card.height},left:0}},createStack:function(){let i,len;for(i=0,len=this.cards.length;i<len;i++)this.stacks[0].push(this.cards[i])}}),Tableau:{field:"tableau",stackConfig:{total:7,layout:{hspacing:1.25,top:0,left:0}}},Foundation:{field:"foundation",stackConfig:{total:1,layout:{hspacing:0,top:function(){return 3*Solitaire.Card.height},left:function(){return 3.75*Solitaire.Card.width}}}},Events:Solitaire.instance(Solitaire.Events,{dragCheck:function(e){this.getCard().autoPlay(),this._afterDragEnd(),e.halt()}}),Card:Solitaire.instance(Solitaire.Card,{validTarget:function(stack){if("foundation"!==stack.field)return!1;const target=stack.my_Last();return 1===Math.abs(this.rank-target.rank)},isFree:function(){return!this.isFaceDown&&this===this.stack.my_Last()}}),Stack:Solitaire.instance(Solitaire.Stack,{images:{}})},!0);Y.Array.each(Golf.fields,function(field){Golf[field].Stack=Solitaire.instance(Golf.Stack)}),Y.mix(Golf.Tableau.Stack,{setCardPosition:function(card){return this.lastCardSetCardPosition(card)}},!0),Y.mix(Golf.Deck.Stack,{setCardPosition:function(card){let left,zIndex;const last=this.my_Last(),top=this.top;last?(left=last.left+.1*card.width,zIndex=last.zIndex+1):(left=this.left,zIndex=0),card.top=top,card.left=left,card.zIndex=zIndex}},!0)},"0.0.1",{requires:["solitaire"]}),YUI.add("grandfathers-clock",function(Y){function wrap(array,index){const len=array.length;return(index%=len)<0&&(index+=len),array[index]}Y.namespace("Solitaire.GClock");const Solitaire=Y.Solitaire,GClock=Y.Solitaire.GClock=Solitaire.instance(Solitaire,{fields:["Foundation","Tableau"],deal:function(){let card,found,rank,stack=0,i=51;const cards=this.deck.cards,clock=[],suits=["d","c","h","s"],foundations=this.foundation.stacks,stacks=this.tableau.stacks;for(;i>=0;){for(card=cards[i],found=!1,rank=2;rank<=13;rank++)if(card.rank===rank&&card.suit===wrap(suits,rank)){found=!0,cards.splice(i,1),clock[rank-2]=card.faceUp();break}found||(stacks[stack].push(card.faceUp()),stack=(stack+1)%8),i--}for(i=0;i<12;i++)foundations[(i+2)%12].push(clock[i])},height:function(){return 6.7*this.Card.base.height},Stack:Solitaire.instance(Solitaire.Stack),Foundation:{stackConfig:{total:12,layout:{hspacing:1.25,top:function(){return 3*Solitaire.Card.height},left:function(){return 3.25*Solitaire.Card.width}}},field:"foundation",draggable:!1},Tableau:{stackConfig:{total:8,layout:{hspacing:1.25,top:0,left:function(){return 7.25*Solitaire.Card.width}}},field:"tableau",draggable:!0},Card:Solitaire.instance(Solitaire.Card,{createProxyStack:function(){switch(this.stack.field){case"foundation":this.proxyStack=null;break;case"tableau":return Solitaire.Card.createProxyStack.call(this)}return this.proxyStack},validTarget:function(stack){const target=stack.my_Last();let rank,hour;switch(stack.field){case"tableau":return!target||target.rank===this.rank+1;case"foundation":return hour=(stack.index()+3)%12,rank=target.rank,target.suit===this.suit&&(target.rank+1)%13==this.rank%13&&(low=stack.first().rank,high=hour,value=this.rank,low<=high?low<=value&&value<=high:low<=value||value<=high);default:return!1}var low,high,value}})});function normalize(valOrFunction){const val="function"==typeof valOrFunction?valOrFunction():valOrFunction;return isNaN(val)?void 0:val}Y.Array.each(GClock.fields,function(field){GClock[field].Stack=Solitaire.instance(GClock.Stack)},!0),Y.mix(GClock.Stack,{validTarget:function(stack){return"tableau"===stack.field&&this.first().validTarget(stack)},validCard:function(){return!1}},!0),Y.mix(GClock.Tableau.Stack,{setCardPosition:function(card){return this.lastCardSetCardPosition(card)}},!0),Y.mix(GClock.Foundation.Stack,{index:function(){return GClock.foundation.stacks.indexOf(this)},layout:function(layout,i){const top=Math.sin(Math.PI*i/6)*Solitaire.Card.height*2.25,left=Math.cos(Math.PI*i/6)*Solitaire.Card.width*3;this.top=top+normalize(layout.top),this.left=left+normalize(layout.left)}},!0)},"0.0.1",{requires:["solitaire"]}),YUI.add("solitaire-background-fix",function(Y){let _body;function resize(){const width=body().get("winWidth"),height=body().get("winHeight"),style=document.body.style;Y.UA.mobile||body().setStyles({width:width,height:height}),void 0===style.backgroundSize&&void 0===style.MozBackgroundSize&&body().setStyles({backgroundImage:"url(greentiled.jpg)",backgroundRepeat:"repeat"})}function body(){return _body||(_body=new Y.Node(document.body)),_body}Y.on("load",resize),Y.on("resize",resize)},"0.0.1",{requires:["solitaire"]}),define(["./solitaire"],function(solitaire){return YUI.add("solitaire-ios",function(Y){if(Y.UA.ios){var deck,waste,setCardPosition,Solitaire=Y.Solitaire,_scale=Solitaire.scale,LANDSCAPE=0,PORTRAIT=1,BARE_LAYOUT={hspacing:0,vspacing:0,left:0,top:0},DEFAULTS={scale:1,offset:60,maxStackHeight:155},OPTIONS={Agnes:{offset:[null,5],maxStackHeight:260},FlowerGarden:{offset:[-60,5],maxStackHeight:235},Freecell:{scale:[1,.93],offset:[35,5]},Golf:{scale:[1.1,1],offset:[45,8]},GClock:{scale:.93,offset:5,maxStackHeight:130},Klondike:{offset:[null,5],maxStackHeight:[null,340]},MonteCarlo:{scale:[.88,1],offset:[80,15]},Pyramid:{offset:20},Scorpion:{offset:5,maxStackHeight:[235,380]},Spider:{scale:[1.13,.79],offset:[5,2],maxStackHeight:[160,340]},TriTowers:{scale:.9,offset:10},Yukon:{scale:[.95,1],offset:[50,5],maxStackHeight:[235,390]}},gameOverrides={Agnes:function(){var hspacing={hspacing:1.13};fieldLayout(this,"Reserve",Y.merge(hspacing,{top:60})),fieldLayout(this,"Tableau",Y.merge(hspacing,{top:145})),fieldLayout(this,"Foundation",Y.merge(hspacing,{left:135}))},FlowerGarden:[function(){this.Card.rankHeight=15,fieldLayout(this,"Reserve",{top:0,left:70}),fieldLayout(this,"Foundation",{top:0,left:470,hspacing:0,vspacing:1.1}),fieldLayout(this,"Tableau",{top:0,left:140}),Y.mix(this.Reserve.Stack,{setCardPosition:function(card){var last=_.last(this.cards),top=last?last.top+11:this.top,left=this.left;card.left=left,card.top=top},update:Solitaire.noop},!0)},(setCardPosition=Solitaire.FlowerGarden.Reserve.Stack.setCardPosition,function(){fieldLayout(this,"Tableau",{left:10,top:120}),fieldLayout(this,"Reserve",{left:17,top:60}),fieldLayout(this,"Foundation",{left:55,top:0,hspacing:1.5,vspacing:0}),Y.mix(this.Reserve.Stack,{setCardPosition:setCardPosition,update:Solitaire.noop},!0)})],Freecell:[originalLayout("Freecell",["Foundation","Reserve","Tableau"]),function(){var hspacing={hspacing:1.05};fieldLayout(this,"Tableau",hspacing),fieldLayout(this,"Reserve",hspacing),fieldLayout(this,"Foundation",Y.merge(hspacing,{left:157}))}],Golf:[originalLayout("Golf",["Tableau","Foundation"]),function(){fieldLayout(this,"Tableau",{hspacing:1.1}),fieldLayout(this,"Foundation",{left:132})}],GClock:function(){fieldLayout(this,"Foundation",{left:143}),fieldLayout(this,"Tableau",{left:0,top:250,hspacing:1.05})},Klondike:[function(){originalLayout("Klondike","Foundation").call(this),originalLayout("Klondike","Tableau").call(this)},function(){Y.mix(this.Foundation.stackConfig.layout,{left:135,hspacing:1.13},!0),Y.mix(this.Tableau.stackConfig.layout,{hspacing:1.13},!0)}],MonteCarlo:function(){fieldLayout(this,"Tableau",{cardGap:1.1,vspacing:1.05})},Pyramid:[(deck=originalLayout("Pyramid","Deck"),waste=originalLayout("Pyramid","Waste"),function(){deck.call(this),waste.call(this),Y.mix(this.Tableau.stackConfig.layout,{left:190,cardGap:1.1,hspacing:-.55},!0)}),function(){Y.mix(this.Deck.stackConfig.layout,{left:-10,top:300},!0),Y.mix(this.Waste.stackConfig.layout,{top:300},!0),Y.mix(this.Tableau.stackConfig.layout,{left:120,cardGap:1.1,hspacing:-.55},!0)}],Scorpion:[function(){fieldLayout(this,"Deck",{top:0,left:0}),fieldLayout(this,"Foundation",{top:0,left:420,hspacing:0,vspacing:1.1}),fieldLayout(this,"Tableau",{left:60,top:0,hspacing:1.13})},function(){fieldLayout(this,"Deck",{left:10,top:0}),fieldLayout(this,"Foundation",{left:75,top:0,hspacing:1.5,vspacing:0}),fieldLayout(this,"Tableau",{left:0,top:60,hspacing:1.13})}],Spider:[function(){fieldLayout(this,"Foundation",{left:94,hspacing:1.05}),fieldLayout(this,"Tableau",{top:65,hspacing:1.05})},function(){fieldLayout(this,"Foundation",{left:62,hspacing:1}),fieldLayout(this,"Tableau",{hspacing:1})}],TriTowers:function(){Y.mix(this.Tableau.stackConfig.layout,{hspacing:-.5,rowGaps:[3,2,1,0],cardGap:1},!0)},RussianSolitaire:[originalLayout("RussianSolitaire",["Tableau","Foundation"]),function(){fieldLayout(this,"Tableau",{top:55,hspacing:1.13}),fieldLayout(this,"Foundation",{left:46,top:0,hspacing:1.5,vspacing:0})}],Yukon:[originalLayout("Yukon",["Tableau","Foundation"]),function(){fieldLayout(this,"Tableau",{top:55,hspacing:1.13}),fieldLayout(this,"Foundation",{left:46,top:0,hspacing:1.5,vspacing:0})}]};OPTIONS.FortyThieves=OPTIONS.Spider1S=OPTIONS.Spider2S=OPTIONS.Spider,gameOverrides.FortyThieves=gameOverrides.Spider1S=gameOverrides.Spider2S=gameOverrides.Spider,OPTIONS.WillOTheWisp=OPTIONS.Spiderette=OPTIONS.Klondike1T=OPTIONS.Klondike,gameOverrides.WillOTheWisp=gameOverrides.Spiderette=gameOverrides.Klondike1T=gameOverrides.Klondike,OPTIONS.RussianSolitaire=OPTIONS.Yukon,Y.mix(Y.DD.DDM,{useHash:!1,_pg_activate:Solitaire.noop,_pg_size:function(){this.activeDrag&&this._pg.setStyles({width:"100%",height:"100%"})}},!0),Y.DD.DDM.set("throttleTime",40),Y.mix(Y.DD.Drop.prototype,{_activateShim:function(){var DDM=Y.DD.DDM;return!!DDM.activeDrag&&(this.get("node")!==DDM.activeDrag.get("node")&&(!this.get("lock")&&void(this.inGroup(DDM.activeDrag.get("groups"))?(DDM._addValid(this),this.overTarget=!1,this.get("useShim")||(this.shim=this.get("node")),this.sizeShim()):DDM._removeValid(this))))},_deactivateShim:function(){this.overTarget=!1}},!0),Solitaire.Statistics.winDisplay=function(){alert("You win!")},Solitaire.scale=Solitaire.noop,Solitaire.Card.ghost=!1,Solitaire.Animation.animate=!1,Solitaire.Card.base={theme:"mobile",hiddenRankHeight:3,rankHeight:15,width:40,height:50},Y.on("beforeSetup",setLayout),Y.on("beforeResize",setLayout),Y.on("afterResize",scrollToTop),Y.on("load",scrollToTop),Y.on("touchstart",function(e){e.target._node===document.body&&e.preventDefault()},document),Y.on("touchmove",function(e){e.target.test("#descriptions *")||e.preventDefault()},document),Y.on("domready",function(){var undo,cancel,showMenu,menu,body,nav,fb,index,closeMenu=function(){menu.removeClass("show")};(index=0,{deleteSelector:function(selector){var rules,idx,ss=document.styleSheets[index];ss&&-1!==(idx=(rules=Array.prototype.splice.call(ss.rules,0)).indexOf(rules.filter(function(rule){return rule.selectorText===selector})[0]))&&ss.deleteRule(idx)}}).deleteSelector("#menu li:hover"),menu=Y.one("#menu"),body=Y.one("body"),undo=Y.one("#undo"),fb=Y.one("#social"),nav=Y.Node.create("<nav id=navbar>"),showMenu=Y.Node.create("<a id=show_menu class='button'>New Game</a>"),cancel=Y.Node.create("<li class=cancel><a id='cancel'>Cancel</a></li>"),undo.get("parentNode").remove(),showMenu.on("click",function(){menu.addClass("show")}),menu.append(cancel),nav.append(showMenu),fb&&(navigator.onLine?nav.append(fb):fb.remove()),nav.append(undo.addClass("button")),body.append(nav),Y.on("click",closeMenu,["#cancel","#new_deal","#restart"]),Solitaire.Application.GameChooser.draggable=!1,Y.one("#game-chooser .titlebar").append(document.createTextNode("Games")),Y.one("#game-chooser .close").append(document.createTextNode("Back")),Y.delegate("touchstart",function(e){e.target.ancestor("li",!0).addClass("hover")},"#descriptions","li"),Y.delegate("touchend",function(e){e.target.ancestor("li",!0).removeClass("hover")},"#descriptions","li"),Y.on("gamechooser:select",function(chooser){chooser.choose(),closeMenu()}),Y.on("gamechooser:hide",function(){scrollToTop()}),navigator.standalone&&body.addClass("fullscreen"),Solitaire.Application.resizeEvent="orientationchange"})}function fieldLayout(game,field,layout){Y.mix(game[field].stackConfig.layout,layout,!0)}function originalLayout(game,fields){var layouts;return layouts=Y.Array.map(Y.Array(fields),function(field){return[field,Y.merge(BARE_LAYOUT,Solitaire[game][field].stackConfig.layout)]}),function(){var that=this;Y.each(layouts,function(layout){Y.mix(that[layout[0]].stackConfig.layout,layout[1],!0)})}}function optionWithOrientation(option){var orientation=480===window.innerWidth?LANDSCAPE:PORTRAIT;return option.length?option[orientation]||option[LANDSCAPE]:option}function getOption(name){var game=Solitaire.name(),options=OPTIONS[game],dfault=DEFAULTS[name],option=options?options[name]:dfault;return optionWithOrientation(option||dfault)||dfault}function setLayout(){Solitaire.name();var landscape=480===window.innerWidth,msh=getOption("maxStackHeight");!function(landscape){var from,to,body=Y.one("body");landscape?(from="portrait",to="landscape"):(from="landscape",to="portrait"),body.removeClass(from).addClass(to)}(landscape),function(){var game=Solitaire.name();gameOverrides.hasOwnProperty(game)&&optionWithOrientation(gameOverrides[game]).call(Solitaire.game)}(),Solitaire.offset={left:getOption("offset"),top:10},Solitaire.maxStackHeight=function(){return msh},_scale.call(Solitaire.game,getOption("scale"))}function scrollToTop(){setTimeout(function(){scrollTo(0,0)},10)}},"0.0.1",{requires:["solitaire","statistics"]}),{solitaire_ios:!0}}),YUI.add("klondike",function(Y){const Solitaire=Y.Solitaire,Klondike=Y.Solitaire.Klondike=Solitaire.instance(Solitaire,{fields:["Foundation","Deck","Waste","Tableau"],deal:function(){let card,piles=6,stack=0;const deck=this.deck,stacks=this.tableau.stacks;for(;piles>=0;){for(card=deck.pop().faceUp(),stacks[6-piles].push(card),stack=7-piles;stack<7;stack++)card=deck.pop(),stacks[stack].push(card);piles--}deck.createStack()},turnOver:function(){const deck=this.deck.stacks[0],waste=this.waste.stacks[0],updatePosition=Klondike.Card.updatePosition;Klondike.Card.updatePosition=Solitaire.noop;for(let i=deck.cards.length,stop=i-3;i>stop&&i;--i)deck.my_Last().faceUp().moveTo(waste);Klondike.Card.updatePosition=updatePosition,waste.eachCard(function(c){c.updatePosition()})},redeal:function(){const deck=this.deck.stacks[0],waste=this.waste.stacks[0];for(;waste.cards.length;)waste.my_Last().faceDown().moveTo(deck)},Stack:Solitaire.instance(Solitaire.Stack),Foundation:{stackConfig:{total:4,layout:{hspacing:1.25,top:0,left:function(){return 3.75*Solitaire.Card.width}}},field:"foundation"},Deck:Solitaire.instance(Solitaire.Deck,{stackConfig:{total:1,layout:{hspacing:0,top:0,left:0}},field:"deck"}),Waste:{stackConfig:{total:1,layout:{hspacing:0,top:0,left:function(){return 1.5*Solitaire.Card.width}}},field:"waste"},Tableau:{stackConfig:{total:7,layout:{hspacing:1.25,top:function(){return 1.5*Solitaire.Card.height},left:0}},field:"tableau"},Card:Solitaire.instance(Solitaire.Card,{playable:function(){switch(this.stack.field){case"tableau":return!this.isFaceDown;case"foundation":return!1;case"waste":return this.isFree();case"deck":return!0}},validFoundationTarget:function(target){return target?target.suit===this.suit&&target.rank===this.rank-1:1===this.rank},validTarget:function(stack){const target=stack.my_Last();switch(stack.field){case"tableau":return target?!target.isFaceDown&&target.color!==this.color&&target.rank===this.rank+1:13===this.rank;case"foundation":return this.validFoundationTarget(target);default:return!1}}})});Y.Array.each(Klondike.fields,function(field){Klondike[field].Stack=Solitaire.instance(Klondike.Stack)}),Y.mix(Klondike.Stack,{validTarget:function(stack){return"tableau"===stack.field&&this.first().validTarget(stack)}},!0),Y.mix(Klondike.Tableau.Stack,{setCardPosition:function(card){return this.lastCardSetCardPosition(card)}},!0),Y.mix(Klondike.Waste.Stack,{setCardPosition:function(card){const cards=this.cards,last=_.last(cards),stack=this;Y.Array.each(cards.slice(-2),function(card,i){card.left=stack.left,card.top=stack.top}),cards.length||(card.left=stack.left),1===cards.length?card.left=stack.left+.2*card.width:cards.length>1&&(last.left=stack.left+.2*card.width,last.top=stack.top,card.left=stack.left+.4*card.width),card.top=stack.top}},!0),Y.mix(Klondike.Deck.Stack,{createNode:function(){Solitaire.Stack.createNode.call(this),this.node.on("click",Solitaire.Events.clickEmptyDeck),this.node.addClass("playable")}},!0)},"0.0.1",{requires:["solitaire"]}),YUI.add("klondike1t",function(Y){const Solitaire=Y.Solitaire,Klondike=Solitaire.Klondike;Solitaire.Klondike1T=Solitaire.instance(Klondike,{redeal:Solitaire.noop,turnOver:function(){const deck=this.deck.stacks[0],waste=this.waste.stacks[0],card=deck.my_Last();card&&card.faceUp().moveTo(waste)},Waste:Solitaire.instance(Klondike.Waste,{Stack:Solitaire.instance(Solitaire.Stack)}),Deck:Solitaire.instance(Klondike.Deck,{Stack:Solitaire.instance(Klondike.Deck.Stack,{createNode:function(){Klondike.Deck.Stack.createNode.call(this),this.node.removeClass("playable")}})})})},"0.0.1",{requires:["klondike"]}),YUI.add("monte-carlo",function(Y){const Solitaire=Y.Solitaire,MonteCarlo=Y.Solitaire.MonteCarlo=Solitaire.instance(Solitaire,{fields:["Foundation","Deck","Tableau"],createEvents:function(){Solitaire.createEvents.call(this),Y.delegate("click",Solitaire.Events.clickEmptyDeck,Solitaire.selector,".stack"),Y.on("solitaire|endTurn",this.deckPlayable),Y.on("solitaire|afterSetup",this.deckPlayable)},deckPlayable:function(){let gap=!1;const node=Solitaire.getGame().deck.stacks[0].node;Solitaire.getGame().eachStack(function(s){gap||-1===Y.Array.indexOf(s.cards,null)||(gap=!0)},"tableau"),gap?node.addClass("playable"):node.removeClass("playable")},deal:function(){const deck=this.deck,stacks=this.tableau.stacks;for(let stack=0;stack<5;stack++)for(let i=0;i<5;i++){const card=deck.pop().faceUp();stacks[stack].push(card)}deck.createStack()},redeal:function(){const stacks=this.tableau.stacks,deck=this.deck.stacks[0],cards=Y.Array.reduce(stacks,[],function(compact,stack){return compact.concat(stack.compact())}),len=cards.length;let card,s,i;for(Y.Array.each(stacks,function(stack){stack.node.remove(),stack.cards=[],stack.createNode()}),i=s=0;i<len;i++)!i||i%5||s++,stacks[s].push(cards[i]);for(;i<25&&deck.cards.length;)i%5||s++,(card=deck.my_Last().faceUp()).moveTo(stacks[s]),card.node.setStyle("zIndex",100-i),i++},height:function(){return 6*this.Card.base.height},Stack:Solitaire.instance(Solitaire.Stack,{images:{deck:"freeslot.png"},updateDragGroups:function(){const active=Solitaire.activeCard;Y.Array.each(this.cards,function(c){c&&(active.validTarget(c)?c.node.drop.addToGroup("open"):c.node.drop.removeFromGroup("open"))})},index:function(){return 0}}),Events:Solitaire.instance(Solitaire.Events,{drop:function(e){const active=Solitaire.activeCard,foundation=Solitaire.game.foundation.stacks[0],target=e.drop.get("node").getData("target");active&&(Solitaire.stationary(function(){target.moveTo(foundation),active.moveTo(foundation)}),Solitaire.endTurn())}}),Foundation:{stackConfig:{total:1,layout:{spacing:0,top:0,left:function(){return 10.5*Solitaire.Card.width}}},field:"foundation"},Deck:Solitaire.instance(Solitaire.Deck,{stackConfig:{total:1,layout:{spacing:0,top:0,left:function(){return 2*Solitaire.Card.width}}},field:"deck",createStack:function(){for(let i=0,len=this.cards.length;i<len;i++)this.stacks[0].push(this.cards[i])}}),Tableau:{stackConfig:{total:5,layout:{cardGap:1.25,vspacing:1.25,hspacing:0,top:0,left:function(){return 3.5*Solitaire.Card.width}}},field:"tableau"},Card:Solitaire.instance(Solitaire.Card,{row:function(){return this.stack.index()},column:function(){return this.stack.cards.indexOf(this)},validTarget:function(card){return!(this.rank!==card.rank||!card.isFree())&&(Math.abs(card.row()-this.row())<=1&&Math.abs(card.column()-this.column())<=1)},createProxyStack:function(){let stack=null;return this.isFree()&&((stack=Solitaire.instance(this.stack)).cards=this.proxyCards()),this.proxyStack=stack,this.proxyStack},proxyCards:function(){return[this]},isFree:function(){return"tableau"===this.stack.field},turnOver:function(){"deck"===this.stack.field&&Solitaire.game.redeal()}})});Y.Array.each(MonteCarlo.fields,function(field){MonteCarlo[field].Stack=Solitaire.instance(MonteCarlo.Stack)}),Y.mix(MonteCarlo.Tableau.Stack,{deleteItem:function(card){const cards=this.cards,i=cards.indexOf(card);-1!==i&&(cards[i]=null)},setCardPosition:function(card){const last=_.last(this.cards),layout=MonteCarlo.Tableau.stackConfig.layout,top=this.top,left=last?last.left+card.width*layout.cardGap:this.left;card.left=left,card.top=top},compact:function(){const cards=this.cards,compact=[];for(let i=0,len=cards.length;i<len;i++){const card=cards[i];card&&(compact.push(card),card.pushPosition())}return compact},index:function(){return Solitaire.game.tableau.stacks.indexOf(this)}},!0),Y.mix(MonteCarlo.Deck.Stack,{updateDragGroups:function(){const active=Solitaire.activeCard,card=this.my_Last();card&&(active.validTarget(card)?card.node.drop.addToGroup("open"):card.node.drop.removeFromGroup("open"))}},!0)},"0.0.1",{requires:["solitaire","array-extras"]}),YUI.add("pyramid",function(Y){const Solitaire=Y.Solitaire,Pyramid=Y.Solitaire.Pyramid=Solitaire.instance(Solitaire,{fields:["Foundation","Deck","Waste","Tableau"],deal:function(){const deck=this.deck,stacks=this.tableau.stacks;for(let stack=0;stack<7;stack++)for(let i=0;i<=stack;i++){const card=deck.pop().faceUp();stacks[stack].push(card)}deck.createStack(),deck.my_Last().faceUp()},turnOver:function(){const deck=this.deck.stacks[0],waste=this.waste.stacks[0];1!==deck.cards.length&&deck.my_Last().moveTo(waste)},height:function(){return 4.85*this.Card.base.height},Stack:Solitaire.instance(Solitaire.Stack,{images:{},updateDragGroups:function(){const active=Solitaire.activeCard;Y.Array.each(this.cards,function(c){c&&(active.validTarget(c)?c.node.drop.addToGroup("open"):c.node.drop.removeFromGroup("open"))})}}),Events:Solitaire.instance(Solitaire.Events,{dragCheck:function(e){Solitaire.game.autoPlay.call(this)||Solitaire.Events.dragCheck.call(this)},drop:function(e){const active=Solitaire.activeCard,foundation=Solitaire.game.foundation.stacks[0],target=e.drop.get("node").getData("target");active&&(Solitaire.stationary(function(){target.moveTo(foundation),active.moveTo(foundation)}),Solitaire.endTurn())}}),Foundation:{stackConfig:{total:1,layout:{hspacing:0,top:0,left:function(){return 8*Solitaire.Card.width}}},field:"foundation"},Deck:Solitaire.instance(Solitaire.Deck,{stackConfig:{total:1,layout:{hspacing:0,top:0,left:0}},field:"deck",createStack:function(){for(let i=0,len=this.cards.length;i<len;i++)this.stacks[0].push(this.cards[i])}}),Waste:{stackConfig:{total:1,layout:{hspacing:0,top:0,left:function(){return 1.5*Solitaire.Card.width}}},field:"waste"},Tableau:{stackConfig:{total:7,layout:{vspacing:.6,hspacing:-.625,cardGap:1.25,top:0,left:function(){return 5*Solitaire.Card.width}}},field:"tableau"},Card:Solitaire.instance(Solitaire.Card,{validTarget:function(card){return"foundation"===card.field?this.isFree()&&13===this.rank:!!card.isFree()&&this.rank+card.rank===13},createProxyNode:function(){return 13===this.rank?"":Solitaire.Card.createProxyNode.call(this)},createProxyStack:function(){let stack=null;return this.isFree()&&((stack=Solitaire.instance(this.stack)).cards=this.proxyCards()),this.proxyStack=stack,this.proxyStack},proxyCards:function(){return[this]},isFree:function(){const stack=this.stack,index=(stack.index(),stack.cards.indexOf(this)),next=(Solitaire.game,stack.next());return"deck"===stack.field||"waste"===stack.field?!this.isFaceDown:!("foundation"===this.stack.field||next&&(next.cards[index]||next.cards[index+1]))},turnOver:function(){"deck"===this.stack.field&&!this.isFaceDown&&Solitaire.game.turnOver()}})});Y.Array.each(Pyramid.fields,function(field){Pyramid[field].Stack=Solitaire.instance(Pyramid.Stack)}),Y.mix(Pyramid.Tableau.Stack,{deleteItem:function(card){const cards=this.cards,i=cards.indexOf(card);-1!==i&&(cards[i]=null)},setCardPosition:function(card){const layout=Pyramid.Tableau.stackConfig.layout,last=_.last(this.cards),top=this.top,left=last?last.left+card.width*layout.cardGap:this.left;card.left=left,card.top=top,card.zIndex=10*this.index()}},!0),Y.mix(Pyramid.Deck.Stack,{deleteItem:function(card){Pyramid.Stack.deleteItem.call(this,card),this.update()},update:function(undo){const last=this.my_Last();last&&last.faceUp(undo)},updateDragGroups:function(){const active=Solitaire.activeCard,card=this.my_Last();card&&(active.validTarget(card)?card.node.drop.addToGroup("open"):card.node.drop.removeFromGroup("open"))}},!0),Pyramid.Waste.Stack.updateDragGroups=Pyramid.Deck.Stack.updateDragGroups},"0.0.1",{requires:["solitaire"]}),YUI.add("russian-solitaire",function(Y){const Solitaire=Y.Solitaire,Yukon=Solitaire.Yukon;(Solitaire.RussianSolitaire=Solitaire.instance(Yukon,{Card:Solitaire.instance(Yukon.Card)})).Card.validTarget=function(stack){const target=stack.my_Last();switch(stack.field){case"tableau":return target?!target.isFaceDown&&target.suit===this.suit&&target.rank===this.rank+1:13===this.rank;case"foundation":return target?target.suit===this.suit&&target.rank===this.rank-1:1===this.rank;default:return!1}}},"0.0.1",{requires:["yukon"]}),YUI.add("scorpion",function(Y){const Solitaire=Y.Solitaire,Scorpion=Solitaire.Scorpion=Solitaire.instance(Solitaire,{fields:["Foundation","Deck","Tableau"],createEvents:function(){Solitaire.AutoStackClear.register(),Solitaire.createEvents.call(this)},deal:function(){const deck=this.deck,stacks=this.tableau.stacks;for(let row=0;row<7;row++)for(let stack=0;stack<7;stack++){const card=deck.pop();row<3&&stack<4||card.faceUp(),stacks[stack].push(card)}deck.createStack()},turnOver:function(){const deck=this.deck.stacks[0],stacks=this.tableau.stacks;for(let i=0;i<3;i++)deck.my_Last().faceUp().moveTo(stacks[i])},height:function(){return 5.6*this.Card.base.height},Stack:Solitaire.instance(Solitaire.Stack),Deck:Solitaire.instance(Solitaire.Deck,{stackConfig:{total:1,layout:{top:0,left:function(){return 9*Solitaire.Card.width}}},field:"deck",createStack:function(){for(let i=this.cards.length-1;i>=0;i--)this.stacks[0].push(this.cards[i])}}),Foundation:{stackConfig:{total:4,layout:{top:function(){return 1.1*Solitaire.Card.height},left:function(){return 9*Solitaire.Card.width},vspacing:1.1}},field:"foundation"},Tableau:{stackConfig:{total:7,layout:{hspacing:1.25,top:0,left:0}},field:"tableau"},Card:Solitaire.instance(Solitaire.Card,{playable:function(){const field=this.stack.field;return"deck"===field||"tableau"===field&&!this.isFaceDown},validTarget:function(stack){const target=stack.my_Last();return"tableau"===stack.field&&(target?!target.isFaceDown&&target.suit===this.suit&&target.rank===this.rank+1:13===this.rank)}})});Y.Array.each(Scorpion.fields,function(field){Scorpion[field].Stack=Solitaire.instance(Scorpion.Stack)}),Y.mix(Scorpion.Stack,{validTarget:function(stack){return"tableau"===stack.field&&this.first().validTarget(stack)},validProxy:function(card){return!0},validTarget:function(stack){const cards=this.cards;switch(stack.field){case"tableau":return this.first().validTarget(stack);case"foundation":const rank=this.last.rank;if(13!==cards.length)return!1;for(let i=0;i<13;i++)if(cards[i].rank!==rank)return!1;return!0}}},!0),Y.mix(Scorpion.Tableau.Stack,{setCardPosition:function(card){return this.lastCardSetCardPosition(card)}},!0)},"0.0.1",{requires:["auto-stack-clear"]}),define([],function(){let enable_solitairey_ui=!1;const pre_canned_seeds=[];function my_Flatten(arr){const result=[],proto=Array.prototype,len=arr.length;for(let i=0;i<len;i++){const item=arr[i];"[object Array]"===Object.prototype.toString.call(item)?proto.push.apply(result,my_Flatten(item)):result.push(item)}return result}function _deleteItem(arr,item){const i=arr.indexOf(item);-1!==i&&arr.splice(i,1)}function instance(proto,attrs){const maker=new Function;maker.prototype=proto;const o=new maker;if("object"==typeof attrs)for(const p in attrs)attrs.hasOwnProperty(p)&&(o[p]=attrs[p]);return o}function normalize(valOrFunction){const val="function"==typeof valOrFunction?valOrFunction():valOrFunction;return isNaN(val)?void 0:val}let Game;function getGame(){return Game}return mapAppend=function(that,str){for(const p in that)that.hasOwnProperty(p)&&(that[p]+=str);return that},YUI.add("solitaire",function(Y){const Solitaire=Y.namespace("Solitaire");function CardDelegate(cfg){CardDelegate.superclass.constructor.call(this,cfg)}Y.extend(CardDelegate,Y.DD.Delegate,{getCard:function(){return this.get("currentNode").getData("target")}}),Y.mix(Solitaire,{activeCard:null,getGame:getGame,instance:instance,moves:null,selector:".solitairey_body",offset:{left:50,top:70},padding:{x:50,y:50},widthScale:0,noop:function(){},name:function(){for(const p in Solitaire)if(Solitaire.hasOwnProperty(p)&&Solitaire[p]===Game)return p},container:function(){return Y.one(Solitaire.selector)},width:function(){return this.Card.base.width*this.widthScale},height:function(){return 4.2*this.Card.base.height},maxStackHeight:function(){return Solitaire.Application.windowHeight-normalize(this.Tableau.stackConfig.layout.top)-Solitaire.offset.top},undo:function(){Y.fire("undo")},pushMove:function(move){const moves=Solitaire.moves;moves&&moves.push(move)},serialize:function(){const that=this,serialized=[],lengths=[];return Y.Array.each(this.fields,function(field){const stacks=that[field.toLowerCase()].stacks;for(let i=0,len=stacks.length;i<len;i++){const data=stacks[i].serialize();serialized.push(data),lengths.push(String.fromCharCode(data.length))}},this),[String.fromCharCode(serialized.length)].concat(lengths,serialized).join("")},stationary:function(callback){const updatePosition=Game.Card.updatePosition;Game.Card.updatePosition=Solitaire.noop,callback.call(this),Game.Card.updatePosition=updatePosition},unanimated:function(callback){const anim=Y.Solitaire.Animation,animate=anim.animate;anim.animate=!1,callback.call(this),anim.animate=animate},unserialize:function(serialized){const that=this;that.unanimated(function(){const numStacks=serialized.charCodeAt(0),lengths=serialized.substr(1,numStacks),fields=that.fields;let data,stackIndex,stack,i,length,offset=numStacks+1,stacks=[],fieldIndex=-1;for(i=0,stackIndex=0;i<numStacks;i++,stackIndex++,offset+=length)length=lengths.charCodeAt(i),data=serialized.substr(offset,length),stackIndex===stacks.length&&(stacks=that[fields[++fieldIndex].toLowerCase()].stacks,stackIndex=0),(stack=stacks[stackIndex]).unserialize(data),stack.updateCardsPosition()})},save:function(name){const data=this.serialize();Y.Cookie.set(name||"saved-game",data,{expires:new Date((new Date).getTime()+12069e5)})},loadGame:function(data){const that=this;that.unanimated(function(){that.setup(function(){that.unserialize(data)})}),Y.fire("loadGame")},newGame:function(){Y.Cookie.remove("saved-game");const that=this;enable_solitairey_ui?that.setup(that.deal):that.setup(function(){let card,stack=0;const stacks=that.tableau.stacks;for(;card=that.deck.pop();)stacks[stack].push(card.faceUp()),8==++stack&&(stack=0)}),Game.save("initial-game"),Y.fire("newGame")},cleanup:function(){Y.Event.purgeElement(this.container()),Y.detach("solitaire|*"),this.eachStack(function(stack){stack.cleanup()})},setup:function(callback,args){Game=Solitaire.game=this,Y.fire("beforeSetup"),Solitaire.moves=null,Undo.clear(),this.stationary(function(){const seed=pre_canned_seeds.length?pre_canned_seeds.shift():Math.floor(1+2147483644*Math.random()),deal_num=Y.one("#deal_num_shlomify");deal_num&&deal_num.set("value",seed),Game.seed=seed,Game.init(seed),Y.Solitaire.Animation.initQueue(),Game.createStacks(),Game.createEvents(),args&&args.disableDragging||Game.createDraggables(),callback.call(Game)}),Solitaire.moves=[],Y.fire("afterSetup");const animate=Y.Solitaire.Animation.animate;Y.Solitaire.Animation.animate=!1,Y.Solitaire.Animation.dealing=!1,Game.eachStack(function(s){s.updateCardsStyle(),s.updateCardsPosition()}),Y.Solitaire.Animation.dealing=!1,Y.Solitaire.Animation.animate=animate,Y.fire("afterDealingAnimation")},createEvents:function(){Y.one(Solitaire.selector);Y.on("solitaire|endTurn",Game.Events.endTurn),Y.on("solitaire|undo",Game.Events.undo)},createDraggables:function(){const del=new CardDelegate({dragConfig:{dragMode:"intersect",groups:["open"],clickPixelThresh:0},container:Solitaire.selector,nodes:".card"});del.dd.plug(Y.Plugin.DDProxy,{borderStyle:"none",moveOnEnd:!1}),del.on("drag:drag",Game.Events.drag),del.on("drag:mouseDown",Game.Events.dragCheck),del.on("drag:start",Game.Events.dragStart),del.on("drag:dropmiss",Game.Events.dragMiss),del.on("drag:drophit",Game.Events.drop),del.on("drag:end",Game.Events.dragEnd)},createField:function(field){if(!field)return;const f=instance(field);let stackLayout,stack,stacks,i,len;if(field.stackConfig)for(stackLayout=field.stackConfig.layout,stacks=new Array(field.stackConfig.total),field.Stack.field=field.field,i=0,len=stacks.length;i<len;i++)(stack=instance(field.Stack)).configLayout=stackLayout,stack.layout(Y.merge(stackLayout,{hoffset:i*stackLayout.hspacing||0,voffset:i*stackLayout.vspacing||0}),i),stacks[i]=stack;return f.stacks=stacks,"function"==typeof f.init&&f.init(this.seed),f},createStacks:function(){this.eachStack(function(stack){stack.cards=[],stack.createNode()})},eachStack:function(callback,fieldName){Game&&Y.Array.each(Game.fields,function(name){const currentName=name.toLowerCase(),field=Game[currentName];(fieldName||currentName)===currentName&&field.stacks&&Y.Array.each(field.stacks,callback)})},resize:function(scale){const that=this;Y.fire("beforeResize"),that.scale(scale),that.unanimated(function(){that.eachStack(function(stack,i){const cards=stack.cards,layout=stack.configLayout;stack.adjustRankHeight(),stack.cards=[],stack.layout(Y.merge(layout,{hoffset:i*layout.hspacing||0,voffset:i*layout.vspacing||0}),i),stack.updateStyle(),stack.setCards(cards.length,function(i){const card=cards[i];return card&&card.updateStyle(),card}),stack.update()})}),Y.fire("afterResize")},scale:function(scale){const Card=Y.Solitaire.Card,base=Card.base;Card.scale=scale;for(const prop in base)base.hasOwnProperty(prop)&&(Card[prop]=base[prop]*scale)},init:function(){Solitaire.preventDefault;this.scale(1);const fields=Y.Array.map(Game.fields,function(field){return Game[field.toLowerCase()]=Game.createField(Game[field])});Game.fields.indexOf(!1)&&(Game.deck=Game.createField(Game.Deck));const vals=my_Flatten(Y.Array.map(fields,function(f){return Y.Array.map(f.stacks,function(s){return s.left})})),minX=Math.min.apply(Math,vals),maxX=Math.max.apply(Math,vals)+this.Card.width;this.widthScale=(maxX-minX)/this.Card.base.width},preventDefault:function(e){e.preventDefault()},autoPlay:function(){("function"==typeof this.getCard?this.getCard():this.getData("target")).autoPlay()},isWon:function(){const foundations=this.foundation.stacks,deck=this.deck;let i,len,placed=0;const total=13*deck.suits.length*deck.count;for(i=0,len=foundations.length;i<len;i++)placed+=foundations[i].cards.length;return placed===total},win:function(){Y.fire("win"),Y.Cookie.remove("saved-game")},endTurn:function(){Y.fire("endTurn")}}),Y.Solitaire.Events={clickEmptyDeck:function(){Game.redeal(),Solitaire.moves.reverse(),Solitaire.endTurn()},drag:function(){this.getCard().dragging=!0},dragCheck:function(){const card=this.getCard();card.createProxyStack()&&(Solitaire.activeCard=card,Game.eachStack(function(stack){stack.updateDragGroups()}))},dragStart:function(){const card=this.getCard(),node=this.get("dragNode"),proxy=card.createProxyNode();proxy&&(node.setContent(proxy),!card.proxyStack&&Y.one(".yui3-dd-shim").setStyle("cursor","not-allowed"))},dragMiss:function(){const card=this.getCard();Game.unanimated(function(){card.updatePosition()})},dragEnd:function(){const target=this.getCard(),root=Solitaire.container(),fragment=new Y.Node(document.createDocumentFragment()),dragXY=this.dd.realXY,containerXY=root.getXY(),proxyStack=target.proxyStack;target.dragging=!1;const node=this.get("dragNode").get("firstChild");if(node&&node.remove(),!proxyStack)return;const cards=proxyStack.cards,stack=target.stack;proxyStack.left=dragXY[0]-containerXY[0],proxyStack.top=dragXY[1]-containerXY[1],Game.unanimated(function(){proxyStack.updateCardsPosition()}),Y.Array.each(cards,function(card){card&&(card.proxyStack=null,fragment.append(card.node))}),root.append(fragment),stack.updateCardsPosition()},drop:function(e){if(!Solitaire.activeCard)return;const stack=Solitaire.activeCard.proxyStack;if(stack){const first=stack.first();let target=e.drop.get("node").getData("target");target=target.stack||target,(1===stack.cards.length&&first.validTarget(target)||stack.validTarget(target))&&target.pushStack(stack)}Solitaire.endTurn()},endTurn:function(){Solitaire.moves.length&&Undo.push(Solitaire.moves),Solitaire.moves=[],Solitaire.activeCard=null,Game.eachStack(function(s){s.updateCardsStyle()}),Game.isWon()?Game.win():Game.save()},undo:function(...rest){const args=function(args){return Array.prototype.slice.call(args)}(rest);args.unshift("endTurn"),Undo.undo(),Y.fire.apply(Y,args)}},Y.Solitaire.Deck={count:1,suits:["c","d","h","s"],init:function(seed){const suits=this.suits;let suit,s,rank,count;const Card=Game.Card;for(this.cards=[],count=0;count<this.count;count++)for(rank=1;rank<=13;rank++)for(s=0;suit=suits[s];s++)this.cards.push(Card.create(rank,suit).faceDown());void 0===seed?function(arr){let r,item,temp,i=arr.length;for(;--i;)r=~~(Math.random()*i),item=arr[i],temp=arr[r],arr[r]=item,arr[i]=temp}(this.cards):this.msSeededShuffle(seed)},msSeededShuffle:function(seed){const cards=this.cards,maxInt=Math.pow(2,31);let rand,temp,i;for(i=cards.length;i>1;--i)rand=(seed=(214013*seed%maxInt+2531011)%maxInt)>>16&32767,item=cards[i-1],temp=cards[rand%i],cards[i-1]=temp,cards[rand%i]=item},createStack:function(){for(let i=this.cards.length-1;i>=0;i--)this.stacks[0].push(this.cards[i])},my_Last:function(){return _.last(this.cards)},pop:function(){return this.cards.pop()}},Y.Solitaire.Card={zIndex:1,index:-1,width:null,height:null,rankHeight:null,hiddenRankHeight:null,isFaceDown:!1,positioned:!1,scale:1,stack:null,proxyStack:null,ghost:!0,dragging:!1,node:null,callback:null,left:0,top:0,base:{},origin:{left:function(){return-Solitaire.container().getXY()[0]-Y.Solitaire.Card.width},top:function(){return-Solitaire.container().getXY()[1]-Y.Solitaire.Card.height}},animSpeeds:{slow:.5,mid:.2,fast:.1},create:function(rank,suit){return instance(this,{rank:rank,suit:suit,color:{c:0,s:0,h:1,d:1}[suit]})},truncatePosition:function(){this.left=Math.floor(this.left),this.top=Math.floor(this.top)},faceDown:function(undo){return this.isFaceDown=!0,this.setRankHeight(),this.setImageSrc(),undo||Solitaire.pushMove({card:this,faceDown:!0}),this},faceUp:function(undo){return this.isFaceDown=!1,this.setRankHeight(),this.setImageSrc(),undo||Solitaire.pushMove({card:this,faceDown:!1}),this},setRankHeight:function(){const stack=this.stack;let rh,hh;stack&&stack.rankHeight?(rh=stack.rankHeight,hh=stack.hiddenRankHeight):(rh=Solitaire.Card.rankHeight,hh=Solitaire.Card.hiddenRankHeight),this.rankHeight=this.isFaceDown?hh:rh},imageSrc:function(){let src=this.base.theme+"/";return src+=this.isFaceDown?"facedown":this.suit+this.rank,src+=".png"},setImageSrc:function(){const n=this.node;n&&n.setAttribute("src",this.imageSrc())},wrapperStyle:function(){return{left:this.left,top:this.top,width:Math.floor(this.width),height:Math.floor(this.height)}},updateStyle:function(){const n=this.node;n&&n.setStyles(this.wrapperStyle()),this.setRankHeight()},turnOver:function(e){if(!this.isFaceDown)return;"deck"===this.stack.field?Game.turnOver():this.isFree()&&this.faceUp(),e.stopPropagation()},autoPlay:function(){const origin=this.stack;origin.my_Last();let foundation,i,len;if(this.isFaceDown||"foundation"===origin.field)return;const stacks=Game.foundation.stacks;for(i=0,len=stacks.length;i<len;i++)if(foundation=stacks[i],this.isFree()&&this.validTarget(foundation))return this.moveTo(foundation),origin.updateCardsPosition(),origin.update(),Solitaire.endTurn(),!0;return!1},ensureDOM:function(){!this.node&&this.createNode()},isFree:function(){return this===this.stack.my_Last()},playable:function(){return"deck"===this.stack.field||this.isFree()&&"foundation"!==this.stack.field},createNode:function(){const node=this.node=Y.Node.create("<img class='card' />").setData("target",this).setAttribute("src",this.imageSrc()).plug(Y.Plugin.Drop,{useShim:!1});node.setStyles({left:-this.width,top:-this.height}),this.setRankHeight(),Solitaire.container().append(node)},destroyNode:function(){const n=this.node;n&&n.clearData().destroy(!0)},createProxyStack:function(){if(this.isFaceDown||"foundation"===this.stack.field)return this.proxyStack=null,null;const stack=instance(this.stack,{proxy:!0,stack:this.stack}),cards=stack.cards;let i,len;for(stack.cards=[],stack.push(this,!0),i=cards.indexOf(this)+1,len=cards.length;i<len;i++){const card=cards[i];if(!stack.validProxy(card))break;stack.push(card,!0)}return this.proxyStack=i===len?stack:null,this.proxyStack},proxyCards:function(){return this.proxyStack.cards},createProxyNode:function(){const node=Y.Node.create("<div></div>"),stack=this.proxyStack;if(stack)node.setStyles({opacity:1,top:-this.top,left:-this.left}),Y.Array.each(this.proxyCards(),function(c){c.proxyStack=stack,node.append(c.node)});else{if(!this.ghost)return null;node.setStyles({opacity:.6,top:-this.top,left:-this.left}).append(this.node.cloneNode(!0))}return node},updatePosition:function(fields){if(!this.node)return;const to={left:this.left+"px",top:this.top+"px",zIndex:this.zIndex},origin=this.origin;this.positioned||this.node.setStyles({left:normalize(origin.left),top:normalize(origin.top)}),Y.Solitaire.Animation.init(this,to,fields)},pushPosition:function(){const index=this.index>=0?this.index:this.stack.cards.indexOf(this);Solitaire.pushMove({card:this,index:index,from:this.stack})},moveTo:function(stack){const origin=this.stack;return this.pushPosition(),origin.deleteItem(this),stack.push(this),Y.fire(origin.field+":afterPop",origin),this},after:function(callback){this.callback=callback},runCallback:function(){this.callback&&(this.callback.call(this),this.callback=null)}},Y.Solitaire.Stack={cards:null,node:null,images:{tableau:"freeslot.png",deck:"freeslot.png",reserve:"freeslot.png",foundation:"freeslot.png"},serialize:function(){let i,len,card,bite;const cards=this.cards,serialized=[],suits=Game.deck.suits;for(i=0,len=cards.length;i<len;i++)bite=(card=cards[i])?suits.indexOf(card.suit)|card.rank<<2|card.isFaceDown<<6:128,serialized.push(String.fromCharCode(bite));return serialized.join("")},eachCard:function(callback){let i,len;const cards=this.cards;for(i=0,len=cards.length;i<len;i++)if(cards[i]&&!1===callback.call(this,cards[i],i))return!1;return!0},setCards:function(count,cardGen){let i,card;const empty=instance(Game.Card,{updatePosition:Solitaire.noop,ensureDOM:Solitaire.noop}),cards=this.cards=[];for(i=0;i<count;i++)card=cardGen.call(this,i)||empty,this.push(card);for(i=0;i<count;i++)cards[i]===empty&&(cards[i]=null)},updateCardsPosition:function(){const cards=this.cards;Game.stationary(function(){const that=this;this.proxy||this.adjustRankHeight(),this.setCards(cards.length,function(i){const card=cards[i];return card&&(card.stack=that,card.setRankHeight()),card})}.bind(this)),this.eachCard(function(c){c.updatePosition()})},updateCardsStyle:function(){"foundation"===this.field||this.eachCard(function(c){c.playable()?c.node.addClass("playable"):c.node.removeClass("playable")})},unserialize:function(serialized){const deck=Game.deck,Card=Game.Card;this.setCards(serialized.length,function(i){let card;const value=serialized.charCodeAt(i);return 128===value?card=null:(card=Card.create(value>>2&15,deck.suits[3&value]),64&value?card.faceDown(!0):card.faceUp(!0)),card}),this.update()},imageSrc:function(){const basename=this.images[this.field];return basename?Solitaire.Card.base.theme+"/"+basename:"trans.gif"},layout:function(layout){const hoffset=layout.hoffset*Y.Solitaire.Card.width,voffset=layout.voffset*Y.Solitaire.Card.height,gameOffset=Solitaire.offset,self=this;Y.Array.each(["top","left"],function(p){self[p]=normalize(layout[p])}),this.left+=hoffset+gameOffset.left,this.top+=voffset+gameOffset.top},deleteItem:function(card){_deleteItem(this.cards,card)},push:function(card,temp){const last=this.my_Last(),to=this.field,from=card.stack?card.stack.field:"deck";last?card.zIndex=last.zIndex+1:"deck"===to||"foundation"===to?card.zIndex=200:"deck"===from&&(card.zIndex=Game.Card.zIndex),temp||(card.stack=this,this.setCardPosition(card),card.truncatePosition(),card.ensureDOM()),this.cards.push(card),temp||card.updatePosition({from:from,to:to})},pushStack:function(proxy){const origin=Solitaire.activeCard.stack,stack=this;origin.eachCard(function(card,i){card.index=i}),Game.stationary(function(){proxy.eachCard(function(card){card.moveTo(stack),card.index=-1}),origin.eachCard(function(card){card.index=-1})}),origin.updateCardsPosition(),origin.update(),Y.fire(stack.field+":afterPush",stack)},adjustRankHeight:function(){const cards=this.cards,last=this.my_Last(),max=Game.maxStackHeight();let sumRankHeights,i,len,sumHidden=0,sumVisible=0,height=0,countHidden=0,countVisible=0;const Card=Solitaire.Card;if(cards.length<=1)return;for(i=0,len=cards.length-1;i<len;i++){if(!cards[i])return;cards[i].isFaceDown?(sumHidden+=Card.hiddenRankHeight,countHidden++,height+=Card.hiddenRankHeight):(sumVisible+=Card.rankHeight,countVisible++,height+=Card.rankHeight)}if(last&&(height+=last.height,sumRankHeights=max-last.height),height<=max)return this.rankHeight=0,void(this.hiddenRankHeight=0);const rhHidden=sumRankHeights*(sumHidden/(sumHidden+sumVisible))/countHidden,rhVisible=sumRankHeights*(sumVisible/(sumHidden+sumVisible))/countVisible;this.hiddenRankHeight=Math.floor(rhHidden),this.rankHeight=Math.floor(rhVisible)},first:function(){return this.cards[0]},my_Last:function(){return _.last(this.cards)},index:function(){return Game[this.field].stacks.indexOf(this)},next:function(){return Game[this.field].stacks[this.index()+1]},lastCardSetCardPosition:function(card){const last=_.last(this.cards),top=last?last.top+last.rankHeight:this.top,left=this.left;card.left=left,card.top=top},setCardPosition:function(card){card.top=this.top,card.left=isNaN(this.left)?null:this.left},wrapperStyle:function(){return{left:Math.floor(this.left),top:Math.floor(this.top),width:Math.floor(Y.Solitaire.Card.width),height:Math.floor(Y.Solitaire.Card.height)}},updateStyle:function(){const n=this.node;n&&n.setStyles(this.wrapperStyle())},createNode:function(){const node=this.node=Y.Node.create("<img class='stack' />").setAttribute("src",this.imageSrc()).setData("target",this).plug(Y.Plugin.Drop,{useShim:!0});this.updateStyle(),Solitaire.container().append(node)},cleanup:function(){const n=this.node;n&&n.clearData().destroy(!0),this.eachCard(function(c){c.destroyNode()})},updateDragGroups:function(){const active=Solitaire.activeCard,last=this.my_Last();this.eachCard(function(c){c.node.drop.removeFromGroup("open")}),active.validTarget(this)?(last&&last.node.drop.addToGroup("open"),this.node.drop.addToGroup("open")):this.node.drop.removeFromGroup("open")},validCard:function(){return!0},validProxy:function(card){return card&&card.validTarget(this)&&this.validCard(card)},update:function(){}},Y.Solitaire.Animation={animate:!0,dealing:!1,duration:.5,interval:20,queue:new Y.AsyncQueue,init:function(card,to,fields){if(!this.animate)return card.node.setStyles(to),card.positioned=!0,void setTimeout(function(){card.runCallback()},0);const node=card.node,q=this.queue,speeds=card.animSpeeds,from=mapAppend(function(that){for(const p in that)that.hasOwnProperty(p)&&(that[p]=parseFloat(that[p]));return that}({top:node.getStyle("top"),left:node.getStyle("left")}),"px");let duration;const zIndex=to.zIndex;if(from.top===to.top&&from.left===to.left)return;duration=this.dealing?speeds.slow:fields&&fields.from!==fields.to&&"waste"!==fields.to&&"foundation"!==fields.to?"deck"===fields.from?speeds.slow:speeds.mid:speeds.fast,node.setStyle("zIndex",500+zIndex),delete to.zIndex;const anim=new Y.Anim({node:node,from:from,to:to,easing:Y.Easing.easeOut,duration:duration});anim.on("end",function(){card.positioned=!0,node.setStyle("zIndex",zIndex),card.runCallback()}),q.add(function(){anim.run()}),q.run()},initQueue:function(){this.queue.defaults.timeout=this.interval}};const Undo={stack:null,clear:function(){this.stack=[]},push:function(moves){this.stack.push(moves)},pop:function(){return this.stack.pop()||[]},undo:function(){const stacks=Y.Array.unique(my_Flatten(Y.Array.map(this.pop(),this.act)));Y.Array.each(stacks,function(stack){stack&&(stack.updateCardsPosition(),stack.update(!0))})},act:function(move){const from=move.from,card=move.card,to=card.stack,cards=to.cards;return from&&(from===card.stack?cards[cards.indexOf(card)]=null:_deleteItem(cards,card),from.cards[move.index]=card,card.stack=from,Solitaire.container().append(card.node)),"faceDown"in move&&(move.faceDown?card.faceUp(!0):card.faceDown(!0)),[to,from]}}},"0.0.1",{requires:["dd","dd-plugin","dd-delegate","anim","async-queue","cookie","array-extras"]}),{instance:instance,Game:Game,getGame:getGame,setUI:v=>{enable_solitairey_ui=v}}}),define(["./libfcs-wrap","./web-fc-solve","./solitaire","./flatted"],function(Module,w,solitaire,flatted){"use strict";const FC_Solve=w.FC_Solve,FCS_STATE_SUSPEND_PROCESS=w.FCS_STATE_SUSPEND_PROCESS,FCS_STATE_WAS_SOLVED=w.FCS_STATE_WAS_SOLVED;let getGame,_startSolution_cb;let _my_module,WITH_UI=!1;WITH_UI=!0;const MAX_MOD_COUNTER=5;let _my_mod_counter=MAX_MOD_COUNTER;const suitTable={s:0,h:1,c:2,d:3};function cardToValue(card){return card?card.rank<<2|suitTable[card.suit]:0}function withSelector(Y,selector,callback){const node=Y.one(selector);node&&callback(node)}function sortedStacks(Y,field){return Y.Array.map(field.stacks,function(s){return s}).sort(function(s1,s2){return cardToValue(s1.first())-cardToValue(s2.first())})}function to_int(s){return parseInt(s,10)}const _suits=["S","H","C","D"],_ranks=["A","2","3","4","5","6","7","8","9","T","J","Q","K"];function _rev(arr,delta){const ret={};for(let i=0;i<arr.length;++i)ret[arr[i]]=delta+i;return ret}const _ranks_rev=_rev(_ranks,1),_suits_rev=_rev(_suits,0);function _render_rank(c){return _ranks[(c>>2)-1]}function _render_suit(c){return _suits[3&c]}function _render_foundation(c){return 0==c?"":" "+_render_suit(c)+"-"+_render_rank(c)}function cardRank(val){return val>>2}function cardSuit(val){return["s","h","c","d"][3&val]}function _render_freecell(c){return 0==c?" -":" "+_render_rank(c)+_render_suit(c)}function _str_to_c(s){const m=s.match(/^(.)(.)$/);if(!m)throw"Should not happen";return _ranks_rev[m[1]]<<2|_suits_rev[m[2]]}function _get_stack_c(pre_s,src,card_idx){const arr=pre_s[src+2].replace(/ *$/,"").split(" "),src_c_s=arr[arr.length-card_idx];return":"==src_c_s?0:_str_to_c(src_c_s)}function _get_freecell_c(pre_s,idx){const fc_line=pre_s[1],pat=new RegExp("^Freecells:"+(0==idx?"":"(?:....){"+idx+"}")+"(....)",""),matched=fc_line.match(pat);if(matched){const c_s=matched[1].substring(2,4);return"  "==c_s?0:_str_to_c(c_s)}return 0}function _calc__move_content(pre_s,str){let matched=str.match(/^Move ([0-9]+) cards from stack ([0-9]+) to stack ([0-9]+)/);if(matched){const num_cards=to_int(matched[1]);return{source:["tableau",_get_stack_c(pre_s,to_int(matched[2]),num_cards)],dest:["tableau",_get_stack_c(pre_s,to_int(matched[3]),1)],num_cards:num_cards}}if(matched=str.match(/^Move a card from (stack|freecell) ([0-9]+) to the foundations/)){const src=to_int(matched[2]);let m_t,src_c;"stack"==matched[1]?(src_c=_get_stack_c(pre_s,src,1),m_t="tableau"):(src_c=_get_freecell_c(pre_s,src),m_t="reserve");const f_suit=3&src_c,f_rank=function(pre_s,f){const f_line=pre_s[0],pat=new RegExp(f+"-([0A2-9TJQK])",""),m=f_line.match(pat)[1];return"0"==m?0:_ranks_rev[m]}(pre_s,_suits[f_suit]);return{source:[m_t,src_c],dest:["foundation",0!=f_rank&&f_rank<<2|f_suit],num_cards:1}}if(matched=str.match(/^Move a card from stack ([0-9]+) to freecell ([0-9]+)/))return{source:["tableau",_get_stack_c(pre_s,to_int(matched[1]),1)],dest:["reserve",_get_freecell_c(pre_s,to_int(matched[2]))],num_cards:1};if(matched=str.match(/^Move a card from freecell ([0-9]+) to stack ([0-9]+)/))return{source:["reserve",_get_freecell_c(pre_s,to_int(matched[1]))],dest:["tableau",_get_stack_c(pre_s,to_int(matched[2]),1)],num_cards:1};throw"Must not happen - _calc__move_content() failed with <"+str+">"}function _calc_instance_from_state(state){let exceeded_iters=!1;const instance=new FC_Solve({cmd_line_preset:"video-editing",set_status_callback:function(status){"exceeded"==status&&(exceeded_iters=!0)}}),state_as_string=function(obj){let ret="";const reserve=obj.reserve;ret+="Foundations:"+obj.foundation.map(_render_foundation).join("")+"\n",ret+="Freecells:"+reserve.map(_render_freecell).join("")+"\n";for(let i=0;i<obj.tableau.length;++i){const stack=obj.tableau[i],l=stack[1],s=stack[0];ret+=":";for(let j=0;j<l;++j){const c=s[j];ret+=" "+_render_rank(c)+_render_suit(c)}ret+="\n"}return ret}(state);let solve_err_code;try{for(solve_err_code=instance.do_solve(state_as_string);solve_err_code===FCS_STATE_SUSPEND_PROCESS&&!exceeded_iters;)solve_err_code=instance.resume_solution()}catch(e){console.log("received exception "+e),_my_mod_counter=MAX_MOD_COUNTER+5}return solve_err_code===FCS_STATE_WAS_SOLVED?(instance.display_solution({displayer:new w.DisplayFilter({is_unicode_cards:!1,is_unicode_cards_chars:!1})}),instance):null}function _solve_cb(Y,that,instance,Animation,Status){const solution=instance?function(moves_){const ret_moves=[];for(let i=0;i<moves_.length;++i){const m=moves_[i];if("m"==m.type){const move_content=_calc__move_content(moves_[i-1].str.split("\n"),m.str),current={};current.source=move_content.source,current.num_cards=move_content.num_cards,current.dest=move_content.dest,ret_moves.push(current)}}return ret_moves}(instance._pre_expand_states_and_moves_seq):[];Animation.init(solution),function(){if(!Y.UA.chrome)return;const old=document.body.style.zoom;document.body.style.zoom="80%",setTimeout(function(){document.body.style.zoom=old},10)}(),that.solver_active=!1}return YUI.add("solver-freecell",function(Y){if(Y.namespace("Solitaire.Solver.Freecell"),!window.ArrayBuffer||!window.Uint8Array)return;const Solitaire=Y.Solitaire,FreecellSolver=Solitaire.Solver.Freecell;getGame=Solitaire.getGame;const redeal=Y.one("#redeal");redeal&&redeal.on("click",function(){Solitaire.Application.newGame(),getGame().redeal()});const Animation={interval:700,timer:null,remainingMovesIdx:null,remainingMovesArr:[],init:function(moves){this.remainingMovesArr=moves,this.remainingMovesIdx=0},pause:function(){window.clearTimeout(this.timer),this.timer=null,withSelector(Y,"#solver_bar .pause",function(node){node.removeClass("pause"),node.addClass("play")})},_playCurrentHelper:function(game){if(this.remainingMovesIdx>=this.remainingMovesArr.length)return;const move=function(game,move){const source=move.source,dest=move.dest,ret={top_card:!0};let value=source[1];const source_type=source[0];if(game.eachStack(function(stack){if(ret.card)return;const len=stack.cards.length;stack.eachCard(function(card,i){return!ret.card&&(!card||(card.rank===cardRank(value)&&card.suit===cardSuit(value)?(ret.card=card,"tableau"===source_type&&i!=len-1&&(ret.top_card=!1),!1):void 0))})},source_type),!ret.card)throw"Excalibur";if(value=dest[1],game.eachStack(function(stack){if(ret.stack)return;const card=stack.my_Last();card||value||(ret.stack=stack),card&&card.rank===cardRank(value)&&card.suit===cardSuit(value)&&(ret.stack=stack)},dest[0]),!ret.stack)throw"Must not happen - could not find dest stack for <"+value+">";return ret.num_cards=move.num_cards,ret}(game,this.remainingMovesArr[this.remainingMovesIdx]),card=move.card;if(!card)return;const origin=card.stack;if(move.top_card)card.moveTo(move.stack);else{Solitaire.activeCard=card,card.createProxyStack();const proxyStack=card.proxyStack;proxyStack.cards.length!==move.num_cards&&alert("Error !!! mismatch in num_cards"),Y.Array.each(proxyStack.cards,function(card){}),move.stack.pushStack(proxyStack),move.stack.updateCardsPosition(),origin.updateCardsPosition(),Solitaire.endTurn()}return!0},_resetGameFoo:function(){},playCurrent:function(game){const that=this;that._playCurrentHelper(game)||that._resetGameFoo()},prev:function(game){const that=this;that.remainingMovesIdx>0&&(Y.fire("undo",!0),--that.remainingMovesIdx)},next:function(game){const that=this,next_idx=this.remainingMovesIdx+1;Solitaire.Statistics.disable(),that.playCurrent(game),that.remainingMovesIdx=next_idx,that.remainingMovesIdx>=that.remainingMovesArr.length&&that._resetGameFoo(),Y.fire("endTurn",!0)},play:function(game){const that=this;that.remainingMovesIdx>=that.remainingMovesArr.length||that.remainingMovesIdx<0||(Solitaire.Autoplay.disable(),withSelector(Y,"#solver_bar .play",function(node){node.removeClass("play"),node.addClass("pause")}),that.next(game),that.remainingMovesIdx>=that.remainingMovesArr.length||that.remainingMovesIdx<0||(that.timer=window.setTimeout(function(){that.play(game)},that.interval)))}},Status={bar:null,indicator:null,indicatorTimer:null,indicatorInterval:750,delay:400,updateIndicator:function(ticks){const that=this,indicator=that.indicator;if(!indicator)return;ticks=(ticks||0)%4;let text="Solving";for(let i=0;i<ticks;++i)text+=".";indicator.set("text",text),that.indicatorTimer=window.setTimeout(function(){return that.updateIndicator(ticks+1)},that.indicatorInterval)},stopIndicator:function(solved){const indicator=this.indicator;window.clearTimeout(this.indicatorTimer),indicator&&(solved?(indicator.set("text","Solution found"),withSelector(Y,"#solver_bar .controls",function(node){node.removeClass("hidden")})):indicator.set("text","Unable to find solution"),this.indicatorTimer=null)},show:function(){if(Y.one("#solver_bar"))return;const bar=Y.Node.create('<nav id="solver_bar"></nav>'),indicator=Y.Node.create('<span class="indicator"></span>'),next=Y.Node.create("<div class='fastforward' title=\"Next move\"></div>"),prev=Y.Node.create("<div class='rewind' title=\"Previous move\"></div>"),playPause=Y.Node.create("<div class='play' title=\"Play/Pause\"></div>"),controls=Y.Node.create("<div class='controls'></div>");next.on("click",function(){Animation.pause(),Animation.next(getGame())}),prev.on("click",function(){Animation.pause(),Animation.prev(getGame())}),playPause.on("click",function(){const that=playPause;that.hasClass("play")?Animation.play(getGame()):that.hasClass("pause")&&Animation.pause()}),controls.append(prev),controls.append(playPause),controls.append(next),bar.append(indicator),bar.append(controls),Y.one(".solitairey_body").append(bar),this.indicator=indicator,this.bar=bar},hide:function(){0}};_startSolution_cb=function(args){return Y.Solitaire.Application.switchToGame("freecell"),Y.Solitaire.Application.clearDOM(),Y.Solitaire.Freecell.setup(()=>{function _from_card(card){return Y.Solitaire.Freecell.Card.create(card.getRank(),game.deck.suits[[2,0,1,3][card.getSuit()]]).faceUp()}const board=args.board,game=getGame(),tableau=game.tableau.stacks;board.columns.forEach((col,ci)=>{const column=col.col;tableau[ci].setCards(column.getLen(),function(i){return _from_card(column.getCard(i))})});const fc=board.freecells;game.reserve.stacks.forEach((stack,i)=>{const card=fc?fc.freecells.getCard(i):null;stack.setCards(card?1:0,function(_unused){return _from_card(card)})});const foundations=board.foundations;game.foundation.stacks.forEach(function(stack,suit){stack.setCards(foundations?1+foundations.foundations.getByIdx(0,[1,2,0,3][suit]):0,function(rank){return Y.Solitaire.Freecell.Card.create(rank,game.deck.suits[suit]).faceUp()})})},{disableDragging:!0}),_solve_cb(Y,FreecellSolver,args.instance,Animation)},Y.mix(FreecellSolver,{solver_active:!1,currentSolution:null,attached:!1,supportedGames:["Freecell"],isSupported:function(){return-1!==this.supportedGames.indexOf(getGame().name())},enable:function(){this.isSupported()&&this.createUI(),this.attachEvents()},disable:function(){Status.hide()},attachEvents:function(){const that=this;if(that.attached)return;const pause=Animation.pause.bind(Animation);Y.on("afterDealingAnimation",function(){that.isSupported()?(that.solver_active=!1,Animation.remainingMovesIdx=null,Animation.remainingMovesArr=[],that.solve()):that.disable()}),Y.on("autoPlay",function(){FreecellSolver.disable()}),Y.on("win",function(){}),document.documentElement.addEventListener("mousedown",function(e){e.target.className.match(/\bpause\b/)||pause()},!0),that.attached=!0},createUI:function(){Status.show()},stop:function(){},solve:function(){const that=this;if(that.solver_active)return;that.solver_active=!0,that.stop(),that.currentSolution=null;const state=function(Y,game){const tableau=Y.Array.map(sortedStacks(Y,game.tableau),function(s){const buffer=[];return s.eachCard(function(c,i){buffer[i]=cardToValue(c)}),[buffer,s.cards.length]}),reserve=[];Y.Array.forEach(sortedStacks(Y,game.reserve),function(s,i){reserve[i]=cardToValue(s.my_Last())});const foundation=[];return Y.Array.forEach(sortedStacks(Y,game.foundation),function(s,i){foundation[i]=cardToValue(s.my_Last())}),{reserve:reserve,foundation:foundation,tableau:tableau}}(Y,getGame());function _cb(){window.setTimeout(function(){return _solve_cb(Y,that,_calc_instance_from_state(state),Animation)},400)}var callback;_my_module?_cb():(callback=_cb,_my_mod_counter>=MAX_MOD_COUNTER?(_my_module=Module()({onRuntimeInitialized:()=>{w.FC_Solve_init_wrappers_with_module(_my_module),callback()}}),_my_mod_counter=0):++_my_mod_counter)}}),Y.on("beforeSetup",FreecellSolver.enable.bind(FreecellSolver))},"0.0.1",{requires:["solitaire"]}),{startSolution:function(args){return _startSolution_cb(args)}}}),importScripts("libfreecell-solver.min.js","web-fc-solve--expand-moves.js","web-fc-solve.js");let attempts=0;const maxFastAttempts=15e4;function GameState(obj){if(!obj)return;let i,stack;for(this.reserve=new Uint8Array(obj.reserve),this.foundation=new Uint8Array(obj.foundation),this.tableau=[],i=0;i<obj.tableau.length;i++)stack=obj.tableau[i],this.tableau[i]=[new Uint8Array(stack[0]),stack[1]]}function solve(state,depth,visited,movesSinceFoundation,fastSearch){let jumpDepth,sourceIndex,destIndex,length,val,next,sourceField,destField,move,i,scale=1,foundFoundation=!1;const moves=[];if(depth>200)return 200;if(state.solved())return state.becomeChild(),0;for(i=0;i<4;i++)if(val=state.reserve[i]){if((destIndex=state.validTarget("foundation",val))>-1&&(moves.push({source:["reserve",i],dest:["foundation",destIndex]}),foundFoundation=!0),foundFoundation)break;for(destIndex=0;(destIndex=state.validTarget("tableau",val,destIndex))>-1;)moves.push({source:["reserve",i],dest:["tableau",destIndex]})}const tableau=state.tableau;for(i=0;i<tableau.length;i++)if(s=tableau[i][0],length=tableau[i][1],val=s[length-1]){if((destIndex=state.validTarget("foundation",val))>-1&&(moves.push({source:["tableau",i],dest:["foundation",destIndex]}),foundFoundation=!0),foundFoundation)break;for((destIndex=state.validTarget("reserve",val))>-1&&moves.push({source:["tableau",i],dest:["reserve",destIndex]}),destIndex=0;(destIndex=state.validTarget("tableau",val,destIndex))>-1;)moves.push({source:["tableau",i],dest:["tableau",destIndex]})}for(foundFoundation?movesSinceFoundation=0:movesSinceFoundation++,i=0;i<moves.length;i++)move=moves[i],next=GameState.fromState(state),sourceField=move.source[0],sourceIndex=move.source[1],destField=move.dest[0],destIndex=move.dest[1],next.rating=next.rateMove(sourceField,sourceIndex,destField,destIndex),next.move(sourceField,sourceIndex,destField,destIndex),next.parentMove=move,next.parent=state,moves[i]=next;for(moves.sort(function(a,b){return b.rating-a.rating}),movesSinceFoundation>=20&&(scale=.7),fastSearch&&++attempts>maxFastAttempts&&(scale=.001),i=0;i<moves.length&&1===scale&&(move=moves[i],!(jumpDepth<depth));i++)if(visited[move.serialize()]){if(fastSearch)break}else visited[move.serialize()]=!0,jumpDepth=solve(move,depth+1,visited,movesSinceFoundation,fastSearch);return 0===jumpDepth&&state.becomeChild(),void 0===jumpDepth&&(jumpDepth=Math.ceil(depth*scale)),jumpDepth}function mapMoves(state){let current,child=state.child,moves=null;if(child){for(moves=current=child.parentMove;child=child.child;)current.next=child.parentMove,current=current.next;return moves}}function _render_state_as_string(obj){let ret="";function _render_suit(c){return["S","H","C","D"][3&c]}function _render_rank(c){return["A","2","3","4","5","6","7","8","9","T","J","Q","K"][(c>>2)-1]}const reserve=obj.reserve;ret+="Foundations:"+obj.foundation.map(function(c){return 0==c?"":" "+_render_suit(c)+"-"+_render_rank(c)}).join("")+"\n",ret+="Freecells:"+reserve.map(function(c){return 0==c?" -":" "+_render_rank(c)+_render_suit(c)}).join("")+"\n";for(let i=0;i<obj.tableau.length;i++){const stack=obj.tableau[i],l=stack[1],s=stack[0];ret+=":";for(let j=0;j<l;j++){const c=s[j];ret+=" "+_render_rank(c)+_render_suit(c)}ret+="\n"}return ret}function attemptSolution(obj,fastSearch){const state_as_string=_render_state_as_string(obj);attempts=0;const instance=new FC_Solve({cmd_line_preset:"ct",set_status_callback:function(){}});let solve_err_code=instance.do_solve(state_as_string);for(;solve_err_code==FCS_STATE_SUSPEND_PROCESS;)solve_err_code=instance.resume_solution();if(solve_err_code==FCS_STATE_WAS_SOLVED){instance.display_expanded_moves_solution({});const to_int=function(s){return parseInt(s,10)},moves_=instance._post_expand_states_and_moves_seq;let current={},pre_current=current;const ret_moves=current;for(let i=0;i<moves_.length;i++){const m=moves_[i];if("m"==m.type){const str=m.str,move_content=function(){let matched=str.match(/^Move 1 cards from stack ([0-9]+) to stack ([0-9]+)/);if(matched)return{source:["tableau",to_int(matched[1])],dest:["tableau",to_int(matched[2])]};if(matched=str.match(/^Move a card from (stack|freecell) ([0-9]+) to the foundations/))return{source:["stack"==matched[1]?"tableau":"reserve",to_int(matched[2])],dest:["foundation",1]};if(matched=str.match(/^Move a card from (stack|freecell) ([0-9]+) to (stack|freecell) ([0-9]+)/))return{source:["stack"==matched[1]?"tableau":"reserve",to_int(matched[2])],dest:["stack"==matched[3]?"tableau":"reserve",to_int(matched[4])]};throw"Must not happen"}();pre_current=current,current.source=move_content.source,current.dest=move_content.dest,current.next={},current=current.next}}return delete pre_current.next,ret_moves}}GameState.fromState=function(other){const state=new GameState;return state.tableau=other.tableau,state.reserve=other.reserve,state.foundation=other.foundation,state},GameState.prototype={reserve:null,foundation:null,tableau:null,rating:null,parentMove:null,parent:null,child:null,solved:function(){const foundation=this.foundation;for(let i=0,len=4;i<len;i++)if(foundation[i]>>2!=13)return!1;return!0},eachTableau:function(callback){const tableau=this.tableau;for(let i=0,len=tableau.length;i<len;i++){const stack=tableau[i];callback.call(this,stack[0],stack[1],i)}},validTarget:function(field,value,start){const rank=value>>2,suit=3&value;let dest,tableau,i,len;if(!value)return-1;switch(void 0===start?start=0:start++,field){case"foundation":for(i=0;i<4;i++)if(!(dest=this.foundation[i])&&1===rank||suit===(3&dest)&&rank===1+(dest>>2))return i;break;case"reserve":for(i=0;i<4;i++)if(!this.reserve[i])return i;break;case"tableau":for(i=start,len=(tableau=this.tableau).length;i<len;i++)if(dest=tableau[i][0][tableau[i][1]-1],!tableau[i][1]||1&suit^1&dest&&rank===(dest>>2)-1)return i}return-1},move:function(sourceField,sourceStack,destField,destStack){const val=this.pop(sourceField,sourceStack);this.push(destField,destStack,val)},pop:function(field,stack){let val;if("reserve"===field||"foundation"===field)return val=this[field][stack],this[field]=new Uint8Array(this[field]),this[field][stack]=0,val;const tableau=this.tableau,bufferLength=tableau[stack][1];return bufferLength?(val=tableau[stack][0][bufferLength-1],this.copyTableau(stack,bufferLength-1),val):0},push:function(field,stack,val){if(!val)return;if("reserve"===field||"foundation"===field)return this[field]=new Uint8Array(this[field]),void(this[field][stack]=val);const newLength=this.tableau[stack][1]+1;this.copyTableau(stack,newLength),this.tableau[stack][0][newLength-1]=val},copyTableau:function(stack,newLength){const old=this.tableau,tableau=old[stack][0],newBuffer=new Uint8Array(new ArrayBuffer(newLength));for(let i=0;i<newLength;++i)newBuffer[i]=tableau[i];this.tableau=[];for(let i=0,len=old.length;i<len;++i)this.tableau[i]=i!==stack?old[i]:[newBuffer,newLength]},sort:function(){Array.prototype.sort.call(this.reserve),Array.prototype.sort.call(this.foundation),this.tableau.sort(function(a,b){return a[0][0]-b[0][0]})},_serialized:null,serialize:function(){if(null!==this._serialized)return this._serialized;let i,j,stack;for(this._serialized="",i=0;i<4;i++)this._serialized+=String.fromCharCode(this.reserve[i]);for(this._serialized+="_",i=0;i<4;i++)this._serialized+=String.fromCharCode(this.foundation[i]);for(this._serialized+="_",i=0;i<8;i++)for(stack=this.tableau[i],j=0;j<stack[1];j++)this._serialized+=String.fromCharCode(stack[0][j])+"_";return this._serialized},rateMove:function(sourceField,sourceIndex,destField,destIndex){let stack,card,nextCard,i,length,rating=0,followup=!1;if("foundation"===destField&&(rating+=1e3),"tableau"===sourceField){for(length=(stack=this.tableau[sourceIndex])[1],card=stack[0][length-1],1===length&&(rating+=15),i=length-2;i>=0;i--)this.validTarget("foundation",stack[0][i])>-1&&(rating+=15-(length-2-i)+(13-(stack[0][i]>>2)));this.validTarget("tableau",stack[0][length-2])>-1&&(rating+=10)}if("reserve"===sourceField&&(rating+=10,card=this.reserve[sourceIndex]),"tableau"===destField){for(rating+=2,i=(length=(stack=this.tableau[destIndex])[1])-1;i>=0;i--)this.validTarget("foundation",stack[0][i])>-1&&(rating+=-5*(length-i));if(0===stack[1]){if("tableau"===sourceField&&1===this.tableau[sourceIndex][1])return-1e3;for(i=0;i<4;i++)(nextCard=this.reserve[i])>>2==(card>>2)-1&&1&nextCard^1&card&&(rating+=20+(nextCard>>2),followup=!0);for(i=0;i<8;i++)(nextCard=(stack=this.tableau[i])[0][stack[1]-1])>>2==(card>>2)-1&&1&nextCard^1&card&&(rating+=20+(nextCard>>2),followup=!0);followup||(rating+=-10)}}return"reserve"===destField&&(rating+=-1),rating},transformParentMove:function(){const move=this.parentMove,parent=this.parent;move&&parent&&(move.source[1]=parent.lastCard(move.source[0],move.source[1]),move.dest[1]=parent.lastCard(move.dest[0],move.dest[1]))},lastCard:function(field,index){switch(field){case"reserve":case"foundation":return this[field][index];case"tableau":const stack=this[field][index],length=stack[1];return stack[0][length-1]}},becomeChild:function(){const parent=this.parent;parent&&(parent.child=this,this.transformParentMove())}},onmessage=function(e){let solution;const data=e.data;"solve"===data.action&&((solution=attemptSolution(data.param,!0))||(solution=attemptSolution(data.param,!1)),self.postMessage({solution:solution}))},YUI.add("spider",function(Y){const Solitaire=Y.Solitaire,Spider=Solitaire.Spider=Solitaire.instance(Solitaire,{fields:["Foundation","Deck","Tableau"],createEvents:function(){Solitaire.AutoStackClear.register(),Solitaire.createEvents.call(this)},deal:function(){const deck=this.deck,stacks=this.tableau.stacks;for(let row=0;row<5;row++)for(let stack=0;stack<10;stack++)(stack<4||row<4)&&stacks[stack].push(deck.pop());for(let stack=0;stack<10;stack++)stacks[stack].push(deck.pop().faceUp());deck.createStack()},redeal:function(){},turnOver:function(){const deck=this.deck.stacks[0],that=this;hasFreeTableaus()||this.eachStack(function(stack){const card=deck.my_Last();card&&card.faceUp().moveTo(stack).after(function(){that.stack.updateCardsPosition()})},"tableau")},Stack:Solitaire.instance(Solitaire.Stack),Foundation:{stackConfig:{total:8,layout:{hspacing:1.25,top:0,left:function(){return 2.5*Solitaire.Card.width}}},field:"foundation",draggable:!1},Deck:Solitaire.instance(Solitaire.Deck,{count:2,stackConfig:{total:1,layout:{hspacing:0,top:0,left:0}},field:"deck"}),Tableau:{stackConfig:{total:10,layout:{hspacing:1.25,top:function(){return 1.5*Solitaire.Card.height},left:0}},field:"tableau"},Card:Solitaire.instance(Solitaire.Card,{playable:function(){this.stack[this.index-1];switch(this.stack.field){case"tableau":return this.createProxyStack();case"deck":return!hasFreeTableaus();case"foundation":return!1}},validTarget:function(stack){if("tableau"!==stack.field)return!1;const target=stack.my_Last();return!target||!target.isFaceDown&&target.rank===this.rank+1}})});function hasFreeTableaus(){return Y.Array.some(Solitaire.getGame().tableau.stacks,function(stack){return!stack.cards.length})}Y.Array.each(Spider.fields,function(field){Spider[field].Stack=Solitaire.instance(Spider.Stack)}),Y.mix(Spider.Stack,{validCard:function(card){return card.suit===_.last(this.cards).suit},validTarget:function(stack){switch(stack.field){case"tableau":return this.first().validTarget(stack);case"foundation":return 13===this.cards.length}}},!0),Y.mix(Spider.Tableau.Stack,{setCardPosition:function(card){return this.lastCardSetCardPosition(card)}},!0)},"0.0.1",{requires:["auto-stack-clear"]}),YUI.add("spider1s",function(Y){const Solitaire=Y.Solitaire;(Y.Solitaire.Spider1S=Solitaire.instance(Y.Solitaire.Spider)).Deck=Solitaire.instance(Y.Solitaire.Spider.Deck,{suits:["s"],count:8})},"0.0.1",{requires:["spider"]}),YUI.add("spider2s",function(Y){(Y.Solitaire.Spider2S=Y.Solitaire.instance(Y.Solitaire.Spider)).Deck=Y.Solitaire.instance(Y.Solitaire.Spider.Deck,{suits:["s","h"],count:4})},"0.0.1",{requires:["spider"]}),YUI.add("spiderette",function(Y){const Solitaire=Y.Solitaire,Klondike=Solitaire.Klondike,Spider=Solitaire.Spider;Y.Solitaire.Spiderette=Solitaire.instance(Spider,{height:Klondike.height,deal:Klondike.deal,Tableau:Solitaire.instance(Spider.Tableau,{stackConfig:Klondike.Tableau.stackConfig}),Foundation:Solitaire.instance(Spider.Foundation,{stackConfig:Klondike.Foundation.stackConfig}),Deck:Solitaire.instance(Spider.Deck,{count:1})})},"0.0.1",{requires:["klondike","spider"]}),define(["./solitaire"],function(solitaire){const getGame=solitaire.getGame;return YUI.add("statistics",function(Y){let loaded,won,enabled=!0;const localStorage=window.localStorage,Solitaire=Y.Solitaire,Statistics=Y.namespace("Solitaire.Statistics");function winDisplay(){const stats=function(raw){function won(entry){return entry.won}const record=function(){const entries=raw.split("|");return entries.splice(entries.length-1),Y.Array.map(entries,function(entry){return entry=entry.split("_"),{date:new Date(entry[0]),won:!!parseInt(entry[1],10)}})}();return{streaks:function(){const streaks=[];let streak=null;return Y.Array.each(record,function(entry){entry.won?(streak||(streak=[]),streak.push(entry)):(streak&&streaks.push(streak),streak=null)}),streak&&streaks.push(streak),streaks},wins:function(){return Y.Array.filter(record,won)},loses:function(){return Y.Array.reject(record,won)}}}(localStorage[Solitaire.game.name()+"record"]);let output="<div id='win_display'>";const streakCount=_.last(stats.streaks()).length,winCount=stats.wins().length,loseCount=stats.loses().length;return output+="<p>You win! You're awesome.</p>",output+="<h2>"+{Agnes:"Agnes",Klondike:"Klondike",Klondike1T:"Klondike (Vegas style)",FlowerGarden:"Flower Garden",FortyThieves:"Forty Thieves",Freecell:"Freecell",Golf:"Golf",GClock:"Grandfather's Clock",MonteCarlo:"Monte Carlo",Pyramid:"Pyramid",RussianSolitaire:"Russian Solitaire",Scorpion:"Scorpion",Spider:"Spider",Spider1S:"Spider (1 Suit)",Spider2S:"Spider (2 Suit)",Spiderette:"Spiderette",WillOTheWisp:"Will O' The Wisp",TriTowers:"Tri Towers",Yukon:"Yukon"}[Solitaire.game.name()]+" stats:</h2>",output+="<ul>",output+="<li>Current win streak: <span class='streak'>"+streakCount+"</span></li>",output+="<li>Total wins: <span class='wins'>"+winCount+"</span></li>",output+="<li>Total loses: <span class='loses'>"+loseCount+"</span></li>",output+='<div class="replay_options"><button class="new_deal">New Deal</button><button class="choose_game">Choose Game</button></div>',output+="</ul></div>"}function record(value){const key=localStorage.currentGame+"record";let record=localStorage[key]||"";record+=(new Date).getTime()+"_"+value+"|",localStorage[key]=record}function clearProgress(){localStorage.removeItem("currentGame")}function saveProgress(){localStorage.currentGame=Solitaire.game.name()}localStorage&&(Y.on("newGame",function(){loaded&&(record(0),clearProgress()),won=!1,loaded=null}),Y.on("loadGame",function(){loaded=Solitaire.game.name(),saveProgress(),won=!1}),Y.on("endTurn",function(){loaded||(loaded=Solitaire.game.name(),saveProgress())}),Y.on("win",function(){!won&&enabled&&(loaded=null,won=!0,record(1),clearProgress(),function(){const delay=500;getGame().eachStack(function(stack){stack.eachCard(function(card){if(!card)return;const node=card.node;card===stack.my_Last()?(node.plug(Y.Breakout,{columns:5}),function(node){setTimeout(function(){node.breakout.explode({random:.65,duration:900})},delay)}(node),delay+=900):node.addClass("hidden")})},"foundation"),setTimeout(function(){Statistics.winDisplay()},delay+200)}())}),Y.on("beforeSetup",function(){const winDisplay=Y.one("#win_display");winDisplay&&winDisplay.remove(),Statistics.enable()}),Y.mix(Statistics,{winDisplay:function(){const Application=Solitaire.Application;Y.one(".solitairey_body").append(winDisplay()),Y.on("click",function(){Application.newGame()},Y.one("#win_display .new_deal"))},enable:function(){enabled=!0},disable:function(){enabled=!1}}))},"0.0.1",{requires:["solitaire","array-extras","breakout"]}),{}}),YUI.add("tri-towers",function(Y){const Solitaire=Y.Solitaire,TriTowers=Y.Solitaire.TriTowers=Solitaire.instance(Solitaire,{fields:["Deck","Foundation","Tableau"],width:function(){return 15*this.Card.base.width},height:function(){return 5*this.Card.base.height},createEvents:function(){Y.on("solitaire|endTurn",function(){const tableaus=Solitaire.game.tableau.stacks;for(let i=0;i<3;i++)Y.fire("tableau:afterPop",tableaus[i])}),Solitaire.createEvents.call(this)},deal:function(){let card,stack,i,stackLength;const stacks=this.tableau.stacks,deck=this.deck,foundation=this.foundation.stacks[0];for(stack=0;stack<4;stack++)for(stackLength=3*(stack+1),i=0;i<stackLength;i++)card=deck.pop(),stacks[stack].push(card),3===stack&&card.faceUp();card=deck.pop().faceUp(),foundation.push(card),deck.createStack()},turnOver:function(){const deck=this.deck.stacks[0],foundation=this.foundation.stacks[0],last=deck.my_Last();last&&last.faceUp().moveTo(foundation)},isWon:function(){let won=!0;return this.eachStack(function(stack){stack.eachCard(function(card){return card&&(won=!1),won})},"tableau"),won},Deck:Solitaire.instance(Solitaire.Deck,{field:"deck",stackConfig:{total:1,layout:{hspacing:0,top:function(){return 4*Solitaire.Card.height},left:0}},createStack:function(){for(let i=0,len=this.cards.length;i<len;i++)this.stacks[0].push(this.cards[i])}}),Tableau:{field:"tableau",stackConfig:{total:4,layout:{rowGaps:[3.75,2.5,1.25,0],cardGap:1.25,vspacing:.6,hspacing:-.625,top:0,left:function(){return 1.875*Solitaire.Card.width}}}},Foundation:{field:"foundation",stackConfig:{total:1,layout:{hspacing:0,top:function(){return 4*Solitaire.Card.height},left:function(){return 4*Solitaire.Card.width}}}},Events:Solitaire.instance(Solitaire.Events,{dragCheck:function(e){this.getCard().autoPlay(),this._afterDragEnd(),e.halt()}}),Card:Solitaire.instance(Solitaire.Card,{validTarget:function(stack){if("foundation"!==stack.field)return!1;const card=stack.my_Last(),diff=Math.abs(this.rank-card.rank);return 1===diff||12===diff},playable:function(){const stack=this.stack;return"deck"===stack.field&&this===stack.my_Last()||this.isFree()&&this.validTarget(Solitaire.getGame().foundation.stacks[0])},isFree:function(){const stack=this.stack,next=stack.next(),tower=this.tower(),index=stack.cards.indexOf(this);if("tableau"!==stack.field)return!1;if(!next)return!0;for(let i=0;i<2;i++)if(next.cards[index+tower+i])return!1;return!0},tower:function(){const stack=this.stack,index=stack.cards.indexOf(this),stackIndex=stack.index()+1;return Math.floor(index/stackIndex)}}),Stack:Solitaire.instance(Solitaire.Stack,{images:{}})},!0);Y.Array.each(TriTowers.fields,function(field){TriTowers[field].Stack=Solitaire.instance(TriTowers.Stack)}),Y.mix(TriTowers.Tableau.Stack,{deleteItem:function(card){const cards=this.cards,i=cards.indexOf(card);-1!==i&&(cards[i]=null)},setCardPosition:function(card){let left,index,stackIndex;const last=this.my_Last(),top=this.top,layout=TriTowers.Tableau.stackConfig.layout,rowGaps=layout.rowGaps,cardGap=layout.cardGap;last?(left=last.left+card.width*cardGap,(index=this.cards.length)%(stackIndex=this.index()+1)||(left+=rowGaps[stackIndex-1]*card.width)):left=this.left,card.top=top,card.left=left,card.zIndex=10*this.index()}},!0),Y.mix(TriTowers.Deck.Stack,{setCardPosition:function(card){const last=this.my_Last();let left,zIndex;const top=this.top;last?(left=last.left+.1*card.width,zIndex=last.zIndex+1):(left=this.left,zIndex=0),card.top=top,card.left=left,card.zIndex=zIndex}},!0)},"0.0.1",{requires:["solitaire"]}),YUI.add("will-o-the-wisp",function(Y){const Solitaire=Y.Solitaire;Y.Solitaire.WillOTheWisp=Solitaire.instance(Solitaire.Spiderette,{deal:function(){const deck=this.deck;for(let row=0;row<3;row++)this.eachStack(function(stack){const card=deck.pop();2===row&&card.faceUp(),stack.push(card)},"tableau");deck.createStack()}})},"0.0.1",{requires:["spiderette"]}),YUI.add("yukon",function(Y){const Solitaire=Y.Solitaire,Yukon=Solitaire.Yukon=Solitaire.instance(Solitaire,{fields:["Foundation","Tableau"],deal:function(){let card,piles=6,stack=0;const deck=this.deck,stacks=this.tableau.stacks;for(;piles>=0;){for(card=deck.pop().faceUp(),stacks[6-piles].push(card),stack=7-piles;stack<7;stack++)card=deck.pop(),stacks[stack].push(card);piles--}for(stack=1;deck.cards.length;)card=deck.pop().faceUp(),stacks[stack].push(card),stack=stack%6+1},height:function(){return 4.8*this.Card.base.height},Stack:Solitaire.instance(Solitaire.Stack),Foundation:{stackConfig:{total:4,layout:{vspacing:1.25,top:0,left:function(){return 9*Solitaire.Card.width}}},field:"foundation",draggable:!1},Tableau:{stackConfig:{total:7,layout:{hspacing:1.25,top:0,left:0}},field:"tableau",draggable:!0},Card:Solitaire.instance(Solitaire.Card,{playable:function(){return"tableau"===this.stack.field&&!this.isFaceDown},validTarget:function(stack){const target=stack.my_Last();switch(stack.field){case"tableau":return target?!target.isFaceDown&&target.color!==this.color&&target.rank===this.rank+1:13===this.rank;case"foundation":return target?target.suit===this.suit&&target.rank===this.rank-1:1===this.rank;default:return!1}}})});Y.Array.each(Yukon.fields,function(field){Yukon[field].Stack=Solitaire.instance(Yukon.Stack)}),Y.mix(Yukon.Stack,{validTarget:function(stack){return"tableau"===stack.field&&this.first().validTarget(stack)},validProxy:function(card){return!0}},!0),Y.mix(Yukon.Tableau.Stack,{setCardPosition:function(card){return this.lastCardSetCardPosition(card)}},!0)},"0.0.1",{requires:["solitaire"]}),define(["require","exports"],function(require,exports){"use strict";function is_int(input){const value=""+input;return parseFloat(value)===parseInt(value,10)&&!isNaN(input)}Object.defineProperty(exports,"__esModule",{value:!0});const _ranks__int_to_str="0A23456789TJQK";function _perl_range(start,end){const ret=[];for(let i=start;i<=end;i++)ret.push(i);return ret}exports.ranks__str_to_int={},exports.NUM_SUITS=4;const _suits=_perl_range(0,exports.NUM_SUITS-1);exports.MIN_RANK=1,exports.MAX_RANK=13;const _ranks=_perl_range(exports.MIN_RANK,exports.MAX_RANK);for(const rank of _ranks)exports.ranks__str_to_int[_ranks__int_to_str.substring(rank,rank+1)]=rank;const _suits__int_to_str="HCDS";exports.suits__str_to_int=new Map;for(const suit of _suits)exports.suits__str_to_int.set(_suits__int_to_str.substring(suit,suit+1),suit);class Card{constructor(rank,suit){if(this.rank=rank,this.suit=suit,!is_int(rank))throw"rank is not an integer.";if(!is_int(suit))throw"suit is not an integer.";if(rank<1)throw"rank is too low.";if(rank>exports.MAX_RANK)throw"rank is too high.";if(suit<0)throw"suit is negative.";if(suit>=exports.NUM_SUITS)throw"suit is too high."}getRank(){return this.rank}getSuit(){return this.suit}toString(){return _ranks__int_to_str.substring(this.rank,this.rank+1)+_suits__int_to_str.substring(this.suit,this.suit+1)}}class BoardTextLine{constructor(line){this.line=line;const that=this,m1=line.match(/^([^\n\r]*)([\n\r]*)$/);that.newline=m1[2];let l=m1[1];if(m1[1].match(/#/)){const m2=m1[1].match(/^(.*?)(#.*)/);that.comment=m2[2],l=m2[1]}else that.comment="";if(l.match(/:/)){const m3=l.match(/^([^:]*:)(.*)/);that.prefix=m3[1],that.content=m3[2]}else that.prefix="",that.content=l}getContent(){return this.content}capitalize(){return this.prefix+this.getContent().toUpperCase()+this.comment+this.newline}}exports.capitalize_cards=function(board){return board.match(/[^\n]*\n?/g).map(l=>new BoardTextLine(l).capitalize()).join("")};class Column{constructor(cards){this.cards=cards}getLen(){return this.cards.length}getCard(idx){if(idx<0)throw"idx is below zero.";if(idx>=this.getLen())throw"idx exceeds the length of the column.";return this.cards[idx]}getArrOfStrs(){const that=this;return _perl_range(0,that.getLen()-1).map(i=>that.getCard(i).toString())}toString(){return Array.prototype.concat.apply([],[[":"],this.getArrOfStrs()]).join(" ")+"\n"}}const suit_re="[HCDS]",rank_re="[A23456789TJQK]",card_re="("+rank_re+")("+suit_re+")";function fcs_js__card_from_string(s){const m=s.match("^"+card_re+"$");if(!m)throw'Invalid format for a card - "'+s+'"';return new Card(exports.ranks__str_to_int[m[1]],exports.suits__str_to_int.get(m[2]))}exports.fcs_js__card_from_string=fcs_js__card_from_string;class BaseResult{constructor(is_correct,start_char_idx,num_consumed_chars,error){this.is_correct=is_correct,this.start_char_idx=start_char_idx,this.num_consumed_chars=num_consumed_chars,this.error=error}getEnd(){return this.start_char_idx+this.num_consumed_chars}}class ColumnParseResult extends BaseResult{constructor(is_correct,start_char_idx,num_consumed_chars,error,cards){super(is_correct,start_char_idx,num_consumed_chars,error),this.col=new Column(cards)}}class StringParser{constructor(s){this.s=s,this.consumed=0}consume(m){const len_match=m[1].length;this.consumed+=len_match,this.s=this.s.substring(len_match)}getConsumed(){return this.consumed}isNotEmpty(){return this.s.length>0}match(re){return this.s.match(re)}consume_match(re){const that=this,m=that.match(re);return m&&that.consume(m),m}skipComments(){this.consume_match(/^((?:[ \t]*#[^\n\r]*\r?\n)*)/)}}class CardsStringParser extends StringParser{constructor(s,card_mapper){super(s),this.card_mapper=card_mapper,this.cards=[],this.is_start=!0}afterStart(){this.is_start=!1}getStartSpace(){return this.is_start?"":" +"}should_loop(){return this.isNotEmpty()&&!this.consume_match(/^(\s*(?:#[^\n]*)?\n?)$/)}add(m){this.cards.push(this.card_mapper(m[2])),this.afterStart()}loop(re,callback){const p=this;for(;p.should_loop();){const m=p.consume_match("^("+p.getStartSpace()+"("+re+"))");if(!m)return p.consume_match("^( *)"),callback();p.add(m)}return null}}function fcs_js__column_from_string(start_char_idx,orig_s,force_leading_colon){const p=new CardsStringParser(orig_s,fcs_js__card_from_string),match=p.consume_match("^((?:: +|:(?:$|(?=\\n)))?)");if(force_leading_colon&&!match[1].length)return new ColumnParseResult(!1,start_char_idx,p.getConsumed(),'Columns must start with a ":" in strict mode.',[]);const ret=p.loop(card_re,()=>new ColumnParseResult(!1,start_char_idx,p.getConsumed(),"Wrong card format - should be [Rank][Suit]",[]));return ret||new ColumnParseResult(!0,start_char_idx,p.getConsumed(),"",p.cards)}exports.fcs_js__column_from_string=fcs_js__column_from_string;class Freecells{constructor(num_freecells,cards){if(this.num_freecells=num_freecells,this.cards=cards,!is_int(num_freecells))throw"num_freecells is not an integer.";if(cards.length!==num_freecells)throw"cards length mismatch."}getNum(){return this.num_freecells}getCard(idx){if(idx<0)throw"idx is below zero.";if(idx>=this.getNum())throw"idx exceeds the length of the column.";return this.cards[idx]}getArrOfStrs(){const that=this;return _perl_range(0,that.getNum()-1).map(i=>{const card=that.getCard(i);return null!==card?card.toString():"-"})}toString(){return Array.prototype.concat.apply([],[["Freecells:"],this.getArrOfStrs()]).join(" ")+"\n"}}class FreecellsParseResult extends BaseResult{constructor(is_correct,start_char_idx,num_consumed_chars,error,num_freecells,fc){super(is_correct,start_char_idx,num_consumed_chars,error),is_correct&&(this.freecells=new Freecells(num_freecells,fc))}}function fcs_js__freecells_from_string(num_freecells,start_char_idx,orig_s){const p=new CardsStringParser(orig_s,card_str=>"-"===card_str?null:fcs_js__card_from_string(card_str));function make_ret(verdict,err_str){return new FreecellsParseResult(verdict,start_char_idx,p.getConsumed(),err_str,num_freecells,verdict?p.cards:[])}if(!p.consume_match(new RegExp("^("+freecells_prefix_re+":(?: +|$|(?=\\n)))")))return make_ret(!1,'Wrong line prefix for freecells - should be "Freecells:"');const ret=p.loop("\\-|(?:"+card_re+")",()=>make_ret(!1,"Wrong card format - should be [Rank][Suit]"));if(ret)return ret;for(;p.cards.length<num_freecells;)p.cards.push(null);return p.cards.length!==num_freecells?make_ret(!1,"Too many cards specified in Freecells line."):make_ret(!0,"")}exports.fcs_js__freecells_from_string=fcs_js__freecells_from_string;class Foundations{constructor(){this.ranks=[-1,-1,-1,-1]}getByIdx(deck,suit){return this._validateDeckSuit(deck,suit),this.ranks[suit]}setByIdx(deck,suit,rank){if(this._validateDeckSuit(deck,suit),!is_int(rank))throw"Rank must be an integer.";if(!(rank>=0&&rank<=exports.MAX_RANK))throw"rank is out of range.";return!(this.ranks[suit]>=0)&&(this.ranks[suit]=rank,!0)}finalize(){const that=this;for(let i=0;i<exports.NUM_SUITS;i++)that.getByIdx(0,i)<0&&that.setByIdx(0,i,0)}toString(){const that=this,arr=[];for(const suit of _suits){const val=that.getByIdx(0,suit);val>0&&arr.push(_suits__int_to_str[suit]+"-"+_ranks__int_to_str[val])}return Array.prototype.concat.apply([],[["Foundations:"],arr]).join(" ")+"\n"}_validateDeckSuit(deck,suit){if(0!==deck)throw"multiple decks are not supported.";if(!is_int(suit))throw"suit is not an integer.";if(!(suit>=0&&suit<exports.NUM_SUITS))throw"suit is out of range."}}exports.Foundations=Foundations;class FoundationsParseResult extends BaseResult{constructor(is_correct,start_char_idx,num_consumed_chars,error,foundations){super(is_correct,start_char_idx,num_consumed_chars,error),is_correct&&(this.foundations=foundations)}}const foundations_prefix_re=/^((?:Foundations|Founds|FOUNDS)\:)/,freecells_prefix_re="(?:Freecells|FC|Fc)";function fcs_js__foundations_from_string(num_decks,start_char_idx,orig_s){if(1!==num_decks)throw"Can only handle 1 decks.";const p=new StringParser(orig_s),founds=new Foundations;function make_ret(verdict,err_str){return verdict&&founds.finalize(),new FoundationsParseResult(verdict,start_char_idx,p.getConsumed(),err_str,founds)}if(!p.consume_match(foundations_prefix_re))return make_ret(!1,'Wrong line prefix for the foundations - should be "Foundations:"');for(;p.isNotEmpty()&&!p.consume_match(/^( *\n?)$/);){const m=p.consume_match("^( +("+suit_re+")-("+rank_re+"))");if(!m)return make_ret(!1,"Could not match a foundation string [HCDS]-[A23456789TJQK]");const suit=m[2];if(!founds.setByIdx(0,exports.suits__str_to_int.get(suit),exports.ranks__str_to_int[m[3]]))return make_ret(!1,'Suit "'+suit+'" was already set.')}return make_ret(!0,"")}var ErrorLocationType,ParseErrorType;exports.fcs_js__foundations_from_string=fcs_js__foundations_from_string,function(ErrorLocationType){ErrorLocationType[ErrorLocationType.Foundations=0]="Foundations",ErrorLocationType[ErrorLocationType.Freecells=1]="Freecells",ErrorLocationType[ErrorLocationType.Column=2]="Column"}(ErrorLocationType=exports.ErrorLocationType||(exports.ErrorLocationType={}));class ErrorLocation{constructor(type_,idx,start,end){this.type_=type_,this.idx=idx,this.start=start,this.end=end}}!function(ParseErrorType){ParseErrorType[ParseErrorType.VALID=0]="VALID",ParseErrorType[ParseErrorType.TOO_MUCH_OF_CARD=1]="TOO_MUCH_OF_CARD",ParseErrorType[ParseErrorType.NOT_ENOUGH_OF_CARD=2]="NOT_ENOUGH_OF_CARD",ParseErrorType[ParseErrorType.FOUNDATIONS_NOT_AT_START=3]="FOUNDATIONS_NOT_AT_START",ParseErrorType[ParseErrorType.FREECELLS_NOT_AT_START=4]="FREECELLS_NOT_AT_START",ParseErrorType[ParseErrorType.LINE_PARSE_ERROR=5]="LINE_PARSE_ERROR",ParseErrorType[ParseErrorType.LOWERCASE_LETTERS=6]="LOWERCASE_LETTERS",ParseErrorType[ParseErrorType.HAS_10_STRINGS=7]="HAS_10_STRINGS"}(ParseErrorType=exports.ParseErrorType||(exports.ParseErrorType={}));class ParseError{constructor(type_,locs,card){this.type_=type_,this.locs=locs,this.card=card,this.problem_strings=[]}}class ParseLocation{constructor(type_,row,col){this.type_=type_,this.row=row,this.col=col}}exports.BoardParseResult=class{constructor(num_stacks,num_freecells,orig_s){this.num_stacks=num_stacks,this.num_freecells=num_freecells,this.errors=[],this.is_valid=!0;const that=this,lines=orig_s.match(/[^\n]*\n?/g).map(l=>new BoardTextLine(l));for(const l of lines){{const matches=l.getContent().match(/[a-z]+/g);if(matches&&matches.length>0){const err=new ParseError(ParseErrorType.LOWERCASE_LETTERS,[],fcs_js__card_from_string("AH"));err.problem_strings=matches,that.errors.push(err),that.is_valid=!1}}{const matches=l.getContent().match(/10/g);if(matches&&matches.length>0){const err=new ParseError(ParseErrorType.HAS_10_STRINGS,[],fcs_js__card_from_string("AH"));err.problem_strings=matches,that.errors.push(err),that.is_valid=!1}}}that.columns=[];const counter=_suits.map(i=>_perl_range(0,exports.MAX_RANK).map(i=>[])),p=new StringParser(orig_s);if(p.skipComments(),p.match(foundations_prefix_re)){const start_char_idx=p.getConsumed(),fo=fcs_js__foundations_from_string(1,start_char_idx,p.consume_match(/^([^\n]*(?:\n|$))/)[1]);if(that.foundations=fo,!fo.is_correct)return that.errors.push(new ParseError(ParseErrorType.LINE_PARSE_ERROR,[new ErrorLocation(ErrorLocationType.Foundations,0,start_char_idx,p.getConsumed())],fcs_js__card_from_string("AH"))),void(that.is_valid=!1)}if(p.skipComments(),p.match(new RegExp("^"+freecells_prefix_re+":"))){const start_char_idx=p.getConsumed(),fc=fcs_js__freecells_from_string(num_freecells,start_char_idx,p.consume_match(/^([^\n]*(?:\n|$))/)[1]);if(that.freecells=fc,!fc.is_correct)return that.errors.push(new ParseError(ParseErrorType.LINE_PARSE_ERROR,[new ErrorLocation(ErrorLocationType.Freecells,0,start_char_idx,p.getConsumed())],fcs_js__card_from_string("AH"))),void(that.is_valid=!1)}for(let i=0;i<num_stacks;++i){p.skipComments();const start_char_idx=p.getConsumed(),col=fcs_js__column_from_string(start_char_idx,p.consume_match(/^([^\n]*(?:\n|$))/)[1],!1);if(that.columns.push(col),!col.is_correct)return that.errors.push(new ParseError(ParseErrorType.LINE_PARSE_ERROR,[new ErrorLocation(ErrorLocationType.Column,i,start_char_idx,p.getConsumed())],fcs_js__card_from_string("AH"))),void(that.is_valid=!1)}if(that.foundations)for(const suit of _suits)for(const rank of _perl_range(1,that.foundations.foundations.getByIdx(0,suit)))counter[suit][rank].push(new ParseLocation(ErrorLocationType.Foundations,0,0));if(that.freecells)for(const i of _perl_range(0,that.freecells.freecells.getNum()-1)){const card=that.freecells.freecells.getCard(i);card&&counter[card.getSuit()][card.getRank()].push(new ParseLocation(ErrorLocationType.Freecells,i,0))}that.columns.forEach((col_res,idx)=>{const col=col_res.col;for(const h of _perl_range(0,col.getLen()-1)){const card=col.getCard(h);counter[card.getSuit()][card.getRank()].push(new ParseLocation(ErrorLocationType.Column,idx,h))}});const too_many_cards__errors=[],not_enough_cards__errors=[];for(const suit of _suits)for(const rank of _ranks){const count=counter[suit][rank];function add_error(arr,type_,locs){arr.push(new ParseError(type_,locs,new Card(rank,suit))),that.is_valid=!1}if(count.length>1){const locs=count.map(v=>new ErrorLocation(v.type_,v.row,0,0));add_error(too_many_cards__errors,ParseErrorType.TOO_MUCH_OF_CARD,locs)}else count.length<1&&add_error(not_enough_cards__errors,ParseErrorType.NOT_ENOUGH_OF_CARD,[])}that.errors.push(...too_many_cards__errors),that.errors.push(...not_enough_cards__errors)}getBoardString(){const that=this;let ret="";that.foundations&&(ret+=that.foundations.foundations.toString()),that.freecells&&(ret+=that.freecells.freecells.toString());for(const col of that.columns)ret+=col.col.toString();return ret}}}),define(["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.suits__int_to_str="HCDS",exports.suit_re="["+exports.suits__int_to_str+"]",exports.rank_str="A23456789TJQK",exports.rank_re="["+exports.rank_str+"]"}),define(["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.perl_range=function(start,end){const ret=[];for(let i=start;i<=end;++i)ret.push(i);return ret}}),define(["require","exports"],function(require,exports){"use strict";function _to_int(s){return parseInt(s,10)}function _find_max_step(n){let x=1;for(;x<<1<n;)x<<=1;return x}Object.defineProperty(exports,"__esModule",{value:!0});class Expander{constructor(){this.modified_state={f:[],c:[]},this.empty_fc_indexes=[],this.empty_stack_indexes=[],this.ret_array=[],this.output_state_promise=(expander=>{}),this.past_first_output_state_promise=(expander=>expander.past_first_output_state())}init_from_string(num_stacks,num_freecells,ultimate_source,ultimate_dest,initial_src_state_str){const expander=this,col_matches=initial_src_state_str.match(/(\n:[^\n]+)/g);if(!col_matches||col_matches.length!==num_stacks)throw"Miscount of stacks.";for(let idx=0;idx<num_stacks;++idx){let cards=col_matches[idx].match(/\w{2}/g);cards||(cards=[]),expander.modified_state.c[idx]=cards,idx!==ultimate_dest&&idx!==ultimate_source&&0===cards.length&&expander.empty_stack_indexes.push(idx)}const freecell_match=initial_src_state_str.match(/\nFreecells:([^\n]*)\n/);if(!freecell_match)throw"Cannot match freecell exception.";const freecell_string=freecell_match[1];if(freecell_string.length!==4*num_freecells)throw"Miscount of freecells.";for(let idx=0;idx<num_freecells;++idx){const fc_s=freecell_string.substring(4*idx,4*(idx+1));"    "===fc_s?(expander.modified_state.f[idx]=null,expander.empty_fc_indexes.push(idx)):expander.modified_state.f[idx]={t:"s",s:fc_s}}const foundations_match=initial_src_state_str.match(/^(Foundations:[^\n]*\n)/);if(!foundations_match)throw"Cannot find foundations.";expander.foundations_str=foundations_match[1],expander.step_width=1+expander.empty_fc_indexes.length}past_first_output_state(){const state_string=this.foundations_str+"Freecells:"+this.modified_state.f.map(fc=>fc?"s"===fc.t?fc.s:"  "+fc.c:"    ").join("")+"\n"+this.modified_state.c.map(col=>": "+col.join(" ")+"\n").join("");this.ret_array.push({str:state_string,type:"s"})}move_using_freecells(source,dest,count){const expander=this,num_cards_thru_freecell=count-1;for(let i=0;i<num_cards_thru_freecell;++i)expander.add_move({t:"s2f",src:source,dest:expander.empty_fc_indexes[i]});expander.add_move({t:"s2s",src:source,dest:dest});for(let i=num_cards_thru_freecell-1;i>=0;--i)expander.add_move({t:"f2s",src:expander.empty_fc_indexes[i],dest:dest})}recursive_move(source,dest,num_cards_r,empty_cols){const expander=this;if(num_cards_r<=0)return;const running_empty_cols=empty_cols.slice(0),steps=[];for(;Math.ceil(num_cards_r/expander.step_width)>1;){const count_cards=_find_max_step(Math.ceil(num_cards_r/expander.step_width))*expander.step_width,temp_dest=running_empty_cols.shift();expander.recursive_move(source,temp_dest,count_cards,running_empty_cols),steps.push({count:count_cards,dest:temp_dest,source:source}),num_cards_r-=count_cards}expander.move_using_freecells(source,dest,num_cards_r);for(const s of steps.reverse())expander.recursive_move(s.dest,dest,s.count,running_empty_cols),running_empty_cols.push(s.dest),running_empty_cols.sort((a,b)=>a-b)}add_move(my_move){this.output_state_promise(this),this.ret_array.push({str:function(my_move){const src=my_move.src.toString(),dest=my_move.dest.toString();return"s2f"===my_move.t?"Move a card from stack "+src+" to freecell "+dest:"s2s"===my_move.t?"Move 1 cards from stack "+src+" to stack "+dest:"Move a card from freecell "+src+" to stack "+dest}(my_move),type:"m"}),this.perform_move(my_move),this.output_state_promise=this.past_first_output_state_promise}perform_move(my_move){const expander=this,src=my_move.src,dest=my_move.dest;if("s2f"===my_move.t)expander.modified_state.f[dest]={c:expander.modified_state.c[src].pop(),t:"c"};else if("s2s"===my_move.t)expander.modified_state.c[dest].push(expander.modified_state.c[src].pop());else{if("c"!==expander.modified_state.f[src].t)throw"Wrong val in "+src+"Freecell.";expander.modified_state.c[dest].push(expander.modified_state.f[src].c),expander.modified_state.f[src]=null}}}exports.fc_solve_expand_move=function(num_stacks,num_freecells,initial_src_state_str,initial_move,initial_dest_state_str){const matched=initial_move.str.match(/^Move ([0-9]+) cards from stack ([0-9]+) to stack ([0-9]+)$/);if(!matched)return[initial_move];const ultimate_num_cards=_to_int(matched[1]);if(1===ultimate_num_cards)return[initial_move];const ultimate_source=_to_int(matched[2]),ultimate_dest=_to_int(matched[3]),expander=new Expander;return expander.init_from_string(num_stacks,num_freecells,ultimate_source,ultimate_dest,initial_src_state_str),expander.recursive_move(ultimate_source,ultimate_dest,ultimate_num_cards,expander.empty_stack_indexes),expander.ret_array}}),define(["require","exports","big-integer","./fcs-validate","./web-fc-solve--expand-moves","./prange","./french-cards"],function(require,exports,bigInt,validate,expand,prange_1,french_cards_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fc_solve_expand_move=expand.fc_solve_expand_move;let fc_solve__hll_ms_rand__get_singleton=null,fc_solve__hll_ms_rand__init=null,fc_solve__hll_ms_rand__mod_rand=null,fc_solve_user__find_deal__alloc=null,fc_solve_user__find_deal__fill=null,fc_solve_user__find_deal__free=null,fc_solve_user__find_deal__run=null,freecell_solver_user_alloc=null,freecell_solver_user_solve_board=null,freecell_solver_user_resume_solution=null,freecell_solver_user_cmd_line_read_cmd_line_preset=null,malloc=null,c_free=null,freecell_solver_user_get_next_move=null,freecell_solver_user_get_num_freecells=null,freecell_solver_user_get_num_stacks=null,freecell_solver_user_current_state_stringify=null,freecell_solver_user_stringify_move_ptr=null,freecell_solver_user_free=null,freecell_solver_user_limit_iterations_long=null,freecell_solver_user_get_invalid_state_error_into_string=null,freecell_solver_user_cmd_line_parse_args_with_file_nesting_count=null,fc_solve_Pointer_stringify=null,fc_solve_FS_writeFile=null,fc_solve_getValue=null,fc_solve_setValue=null,fc_solve_intArrayFromString=null,fc_solve_allocate_i8=null;function alloc_wrap(size,desc,error){const ret=malloc(size);if(0===ret)throw alert("Could not allocate "+desc+" (out of memory?)"),error;return ret}exports.FC_Solve_init_wrappers_with_module=function(Module){fc_solve__hll_ms_rand__get_singleton=Module.cwrap("fc_solve__hll_ms_rand__get_singleton","number",[]),fc_solve__hll_ms_rand__init=Module.cwrap("fc_solve__hll_ms_rand__init","number",["number","string"]),fc_solve__hll_ms_rand__mod_rand=Module.cwrap("fc_solve__hll_ms_rand__mod_rand","number",["number","number"]),fc_solve_user__find_deal__alloc=Module.cwrap("fc_solve_user__find_deal__alloc","number",[]),fc_solve_user__find_deal__fill=Module.cwrap("fc_solve_user__find_deal__fill","number",["number","string"]),fc_solve_user__find_deal__free=Module.cwrap("fc_solve_user__find_deal__free","number",["number"]),fc_solve_user__find_deal__run=Module.cwrap("fc_solve_user__find_deal__run","string",["number","string","string"]),freecell_solver_user_alloc=Module.cwrap("freecell_solver_user_alloc","number",[]),freecell_solver_user_solve_board=Module.cwrap("freecell_solver_user_solve_board","number",["number","string"]),freecell_solver_user_resume_solution=Module.cwrap("freecell_solver_user_resume_solution","number",["number"]),freecell_solver_user_cmd_line_read_cmd_line_preset=Module.cwrap("freecell_solver_user_cmd_line_read_cmd_line_preset","number",["number","string","number","number","number","string"]),malloc=Module.cwrap("malloc","number",["number"]),c_free=Module.cwrap("free","number",["number"]),freecell_solver_user_get_next_move=Module.cwrap("freecell_solver_user_get_next_move","number",["number","number"]),freecell_solver_user_get_num_freecells=Module.cwrap("freecell_solver_user_get_num_freecells","number",["number"]),freecell_solver_user_get_num_stacks=Module.cwrap("freecell_solver_user_get_num_stacks","number",["number"]),freecell_solver_user_current_state_stringify=Module.cwrap("freecell_solver_user_current_state_stringify","number",["number","number","number","number","number"]),freecell_solver_user_stringify_move_ptr=Module.cwrap("freecell_solver_user_stringify_move_ptr","number",["number","number","number","number"]),freecell_solver_user_free=Module.cwrap("freecell_solver_user_free","number",["number"]),freecell_solver_user_limit_iterations_long=Module.cwrap("freecell_solver_user_limit_iterations_long","number",["number","number"]),freecell_solver_user_get_invalid_state_error_into_string=Module.cwrap("freecell_solver_user_get_invalid_state_error_into_string","number",["number","number","number"]),freecell_solver_user_cmd_line_parse_args_with_file_nesting_count=Module.cwrap("freecell_solver_user_cmd_line_parse_args_with_file_nesting_count","number",["number","number","number","number","number","number","number","number","number","number","number"]),fc_solve_Pointer_stringify=(ptr=>Module.UTF8ToString(ptr,1e4)),fc_solve_FS_writeFile=((p1,p2,p3)=>Module.FS.writeFile(p1,p2,p3)),fc_solve_getValue=((p1,p2)=>Module.getValue(p1,p2)),fc_solve_setValue=((p1,p2,p3)=>Module.setValue(p1,p2,p3)),fc_solve_intArrayFromString=(s=>Module.intArrayFromString(s)),fc_solve_allocate_i8=(p1=>Module.allocate(p1,"i8",Module.ALLOC_STACK))};const remove_trailing_space_re=/[ \t]+$/gm;exports.FCS_STATE_WAS_SOLVED=0;const FCS_STATE_IS_NOT_SOLVEABLE=1;exports.FCS_STATE_SUSPEND_PROCESS=5;const FCS_STATE_INVALID_STATE=8,iters_step=1e3,upper_iters_limit=131072,fc_solve_2uni_suit_map={H:"♥",C:"♣",D:"♦",S:"♠"},fc_solve_2uni_suit_map_num={H:1,C:3,D:2,S:0};function fc_solve_2uni_card(match,p1,p2,offset,mystring){return p1+fc_solve_2uni_suit_map[p2]}function fc_solve_2uni_char_card(match,p1,p2,offset,mystring){const rank=validate.ranks__str_to_int[p1];return String.fromCodePoint(16*fc_solve_2uni_suit_map_num[p2]+127136+rank)}function fc_solve_2uni_found(match,p1,p2,offset,mystring){return fc_solve_2uni_suit_map[p1]+p2}const card_re=new RegExp("\\b("+french_cards_1.rank_re+")("+french_cards_1.suit_re+")\\b","g"),found_re=new RegExp("\\b("+french_cards_1.suit_re+")(-[0A2-9TJQK])\\b","g");exports.DisplayFilter=class{constructor(args){this.is_unicode_cards=args.is_unicode_cards,this.is_unicode_cards_chars=args.is_unicode_cards_chars}unicode_preprocess(out_buffer){return this.is_unicode_cards?this._replace_found(this.is_unicode_cards_chars?this._replace_char_card(out_buffer):this._replace_card(out_buffer)):out_buffer}_replace_char_card(s){return s.replace(card_re,fc_solve_2uni_char_card)}_replace_card(s){return s.replace(card_re,fc_solve_2uni_card)}_replace_found(s){return s.replace(found_re,fc_solve_2uni_found)}};exports.FC_Solve=class{constructor(args){const that=this;that.dir_base=args.dir_base,that.string_params=args.string_params,that.set_status_callback=args.set_status_callback,that.cmd_line_preset=args.cmd_line_preset,that.current_iters_limit=0,that.obj=(()=>{const ret_obj=freecell_solver_user_alloc();if(0===ret_obj)throw alert("Could not allocate solver instance (out of memory?)"),"Foo";if(0!==that._initialize_obj(ret_obj))throw alert("Failed to initialize solver (Bug!)"),freecell_solver_user_free(ret_obj),"Bar";return ret_obj})(),that.proto_states_and_moves_seq=null,that._pre_expand_states_and_moves_seq=null,that._post_expand_states_and_moves_seq=null,that._state_string_buffer=alloc_wrap(500,"state string buffer","Zam"),that._move_string_buffer=alloc_wrap(200,"move string buffer","Plum")}set_status(myclass,mylabel){return this.set_status_callback(myclass,mylabel)}handle_err_code(solve_err_code){const that=this;if(solve_err_code===FCS_STATE_INVALID_STATE){const error_string_ptr=alloc_wrap(300,"state error string","Gum");freecell_solver_user_get_invalid_state_error_into_string(that.obj,error_string_ptr,1);const error_string=fc_solve_Pointer_stringify(error_string_ptr);throw c_free(error_string_ptr),alert(error_string+"\n"),"Foo"}if(solve_err_code===exports.FCS_STATE_SUSPEND_PROCESS)return that.current_iters_limit>=upper_iters_limit?void that.set_status("exceeded","Iterations count exceeded at "+that.current_iters_limit):void that.set_status("running","Running ("+that.current_iters_limit+" iterations)");if(solve_err_code!==exports.FCS_STATE_WAS_SOLVED){if(solve_err_code!==FCS_STATE_IS_NOT_SOLVEABLE)throw alert("Unknown Error code "+solve_err_code+"!"),"Foo";that.set_status("impossible","Could not solve.")}else that.set_status("solved","Solved")}resume_solution(){this._increase_iters_limit();const solve_err_code=freecell_solver_user_resume_solution(this.obj);return this.handle_err_code(solve_err_code),solve_err_code}do_solve(proto_board_string){const that=this;that.set_status("running","Running");try{that._increase_iters_limit();const board_string=that._process_board_string(proto_board_string),solve_err_code=freecell_solver_user_solve_board(that.obj,board_string);return that.handle_err_code(solve_err_code),solve_err_code}catch(e){return void that.set_status("error","Error")}}unicode_preprocess(out_buffer,display){return display.unicode_preprocess(out_buffer)}display_solution(args){const that=this,displayer=args.displayer;let ret;try{that._calc_states_and_moves_seq(),that.set_status("solved","Solved"),ret=that._display_specific_sol(that._pre_expand_states_and_moves_seq,displayer)}catch(e){return}return ret}display_expanded_moves_solution(args){return this._calc_expanded_seq(),this.set_status("solved","Solved"),this._display_specific_sol(this._post_expand_states_and_moves_seq,args.displayer)}calc_expanded_move(idx){const states_and_moves_sequence=this.proto_states_and_moves_seq;return states_and_moves_sequence[idx].exp||(states_and_moves_sequence[idx].exp=fc_solve_expand_move(8,4,states_and_moves_sequence[idx-1].str,states_and_moves_sequence[idx].m,states_and_moves_sequence[idx+1].str)),states_and_moves_sequence[idx].exp}generic_display_sol(args){return args.expand?this.display_expanded_moves_solution(args):this.display_solution(args)}get_num_freecells(){return freecell_solver_user_get_num_freecells(this.obj)}get_num_stacks(){return freecell_solver_user_get_num_stacks(this.obj)}_calc_states_and_moves_seq(){const that=this;if(that._pre_expand_states_and_moves_seq)return;const states_and_moves_sequence=[];function _out_state(s){states_and_moves_sequence.push({type:"s",str:s})}function get_state_str(){return freecell_solver_user_current_state_stringify(that.obj,that._state_string_buffer,1,0,1),fc_solve_Pointer_stringify(that._state_string_buffer)}let move_ret_code;_out_state(get_state_str());const move_buffer=alloc_wrap(128,"a buffer for the move","maven");for(;0===(move_ret_code=freecell_solver_user_get_next_move(that.obj,move_buffer));){const state_as_string=get_state_str();freecell_solver_user_stringify_move_ptr(that.obj,that._move_string_buffer,move_buffer,0);const move_as_string=fc_solve_Pointer_stringify(that._move_string_buffer);states_and_moves_sequence.push({exp:null,is_exp:!1,m:{str:move_as_string,type:"m"},type:"m"}),_out_state(state_as_string)}that.proto_states_and_moves_seq=states_and_moves_sequence,that._pre_expand_states_and_moves_seq=states_and_moves_sequence.map(item=>"m"===item.type?item.m:item),that._post_expand_states_and_moves_seq=null,c_free(move_buffer),freecell_solver_user_free(that.obj),that.obj=0,c_free(that._state_string_buffer),that._state_string_buffer=0,c_free(that._move_string_buffer),that._move_string_buffer=0}_calc_expanded_seq(){const that=this;if(that._post_expand_states_and_moves_seq)return;that._calc_states_and_moves_seq();const states_and_moves_sequence=that.proto_states_and_moves_seq,new_array=[states_and_moves_sequence[0]];for(let i=1;i<states_and_moves_sequence.length-1;i+=2)Array.prototype.push.apply(new_array,that.calc_expanded_move(i)),new_array.push(states_and_moves_sequence[i+1]);that._post_expand_states_and_moves_seq=new_array}_display_specific_sol(seq,displayer){let out_buffer="";function my_append(str){out_buffer+=str}my_append("-=-=-=-=-=-=-=-=-=-=-=-\n\n");for(const x of seq){const t_=x.type;my_append(x.str+("s"===t_?"\n\n====================\n\n":"\n\n"))}return this.unicode_preprocess(out_buffer.replace(remove_trailing_space_re,""),displayer)}_increase_iters_limit(){this.current_iters_limit+=iters_step,freecell_solver_user_limit_iterations_long(this.obj,this.current_iters_limit)}_process_board_string(proto_board_string){return proto_board_string.match(/\n$/)?proto_board_string+"":proto_board_string+"\n"}_stringify_possibly_null_ptr(s_ptr){return s_ptr?fc_solve_Pointer_stringify(s_ptr):""}_initialize_obj(obj){const that=this,cmd_line_preset=that.cmd_line_preset;try{if("default"!==cmd_line_preset){const error_string_ptr_buf=alloc_wrap(128,"error string buffer","Foo"),preset_ret=freecell_solver_user_cmd_line_read_cmd_line_preset(obj,cmd_line_preset,0,error_string_ptr_buf,0,null),error_string_ptr=fc_solve_getValue(error_string_ptr_buf,"*"),error_string=that._stringify_possibly_null_ptr(error_string_ptr);if(c_free(error_string_ptr),c_free(error_string_ptr_buf),0!==preset_ret)throw alert("Failed to load command line preset '"+cmd_line_preset+"'. Problem is: «"+error_string+"». Should not happen."),"Foo"}if(that.string_params){const error_string_ptr_buf=alloc_wrap(128,"error string buffer","Engo"),string_params_file_path="/string-params.fc-solve.txt";fc_solve_FS_writeFile(string_params_file_path,that.string_params,{});const args_buf=alloc_wrap(8,"args buf","Seed"),read_from_file_str_ptr=fc_solve_allocate_i8(fc_solve_intArrayFromString("--read-from-file")),arg_str_ptr=fc_solve_allocate_i8(fc_solve_intArrayFromString("0,"+string_params_file_path));fc_solve_setValue(args_buf,read_from_file_str_ptr,"*"),fc_solve_setValue(args_buf+4,arg_str_ptr,"*");const last_arg_ptr=alloc_wrap(4,"last_arg_ptr","cherry"),args_ret_code=freecell_solver_user_cmd_line_parse_args_with_file_nesting_count(obj,2,args_buf,0,0,0,0,error_string_ptr_buf,last_arg_ptr,-1,0);c_free(last_arg_ptr),c_free(args_buf);const error_string_ptr=fc_solve_getValue(error_string_ptr_buf,"*"),error_string=that._stringify_possibly_null_ptr(error_string_ptr);if(c_free(error_string_ptr),c_free(error_string_ptr_buf),0!==args_ret_code)throw alert("Failed to process user-specified command line arguments. Problem is: «"+error_string+"»."),"Foo"}return 0}catch(e){return that.set_status("error","Error"),-1}}};class MSRand{constructor(args){this.gamenumber=args.gamenumber,this.rander=fc_solve__hll_ms_rand__get_singleton(),fc_solve__hll_ms_rand__init(this.rander,""+this.gamenumber)}max_rand(mymax){return fc_solve__hll_ms_rand__mod_rand(this.rander,mymax)}shuffle(deck){if(deck.length){let i=deck.length;for(;--i;){const j=this.max_rand(i+1),tmp=deck[i];deck[i]=deck[j],deck[j]=tmp}}return deck}}exports.deal_ms_fc_board=function(seed){const randomizer=new MSRand({gamenumber:seed}),columns=prange_1.perl_range(0,7).map(()=>[]);let deck=prange_1.perl_range(0,51);randomizer.shuffle(deck),deck=deck.reverse();for(let i=0;i<52;i++)columns[i%8].push(deck[i]);function render_card(card){const suit=card%4,rank=Math.floor(card/4);return"A23456789TJQK".charAt(rank)+"CDHS".charAt(suit)}return columns.map(function(col){return": "+col.map(render_card).join(" ")+"\n"}).join("")};exports.Freecell_Deal_Finder=class{constructor(args){this.obj=fc_solve_user__find_deal__alloc()}fill(str){fc_solve_user__find_deal__fill(this.obj,str)}release(){fc_solve_user__find_deal__free(this.obj)}run(abs_start,abs_end_param,update_cb){const CHUNK=bigInt(1e6);this.CHUNKM=CHUNK.add(bigInt.minusOne);const start=bigInt(abs_start),abs_end=bigInt(abs_end_param);this.abs_end=abs_end,this.start=start,this.update_cb=update_cb}cont(){const that=this,abs_end=that.abs_end;if(that.start.lesser(abs_end)){that.update_cb({start:that.start});let end=that.start.add(that.CHUNKM);end.gt(abs_end)&&(end=abs_end);const result=fc_solve_user__find_deal__run(that.obj,that.start.toString(),end.toString());return"-1"!==result?{found:!0,result:result}:(that.start=end.add(bigInt.one),{found:!1,cont:!0})}return{found:!1,cont:!1}}}});