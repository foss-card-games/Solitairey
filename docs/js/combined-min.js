if(typeof YUI!="undefined"){YUI._YUI=YUI}var YUI=function(){var c=0,f=this,b=arguments,a=b.length,e=function(h,g){return(h&&h.hasOwnProperty&&(h instanceof g))},d=(typeof YUI_config!=="undefined")&&YUI_config;if(!(e(f,YUI))){f=new YUI({base:"js/yui-unpack/yui/build/"})}else{f._init();if(YUI.GlobalConfig){f.applyConfig(YUI.GlobalConfig)}if(d){f.applyConfig(d)}if(!a){f._afterConfig();f._setup()}}if(a){for(;c<a;c++){f.applyConfig(b[c])}f._afterConfig();f._setup()}f.instanceOf=e;return f};(function(){var r,b,s="3.18.1",j=".",p="http://yui.yahooapis.com/",v="yui3-js-enabled",e="yui3-css-stamp",n=function(){},i=Array.prototype.slice,t={"io.xdrReady":1,"io.xdrResponse":1,"SWF.eventHandler":1},h=(typeof window!="undefined"),g=(h)?window:null,x=(h)?g.document:null,f=x&&x.documentElement,a=f&&f.className,c={},k=new Date().getTime(),o=function(B,A,z,y){if(B&&B.addEventListener){B.addEventListener(A,z,y)}else{if(B&&B.attachEvent){B.attachEvent("on"+A,z)}}},w=function(C,B,A,y){if(C&&C.removeEventListener){try{C.removeEventListener(B,A,y)}catch(z){}}else{if(C&&C.detachEvent){C.detachEvent("on"+B,A)}}},d=function(){YUI.Env.DOMReady=true;if(h){w(x,"DOMContentLoaded",d)}},u=function(){YUI.Env.windowLoaded=true;YUI.Env.DOMReady=true;if(h){w(window,"load",u)}},l=function(D,C){var z=D.Env._loader,B=["loader-base"],y=YUI.Env,A=y.mods;if(z){z.ignoreRegistered=false;z.onEnd=null;z.data=null;z.required=[];z.loadType=null}else{z=new D.Loader(D.config);D.Env._loader=z}if(A&&A.loader){B=[].concat(B,YUI.Env.loaderExtras)}YUI.Env.core=D.Array.dedupe([].concat(YUI.Env.core,B));return z},q=function(A,z){for(var y in z){if(z.hasOwnProperty(y)){A[y]=z[y]}}},m={success:true};if(f&&a.indexOf(v)==-1){if(a){a+=" "}a+=v;f.className=a}if(s.indexOf("@")>-1){s="3.5.0"}r={applyConfig:function(F){F=F||n;var A,D,C=this.config,E=C.modules,z=C.groups,B=C.aliases,y=this.Env._loader;for(D in F){if(F.hasOwnProperty(D)){A=F[D];if(E&&D=="modules"){q(E,A)}else{if(B&&D=="aliases"){q(B,A)}else{if(z&&D=="groups"){q(z,A)}else{if(D=="win"){C[D]=(A&&A.contentWindow)||A;C.doc=C[D]?C[D].document:null}else{if(D=="_yuid"){}else{C[D]=A}}}}}}}if(y){y._config(F)}},_config:function(y){this.applyConfig(y)},_init:function(){var B,A,C=this,y=YUI.Env,z=C.Env,D;C.version=s;if(!z){C.Env={core:["get","features","intl-base","yui-log","yui-later","loader-base","loader-rollup","loader-yui3"],loaderExtras:["loader-rollup","loader-yui3"],mods:{},versions:{},base:p,cdn:p+s+"/",_idx:0,_used:{},_attached:{},_exported:{},_missed:[],_yidx:0,_uidx:0,_guidp:"y",_loaded:{},_BASE_RE:/(?:\?(?:[^&]*&)*([^&]*))?\b(yui(?:-\w+)?)\/\2(?:-(min|debug))?\.js/,parseBasePath:function(I,G){var E=I.match(G),H,F;if(E){H=RegExp.leftContext||I.slice(0,I.indexOf(E[0]));F=E[3];if(E[1]){H+="?"+E[1]}H={filter:F,path:H}}return H},getBase:y&&y.getBase||function(I){var G=(x&&x.getElementsByTagName("script"))||[],J=z.cdn,F,H,E,K;for(H=0,E=G.length;H<E;++H){K=G[H].src;if(K){F=C.Env.parseBasePath(K,I);if(F){B=F.filter;J=F.path;break}}}return J}};z=C.Env;z._loaded[s]={};if(y&&C!==YUI){z._yidx=++y._yidx;z._guidp=("yui_"+s+"_"+z._yidx+"_"+k).replace(/[^a-z0-9_]+/g,"_")}else{if(YUI._YUI){y=YUI._YUI.Env;z._yidx+=y._yidx;z._uidx+=y._uidx;for(D in y){if(!(D in z)){z[D]=y[D]}}delete YUI._YUI}}C.id=C.stamp(C);c[C.id]=C}C.constructor=YUI;C.config=C.config||{bootstrap:true,cacheUse:true,debug:true,doc:x,fetchCSS:true,throwFail:true,useBrowserConsole:true,useNativeES5:true,win:g};if(x&&!x.getElementById(e)){A=x.createElement("div");A.innerHTML='<div id="'+e+'" style="position: absolute !important; visibility: hidden !important"></div>';YUI.Env.cssStampEl=A.firstChild;if(x.body){x.body.appendChild(YUI.Env.cssStampEl)}else{f.insertBefore(YUI.Env.cssStampEl,f.firstChild)}}else{if(x&&x.getElementById(e)&&!YUI.Env.cssStampEl){YUI.Env.cssStampEl=x.getElementById(e)}}C.config.lang=C.config.lang||"en-US";C.config.base=YUI.config.base||(YUI.config.defaultBase&&YUI.config.root&&YUI.config.defaultBase+YUI.config.root)||C.Env.getBase(C.Env._BASE_RE);if(!B||(!("mindebug").indexOf(B))){B="min"}B=(B)?"-"+B:B;C.config.loaderPath=YUI.config.loaderPath||"loader/loader"+B+".js"},_afterConfig:function(){var y=this;if(!y.config.hasOwnProperty("global")){y.config.global=Function("return this")()}},_setup:function(){var z,D=this,y=[],B=YUI.Env.mods,C=D.config.extendedCore||[],A=D.config.core||[].concat(YUI.Env.core).concat(C);for(z=0;z<A.length;z++){if(B[A[z]]){y.push(A[z])}}D._attach(["yui-base"]);D._attach(y);if(D.Loader){l(D)}},applyTo:function(E,D,A){if(!(D in t)){this.log(D+": applyTo not allowed","warn","yui");return null}var z=c[E],C,y,B;if(z){C=D.split(".");y=z;for(B=0;B<C.length;B=B+1){y=y[C[B]];if(!y){this.log("applyTo not found: "+D,"warn","yui")}}return y&&y.apply(z,A)}return null},add:function(A,H,G,z){z=z||{};var F=YUI.Env,I={name:A,fn:H,version:G,details:z},C={},J,E,y,D,B=F.versions;F.mods[A]=I;B[G]=B[G]||{};B[G][A]=I;for(D in c){if(c.hasOwnProperty(D)){E=c[D];if(!C[E.id]){C[E.id]=true;J=E.Env._loader;if(J){y=J.getModuleInfo(A);if(!y||y.temp){J.addModule(z,A)}}}}}return this},_attach:function(I,aa){var P,ab,Z,T,y,M,C,D=YUI.Env.mods,Q=YUI.Env.aliases,z=this,N,H=YUI.Env._renderedMods,F=z.Env._loader,J=z.Env._attached,S=z.Env._exported,R=I.length,F,G,L,W=[],B,E,X,V,O,A,K;for(P=0;P<R;P++){ab=I[P];Z=D[ab];W.push(ab);if(F&&F.conditions[ab]){for(N in F.conditions[ab]){if(F.conditions[ab].hasOwnProperty(N)){G=F.conditions[ab][N];L=G&&((G.ua&&z.UA[G.ua])||(G.test&&G.test(z)));if(L){W.push(G.name)}}}}}I=W;R=I.length;for(P=0;P<R;P++){if(!J[I[P]]){ab=I[P];Z=D[ab];if(Q&&Q[ab]&&!Z){z._attach(Q[ab]);continue}if(!Z){V=F&&F.getModuleInfo(ab);if(V){Z=V;aa=true}if(!aa&&ab){if((ab.indexOf("skin-")===-1)&&(ab.indexOf("css")===-1)){z.Env._missed.push(ab);z.Env._missed=z.Array.dedupe(z.Env._missed);z.message("NOT loaded: "+ab,"warn","yui")}}}else{J[ab]=true;for(N=0;N<z.Env._missed.length;N++){if(z.Env._missed[N]===ab){z.message("Found: "+ab+" (was reported as missing earlier)","warn","yui");z.Env._missed.splice(N,1)}}if(F&&!F._canBeAttached(ab)){z.log("Failed to attach module "+ab,"warn","yui");return true}if(F&&H&&H[ab]&&H[ab].temp){F.getRequires(H[ab]);y=[];V=F.getModuleInfo(ab);for(N in V.expanded_map){if(V.expanded_map.hasOwnProperty(N)){y.push(N)}}z._attach(y)}T=Z.details;y=T.requires;E=T.es;M=T.use;C=T.after;if(T.lang){y=y||[];y.unshift("intl")}if(y){X=y.length;for(N=0;N<X;N++){if(!J[y[N]]){if(!z._attach(y)){return false}break}}}if(C){for(N=0;N<C.length;N++){if(!J[C[N]]){if(!z._attach(C,true)){return false}break}}}if(Z.fn){B=[z,ab];if(E){K={};A={};B.push(K,A);if(y){X=y.length;for(N=0;N<X;N++){K[y[N]]=S.hasOwnProperty(y[N])?S[y[N]]:z}}}if(z.config.throwFail){A=Z.fn.apply(E?undefined:Z,B)}else{try{A=Z.fn.apply(E?undefined:Z,B)}catch(U){z.error("Attach error: "+ab,U,ab);return false}}if(E){S[ab]=A;O=Z.details.condition;if(O&&O.when==="instead"){S[O.trigger]=A}}}if(M){for(N=0;N<M.length;N++){if(!J[M[N]]){if(!z._attach(M)){return false}break}}}}}}return true},_delayCallback:function(y,B){var A=this,z=["event-base"];B=(A.Lang.isObject(B)?B:{event:B});if(B.event==="load"){z.push("event-synthetic")}A.log("Delaying use callback until: "+B.event,"info","yui");return function(){A.log("Use callback fired, waiting on delay","info","yui");var C=arguments;A._use(z,function(){A.log("Delayed use wrapper callback after dependencies","info","yui");A.on(B.event,function(){C[1].delayUntil=B.event;A.log("Delayed use callback done after "+B.event,"info","yui");y.apply(A,C)},B.args)})}},use:function(){var A=i.call(arguments,0),E=A[A.length-1],D=this,C=0,z,y=D.Env,B=true;if(D.Lang.isFunction(E)){A.pop();if(D.config.delayUntil){E=D._delayCallback(E,D.config.delayUntil)}}else{E=null}if(D.Lang.isArray(A[0])){A=A[0]}if(D.config.cacheUse){while((z=A[C++])){if(!y._attached[z]){B=false;break}}if(B){if(A.length){D.log("already provisioned: "+A,"info","yui")}D._notify(E,m,A);return D}}if(D._loading){D._useQueue=D._useQueue||new D.Queue();D._useQueue.add([A,E])}else{D._use(A,function(G,F){G._notify(E,F,A)})}return D},require:function(){var y=i.call(arguments),z;if(typeof y[y.length-1]==="function"){z=y.pop();y.push(function(D){var A,B=y.length,E=D.Env._exported,C={};for(A=0;A<B;A++){if(E.hasOwnProperty(y[A])){C[y[A]]=E[y[A]]}}z.call(undefined,D,C)})}this.use.apply(this,y)},_notify:function(B,y,z){if(!y.success&&this.config.loadErrorFn){this.config.loadErrorFn.call(this,this,B,y,z)}else{if(B){if(this.Env._missed&&this.Env._missed.length){y.msg="Missing modules: "+this.Env._missed.join();y.success=false}if(this.config.throwFail){B(this,y)}else{try{B(this,y)}catch(A){this.error("use callback error",A,z)}}}}},_use:function(A,C){if(!this.Array){this._attach(["yui-base"])}var P,H,Q,z=this,R=YUI.Env,B=R.mods,y=z.Env,E=y._used,O=R.aliases,L=R._loaderQueue,U=A[0],G=z.Array,S=z.config,F=S.bootstrap,M=[],N,J=[],T=true,D=S.fetchCSS,K=function(aa,ad){var Y=0,ac=[],W,Z,X,ab,V;if(!aa.length){return}if(O){Z=aa.length;for(Y=0;Y<Z;Y++){if(O[aa[Y]]&&!B[aa[Y]]){ac=[].concat(ac,O[aa[Y]])}else{ac.push(aa[Y])}}aa=ac}Z=aa.length;for(Y=0;Y<Z;Y++){W=aa[Y];if(!ad){J.push(W)}if(E[W]){continue}X=B[W];ab=null;V=null;if(X){E[W]=true;ab=X.details.requires;V=X.details.use}else{if(!R._loaded[s][W]){M.push(W)}else{E[W]=true}}if(ab&&ab.length){K(ab)}if(V&&V.length){K(V,1)}}},I=function(Z){var X=Z||{success:true,msg:"not dynamic"},W,V,Y=true,aa=X.data;z._loading=false;if(aa){V=M;M=[];J=[];K(aa);W=M.length;if(W){if([].concat(M).sort().join()==V.sort().join()){W=false}}}if(W&&aa){z._loading=true;z._use(M,function(){z.log("Nested use callback: "+aa,"info","yui");if(z._attach(aa)){z._notify(C,X,aa)}})}else{if(aa){Y=z._attach(aa)}if(Y){z._notify(C,X,A)}}if(z._useQueue&&z._useQueue.size()&&!z._loading){z._use.apply(z,z._useQueue.next())}};if(U==="*"){A=[];for(N in B){if(B.hasOwnProperty(N)){A.push(N)}}T=z._attach(A);if(T){I()}return z}if((B.loader||B["loader-base"])&&!z.Loader){z.log("Loader was found in meta, but it is not attached. Attaching..","info","yui");z._attach(["loader"+((!B.loader)?"-base":"")])}if(F&&z.Loader&&A.length){z.log("Using loader to expand dependencies","info","yui");H=l(z);H.require(A);H.ignoreRegistered=true;H._boot=true;H.calculate(null,(D)?null:"js");A=H.sorted;H._boot=false}K(A);P=M.length;if(P){M=G.dedupe(M);P=M.length;z.log("Modules missing: "+M+", "+M.length,"info","yui")}if(F&&P&&z.Loader){z.log("Using Loader","info","yui");z._loading=true;H=l(z);H.onEnd=I;H.context=z;H.data=A;H.ignoreRegistered=false;H.require(M);H.insert(null,(D)?null:"js")}else{if(F&&P&&z.Get&&!y.bootstrapped){z._loading=true;Q=function(){z._loading=false;L.running=false;y.bootstrapped=true;R._bootstrapping=false;if(z._attach(["loader"])){z._use(A,C)}};if(R._bootstrapping){z.log("Waiting for loader","info","yui");L.add(Q)}else{R._bootstrapping=true;z.log("Fetching loader: "+S.base+S.loaderPath,"info","yui");z.Get.script(S.base+S.loaderPath,{onEnd:Q})}}else{z.log("Attaching available dependencies: "+A,"info","yui");T=z._attach(A);if(T){I()}}}return z},namespace:function(){var z=arguments,D,B=0,A,C,y;for(;B<z.length;B++){D=this;y=z[B];if(y.indexOf(j)>-1){C=y.split(j);for(A=(C[0]=="YAHOO")?1:0;A<C.length;A++){D[C[A]]=D[C[A]]||{};D=D[C[A]]}}else{D[y]=D[y]||{};D=D[y]}}return D},log:n,message:n,dump:function(y){return""+y},error:function(C,z,B){var A=this,y;if(A.config.errorFn){y=A.config.errorFn.apply(A,arguments)}if(!y){throw (z||new Error(C))}else{A.message(C,"error",""+B)}return A},guid:function(y){var z=this.Env._guidp+"_"+(++this.Env._uidx);return(y)?(y+z):z},stamp:function(A,B){var y;if(!A){return A}if(A.uniqueID&&A.nodeType&&A.nodeType!==9){y=A.uniqueID}else{y=(typeof A==="string")?A:A._yuid}if(!y){y=this.guid();if(!B){try{A._yuid=y}catch(z){y=null}}}return y},destroy:function(){var y=this;if(y.Event){y.Event._unload()}delete c[y.id];delete y.Env;delete y.config}};YUI.prototype=r;for(b in r){if(r.hasOwnProperty(b)){YUI[b]=r[b]}}YUI.applyConfig=function(y){if(!y){return}if(YUI.GlobalConfig){this.prototype.applyConfig.call(this,YUI.GlobalConfig)}this.prototype.applyConfig.call(this,y);YUI.GlobalConfig=this.config};YUI._init();if(h){o(x,"DOMContentLoaded",d);o(window,"load",u)}else{d();u()}YUI.Env.add=o;YUI.Env.remove=w;if(typeof exports=="object"){exports.YUI=YUI;YUI.setLoadHook=function(y){YUI._getLoadHook=y};YUI._getLoadHook=null}YUI.Env[s]={}}());YUI.add("yui-base",function(b,i){var k=b.Lang||(b.Lang={}),p=String.prototype,m=Object.prototype.toString,a={"undefined":"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"},c=/\{\s*([^|}]+?)\s*(?:\|([^}]*))?\s*\}/g,x="\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF",d="[\x09-\x0D\x20\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+",v=new RegExp("^"+d),y=new RegExp(d+"$"),t=new RegExp(v.source+"|"+y.source,"g"),f=/\{\s*\[(?:native code|function)\]\s*\}/i;k._isNative=function(A){return !!(b.config.useNativeES5&&A&&f.test(A))};k.isArray=k._isNative(Array.isArray)?Array.isArray:function(A){return k.type(A)==="array"};k.isBoolean=function(A){return typeof A==="boolean"};k.isDate=function(A){return k.type(A)==="date"&&A.toString()!=="Invalid Date"&&!isNaN(A)};k.isFunction=function(A){return k.type(A)==="function"};k.isNull=function(A){return A===null};k.isNumber=function(A){return typeof A==="number"&&isFinite(A)};k.isObject=function(C,B){var A=typeof C;return(C&&(A==="object"||(!B&&(A==="function"||k.isFunction(C)))))||false};k.isRegExp=function(A){return k.type(A)==="regexp"};k.isString=function(A){return typeof A==="string"};k.isUndefined=function(A){return typeof A==="undefined"};k.isValue=function(B){var A=k.type(B);switch(A){case"number":return isFinite(B);case"null":case"undefined":return false;default:return !!A}};k.now=Date.now||function(){return new Date().getTime()};k.sub=function(A,C){function B(F,E){var D;if(typeof F[E]!=="undefined"){return F[E]}E=E.split(".");D=E.slice(1).join(".");E=E[0];if(D&&typeof F[E]==="object"&&F[E]!==null){return B(F[E],D)}}return A.replace?A.replace(c,function(D,E){var F=E.indexOf(".")>-1?B(C,E):C[E];return typeof F==="undefined"?D:F}):A};k.trim=k._isNative(p.trim)&&!x.trim()?function(A){return A&&A.trim?A.trim():A}:function(A){try{return A.replace(t,"")}catch(B){return A}};k.trimLeft=k._isNative(p.trimLeft)&&!x.trimLeft()?function(A){return A.trimLeft()}:function(A){return A.replace(v,"")};k.trimRight=k._isNative(p.trimRight)&&!x.trimRight()?function(A){return A.trimRight()}:function(A){return A.replace(y,"")};k.type=function(A){return a[typeof A]||a[m.call(A)]||(A?"object":"null")};var g=b.Lang,s=Array.prototype,q=Object.prototype.hasOwnProperty;function l(C,F,E){var B,A;F||(F=0);if(E||l.test(C)){try{return s.slice.call(C,F)}catch(D){A=[];for(B=C.length;F<B;++F){A.push(C[F])}return A}}return[C]}b.Array=l;l.dedupe=g._isNative(Object.create)?function(F){var E=Object.create(null),C=[],B,D,A;for(B=0,A=F.length;B<A;++B){D=F[B];if(!E[D]){E[D]=1;C.push(D)}}return C}:function(F){var E={},C=[],B,D,A;for(B=0,A=F.length;B<A;++B){D=F[B];if(!q.call(E,D)){E[D]=1;C.push(D)}}return C};l.each=l.forEach=g._isNative(s.forEach)?function(C,A,B){s.forEach.call(C||[],A,B||b);return b}:function(E,C,D){for(var B=0,A=(E&&E.length)||0;B<A;++B){if(B in E){C.call(D||b,E[B],B,E)}}return b};l.hash=function(D,B){var E={},F=(B&&B.length)||0,C,A;for(C=0,A=D.length;C<A;++C){if(C in D){E[D[C]]=F>C&&C in B?B[C]:true}}return E};l.indexOf=g._isNative(s.indexOf)?function(C,A,B){return s.indexOf.call(C,A,B)}:function(D,B,C){var A=D.length;C=+C||0;C=(C>0||-1)*Math.floor(Math.abs(C));if(C<0){C+=A;if(C<0){C=0}}for(;C<A;++C){if(C in D&&D[C]===B){return C}}return -1};l.numericSort=function(B,A){return B-A};l.some=g._isNative(s.some)?function(C,A,B){return s.some.call(C,A,B)}:function(E,C,D){for(var B=0,A=E.length;B<A;++B){if(B in E&&C.call(D,E[B],B,E)){return true}}return false};l.test=function(C){var A=0;if(g.isArray(C)){A=1}else{if(g.isObject(C)){try{if("length" in C&&!C.tagName&&!(C.scrollTo&&C.document)&&!C.apply){A=2}}catch(B){}}}return A};function w(){this._init();this.add.apply(this,arguments)}w.prototype={_init:function(){this._q=[]},next:function(){return this._q.shift()},last:function(){return this._q.pop()},add:function(){this._q.push.apply(this._q,arguments);return this},size:function(){return this._q.length}};b.Queue=w;YUI.Env._loaderQueue=YUI.Env._loaderQueue||new w();var o="__",q=Object.prototype.hasOwnProperty,n=b.Lang.isObject;b.cached=function(C,A,B){A||(A={});return function(D){var E=arguments.length>1?Array.prototype.join.call(arguments,o):String(D);if(!(E in A)||(B&&A[E]==B)){A[E]=C.apply(C,arguments)}return A[E]}};b.getLocation=function(){var A=b.config.win;return A&&A.location};b.merge=function(){var D=0,B=arguments.length,A={},C,E;for(;D<B;++D){E=arguments[D];for(C in E){if(q.call(E,C)){A[C]=E[C]}}}return A};b.mix=function(A,B,H,C,E,I){var F,L,K,D,M,G,J;if(!A||!B){return A||b}if(E){if(E===2){b.mix(A.prototype,B.prototype,H,C,0,I)}K=E===1||E===3?B.prototype:B;J=E===1||E===4?A.prototype:A;if(!K||!J){return A}}else{K=B;J=A}F=H&&!I;if(C){for(D=0,G=C.length;D<G;++D){M=C[D];if(!q.call(K,M)){continue}L=F?false:M in J;if(I&&L&&n(J[M],true)&&n(K[M],true)){b.mix(J[M],K[M],H,null,0,I)}else{if(H||!L){J[M]=K[M]}}}}else{for(M in K){if(!q.call(K,M)){continue}L=F?false:M in J;if(I&&L&&n(J[M],true)&&n(K[M],true)){b.mix(J[M],K[M],H,null,0,I)}else{if(H||!L){J[M]=K[M]}}}if(b.Object._hasEnumBug){b.mix(J,K,H,b.Object._forceEnum,E,I)}}return A};var g=b.Lang,q=Object.prototype.hasOwnProperty,z,h=b.Object=g._isNative(Object.create)?function(A){return Object.create(A)}:(function(){function A(){}return function(B){A.prototype=B;return new A()}}()),e=h._forceEnum=["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"],u=h._hasEnumBug=!{valueOf:0}.propertyIsEnumerable("valueOf"),r=h._hasProtoEnumBug=(function(){}).propertyIsEnumerable("prototype"),j=h.owns=function(B,A){return !!B&&q.call(B,A)};h.hasKey=j;h.keys=g._isNative(Object.keys)&&!r?Object.keys:function(E){if(!g.isObject(E)){throw new TypeError("Object.keys called on a non-object")}var D=[],C,B,A;if(r&&typeof E==="function"){for(B in E){if(j(E,B)&&B!=="prototype"){D.push(B)}}}else{for(B in E){if(j(E,B)){D.push(B)}}}if(u){for(C=0,A=e.length;C<A;++C){B=e[C];if(j(E,B)){D.push(B)}}}return D};h.values=function(E){var D=h.keys(E),C=0,A=D.length,B=[];for(;C<A;++C){B.push(E[D[C]])}return B};h.size=function(B){try{return h.keys(B).length}catch(A){return 0}};h.hasValue=function(B,A){return b.Array.indexOf(h.values(B),A)>-1};h.each=function(D,B,E,C){var A;for(A in D){if(C||j(D,A)){B.call(E||b,D[A],A,D)}}return b};h.some=function(D,B,E,C){var A;for(A in D){if(C||j(D,A)){if(B.call(E||b,D[A],A,D)){return true}}}return false};h.getValue=function(E,D){if(!g.isObject(E)){return z}var B,C=b.Array(D),A=C.length;for(B=0;E!==z&&B<A;B++){E=E[C[B]]}return E};h.setValue=function(G,E,F){var A,D=b.Array(E),C=D.length-1,B=G;if(C>=0){for(A=0;B!==z&&A<C;A++){B=B[D[A]]}if(B!==z){B[D[A]]=F}else{return z}}return G};h.isEmpty=function(A){return !h.keys(Object(A)).length};YUI.Env.parseUA=function(G){var F=function(J){var K=0;return parseFloat(J.replace(/\./g,function(){return(K++===1)?"":"."}))},I=b.config.win,A=I&&I.navigator,D={ie:0,opera:0,gecko:0,webkit:0,safari:0,chrome:0,mobile:null,air:0,phantomjs:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,silk:0,ubuntu:0,accel:false,webos:0,caja:A&&A.cajaVersion,secure:false,os:null,nodejs:0,winjs:!!((typeof Windows!=="undefined")&&Windows.System),touchEnabled:false},B=G||A&&A.userAgent,H=I&&I.location,C=H&&H.href,E;D.userAgent=B;D.secure=C&&(C.toLowerCase().indexOf("https")===0);if(B){if((/windows|win32/i).test(B)){D.os="windows"}else{if((/macintosh|mac_powerpc/i).test(B)){D.os="macintosh"}else{if((/android/i).test(B)){D.os="android"}else{if((/symbos/i).test(B)){D.os="symbos"}else{if((/linux/i).test(B)){D.os="linux"}else{if((/rhino/i).test(B)){D.os="rhino"}}}}}}if((/KHTML/).test(B)){D.webkit=1}if((/IEMobile|XBLWP7/).test(B)){D.mobile="windows"}if((/Fennec/).test(B)){D.mobile="gecko"}E=B.match(/AppleWebKit\/([^\s]*)/);if(E&&E[1]){D.webkit=F(E[1]);D.safari=D.webkit;if(/PhantomJS/.test(B)){E=B.match(/PhantomJS\/([^\s]*)/);if(E&&E[1]){D.phantomjs=F(E[1])}}if(/ Mobile\//.test(B)||(/iPad|iPod|iPhone/).test(B)){D.mobile="Apple";E=B.match(/OS ([^\s]*)/);if(E&&E[1]){E=F(E[1].replace("_","."))}D.ios=E;D.os="ios";D.ipad=D.ipod=D.iphone=0;E=B.match(/iPad|iPod|iPhone/);if(E&&E[0]){D[E[0].toLowerCase()]=D.ios}}else{E=B.match(/NokiaN[^\/]*|webOS\/\d\.\d/);if(E){D.mobile=E[0]}if(/webOS/.test(B)){D.mobile="WebOS";E=B.match(/webOS\/([^\s]*);/);if(E&&E[1]){D.webos=F(E[1])}}if(/ Android/.test(B)){D.mobile="Android";E=B.match(/Android ([^\s]*);/);if(E&&E[1]){D.android=F(E[1])}}if(/Silk/.test(B)){E=B.match(/Silk\/([^\s]*)/);if(E&&E[1]){D.silk=F(E[1])}if(!D.android){D.android=2.34;D.os="Android"}if(/Accelerated=true/.test(B)){D.accel=true}}}E=B.match(/OPR\/(\d+\.\d+)/);if(E&&E[1]){D.opera=F(E[1])}else{E=B.match(/(Chrome|CrMo|CriOS)\/([^\s]*)/);if(E&&E[1]&&E[2]){D.chrome=F(E[2]);D.safari=0;if(E[1]==="CrMo"){D.mobile="chrome"}}else{E=B.match(/AdobeAIR\/([^\s]*)/);if(E){D.air=E[0]}}}}E=B.match(/Ubuntu\ (\d+\.\d+)/);if(E&&E[1]){D.os="linux";D.ubuntu=F(E[1]);E=B.match(/\ WebKit\/([^\s]*)/);if(E&&E[1]){D.webkit=F(E[1])}E=B.match(/\ Chromium\/([^\s]*)/);if(E&&E[1]){D.chrome=F(E[1])}if(/ Mobile$/.test(B)){D.mobile="Ubuntu"}}if(!D.webkit){if(/Opera/.test(B)){E=B.match(/Opera[\s\/]([^\s]*)/);if(E&&E[1]){D.opera=F(E[1])}E=B.match(/Version\/([^\s]*)/);if(E&&E[1]){D.opera=F(E[1])}if(/Opera Mobi/.test(B)){D.mobile="opera";E=B.replace("Opera Mobi","").match(/Opera ([^\s]*)/);if(E&&E[1]){D.opera=F(E[1])}}E=B.match(/Opera Mini[^;]*/);if(E){D.mobile=E[0]}}else{E=B.match(/MSIE ([^;]*)|Trident.*; rv:([0-9.]+)/);if(E&&(E[1]||E[2])){D.ie=F(E[1]||E[2])}else{E=B.match(/Gecko\/([^\s]*)/);if(E){D.gecko=1;E=B.match(/rv:([^\s\)]*)/);if(E&&E[1]){D.gecko=F(E[1]);if(/Mobile|Tablet/.test(B)){D.mobile="ffos"}}}}}}}if(I&&A&&!(D.chrome&&D.chrome<6)){D.touchEnabled=(("ontouchstart" in I)||(("msMaxTouchPoints" in A)&&(A.msMaxTouchPoints>0)))}if(!G){if(typeof process==="object"){if(process.versions&&process.versions.node){D.os=process.platform;D.nodejs=F(process.versions.node)}}YUI.Env.UA=D}return D};b.UA=YUI.Env.UA||YUI.Env.parseUA();b.UA.compareVersions=function(C,B){var H,G,E,F,D,A;if(C===B){return 0}G=(C+"").split(".");F=(B+"").split(".");for(D=0,A=Math.max(G.length,F.length);D<A;++D){H=parseInt(G[D],10);E=parseInt(F[D],10);isNaN(H)&&(H=0);isNaN(E)&&(E=0);if(H<E){return -1}if(H>E){return 1}}return 0};YUI.Env.aliases={anim:["anim-base","anim-color","anim-curve","anim-easing","anim-node-plugin","anim-scroll","anim-xy"],"anim-shape-transform":["anim-shape"],app:["app-base","app-content","app-transitions","lazy-model-list","model","model-list","model-sync-rest","model-sync-local","router","view","view-node-map"],attribute:["attribute-base","attribute-complex"],"attribute-events":["attribute-observable"],autocomplete:["autocomplete-base","autocomplete-sources","autocomplete-list","autocomplete-plugin"],axes:["axis-numeric","axis-category","axis-time","axis-stacked"],"axes-base":["axis-numeric-base","axis-category-base","axis-time-base","axis-stacked-base"],base:["base-base","base-pluginhost","base-build"],cache:["cache-base","cache-offline","cache-plugin"],charts:["charts-base"],collection:["array-extras","arraylist","arraylist-add","arraylist-filter","array-invoke"],color:["color-base","color-hsl","color-harmony"],controller:["router"],dataschema:["dataschema-base","dataschema-json","dataschema-xml","dataschema-array","dataschema-text"],datasource:["datasource-local","datasource-io","datasource-get","datasource-function","datasource-cache","datasource-jsonschema","datasource-xmlschema","datasource-arrayschema","datasource-textschema","datasource-polling"],datatable:["datatable-core","datatable-table","datatable-head","datatable-body","datatable-base","datatable-column-widths","datatable-message","datatable-mutable","datatable-sort","datatable-datasource"],datatype:["datatype-date","datatype-number","datatype-xml"],"datatype-date":["datatype-date-parse","datatype-date-format","datatype-date-math"],"datatype-number":["datatype-number-parse","datatype-number-format"],"datatype-xml":["datatype-xml-parse","datatype-xml-format"],dd:["dd-ddm-base","dd-ddm","dd-ddm-drop","dd-drag","dd-proxy","dd-constrain","dd-drop","dd-scroll","dd-delegate"],dom:["dom-base","dom-screen","dom-style","selector-native","selector"],editor:["frame","editor-selection","exec-command","editor-base","editor-para","editor-br","editor-bidi","editor-tab","createlink-base"],event:["event-base","event-delegate","event-synthetic","event-mousewheel","event-mouseenter","event-key","event-focus","event-resize","event-hover","event-outside","event-touch","event-move","event-flick","event-valuechange","event-tap"],"event-custom":["event-custom-base","event-custom-complex"],"event-gestures":["event-flick","event-move"],handlebars:["handlebars-compiler"],highlight:["highlight-base","highlight-accentfold"],history:["history-base","history-hash","history-html5"],io:["io-base","io-xdr","io-form","io-upload-iframe","io-queue"],json:["json-parse","json-stringify"],loader:["loader-base","loader-rollup","loader-yui3"],"loader-pathogen-encoder":["loader-base","loader-rollup","loader-yui3","loader-pathogen-combohandler"],node:["node-base","node-event-delegate","node-pluginhost","node-screen","node-style"],pluginhost:["pluginhost-base","pluginhost-config"],querystring:["querystring-parse","querystring-stringify"],recordset:["recordset-base","recordset-sort","recordset-filter","recordset-indexer"],resize:["resize-base","resize-proxy","resize-constrain"],slider:["slider-base","slider-value-range","clickable-rail","range-slider"],template:["template-base","template-micro"],text:["text-accentfold","text-wordbreak"],widget:["widget-base","widget-htmlparser","widget-skin","widget-uievents"]}},"3.18.1",{use:["yui-base","get","features","intl-base","yui-log","yui-later","loader-base","loader-rollup","loader-yui3"]});YUI.add("get",function(e,d){var c=e.Lang,b,f,a;e.Get=f={cssOptions:{attributes:{rel:"stylesheet"},doc:e.config.linkDoc||e.config.doc,pollInterval:50},jsOptions:{autopurge:true,doc:e.config.scriptDoc||e.config.doc},options:{attributes:{charset:"utf-8"},purgethreshold:20},REGEX_CSS:/\.css(?:[?;].*)?$/i,REGEX_JS:/\.js(?:[?;].*)?$/i,_insertCache:{},_pending:null,_purgeNodes:[],_queue:[],abort:function(l){var h,m,j,g,k;e.log("`Y.Get.abort()` is deprecated as of 3.5.0. Use the `abort()` method on the transaction instead.","warn","get");if(!l.abort){m=l;k=this._pending;l=null;if(k&&k.transaction.id===m){l=k.transaction;this._pending=null}else{for(h=0,g=this._queue.length;h<g;++h){j=this._queue[h].transaction;if(j.id===m){l=j;this._queue.splice(h,1);break}}}}l&&l.abort()},css:function(h,g,i){return this._load("css",h,g,i)},js:function(h,g,i){return this._load("js",h,g,i)},load:function(h,g,i){return this._load(null,h,g,i)},_autoPurge:function(g){if(g&&this._purgeNodes.length>=g){e.log("autopurge triggered after "+this._purgeNodes.length+" nodes","info","get");this._purge(this._purgeNodes)}},_getEnv:function(){var h=e.config.doc,g=e.UA;return(this._env={async:(h&&h.createElement("script").async===true)||(g.ie>=10),cssFail:g.gecko>=9||g.compareVersions(g.webkit,535.24)>=0,cssLoad:((!g.gecko&&!g.webkit)||g.gecko>=9||g.compareVersions(g.webkit,535.24)>=0)&&!(g.chrome&&g.chrome<=18),preservesScriptOrder:!!(g.gecko||g.opera||(g.ie&&g.ie>=10))})},_getTransaction:function(m,j){var n=[],k,g,l,h;if(!c.isArray(m)){m=[m]}j=e.merge(this.options,j);j.attributes=e.merge(this.options.attributes,j.attributes);for(k=0,g=m.length;k<g;++k){h=m[k];l={attributes:{}};if(typeof h==="string"){l.url=h}else{if(h.url){e.mix(l,h,false,null,0,true);h=h.url}else{e.log("URL must be a string or an object with a `url` property.","error","get");continue}}e.mix(l,j,false,null,0,true);if(!l.type){if(this.REGEX_CSS.test(h)){l.type="css"}else{if(!this.REGEX_JS.test(h)){e.log("Can't guess file type from URL. Assuming JS: "+h,"warn","get")}l.type="js"}}e.mix(l,l.type==="js"?this.jsOptions:this.cssOptions,false,null,0,true);l.attributes.id||(l.attributes.id=e.guid());if(l.win){e.log("The `win` option is deprecated as of 3.5.0. Use `doc` instead.","warn","get");l.doc=l.win.document}else{l.win=l.doc.defaultView||l.doc.parentWindow}if(l.charset){e.log("The `charset` option is deprecated as of 3.5.0. Set `attributes.charset` instead.","warn","get");l.attributes.charset=l.charset}n.push(l)}return new a(n,j)},_load:function(h,i,g,k){var j;if(typeof g==="function"){k=g;g={}}g||(g={});g.type=h;g._onFinish=f._onTransactionFinish;if(!this._env){this._getEnv()}j=this._getTransaction(i,g);this._queue.push({callback:k,transaction:j});this._next();return j},_onTransactionFinish:function(){f._pending=null;f._next()},_next:function(){var g;if(this._pending){return}g=this._queue.shift();if(g){this._pending=g;g.transaction.execute(g.callback)}},_purge:function(g){var i=this._purgeNodes,k=g!==i,h,j;while(j=g.pop()){if(!j._yuiget_finished){continue}j.parentNode&&j.parentNode.removeChild(j);if(k){h=e.Array.indexOf(i,j);if(h>-1){i.splice(h,1)}}}}};f.script=f.js;f.Transaction=a=function(i,h){var g=this;g.id=a._lastId+=1;g.data=h.data;g.errors=[];g.nodes=[];g.options=h;g.requests=i;g._callbacks=[];g._queue=[];g._reqsWaiting=0;g.tId=g.id;g.win=h.win||e.config.win};a._lastId=0;a.prototype={_state:"new",abort:function(g){this._pending=null;this._pendingCSS=null;this._pollTimer=clearTimeout(this._pollTimer);this._queue=[];this._reqsWaiting=0;this.errors.push({error:g||"Aborted"});this._finish()},execute:function(o){var j=this,n=j.requests,m=j._state,k,h,g,l;if(m==="done"){o&&o(j.errors.length?j.errors:null,j);return}else{o&&j._callbacks.push(o);if(m==="executing"){return}}j._state="executing";j._queue=g=[];if(j.options.timeout){j._timeout=setTimeout(function(){j.abort("Timeout")},j.options.timeout)}j._reqsWaiting=n.length;for(k=0,h=n.length;k<h;++k){l=n[k];if(l.async||l.type==="css"){j._insert(l)}else{g.push(l)}}j._next()},purge:function(){f._purge(this.nodes)},_createNode:function(i,h,k){var j=k.createElement(i),g,l;if(!b){l=k.createElement("div");l.setAttribute("class","a");b=l.className==="a"?{}:{"for":"htmlFor","class":"className"}}for(g in h){if(h.hasOwnProperty(g)){j.setAttribute(b[g]||g,h[g])}}return j},_finish:function(){var m=this.errors.length?this.errors:null,h=this.options,l=h.context||this,k,j,g;if(this._state==="done"){return}this._state="done";for(j=0,g=this._callbacks.length;j<g;++j){this._callbacks[j].call(l,m,this)}k=this._getEventData();if(m){if(h.onTimeout&&m[m.length-1].error==="Timeout"){h.onTimeout.call(l,k)}if(h.onFailure){h.onFailure.call(l,k)}}else{if(h.onSuccess){h.onSuccess.call(l,k)}}if(h.onEnd){h.onEnd.call(l,k)}if(h._onFinish){h._onFinish()}},_getEventData:function(g){if(g){return e.merge(this,{abort:this.abort,purge:this.purge,request:g,url:g.url,win:g.win})}else{return this}},_getInsertBefore:function(j){var k=j.doc,i=j.insertBefore,h,g;if(i){return typeof i==="string"?k.getElementById(i):i}h=f._insertCache;g=e.stamp(k);if((i=h[g])){return i}if((i=k.getElementsByTagName("base")[0])){return(h[g]=i)}i=k.head||k.getElementsByTagName("head")[0];if(i){i.appendChild(k.createTextNode(""));return(h[g]=i.lastChild)}return(h[g]=k.getElementsByTagName("script")[0])},_insert:function(p){var m=f._env,n=this._getInsertBefore(p),j=p.type==="js",i=p.node,q=this,h=e.UA,g,k;if(!i){if(j){k="script"}else{if(!m.cssLoad&&h.gecko){k="style"}else{k="link"}}i=p.node=this._createNode(k,p.attributes,p.doc)}function l(){q._progress("Failed to load "+p.url,p)}function o(){if(g){clearTimeout(g)}q._progress(null,p)}if(j){i.setAttribute("src",p.url);if(p.async){i.async=true}else{if(m.async){i.async=false}if(!m.preservesScriptOrder){this._pending=p}}}else{if(!m.cssLoad&&h.gecko){i.innerHTML=(p.attributes.charset?'@charset "'+p.attributes.charset+'";':"")+'@import "'+p.url+'";'}else{i.setAttribute("href",p.url)}}if(j&&h.ie&&(h.ie<9||(document.documentMode&&document.documentMode<9))){i.onreadystatechange=function(){if(/loaded|complete/.test(i.readyState)){i.onreadystatechange=null;o()}}}else{if(!j&&!m.cssLoad){this._poll(p)}else{if(h.ie>=10){i.onerror=function(){setTimeout(l,0)};i.onload=function(){setTimeout(o,0)}}else{i.onerror=l;i.onload=o}if(!m.cssFail&&!j){g=setTimeout(l,p.timeout||3000)}}}this.nodes.push(i);n.parentNode.insertBefore(i,n)},_next:function(){if(this._pending){return}if(this._queue.length){this._insert(this._queue.shift())}else{if(!this._reqsWaiting){this._finish()}}},_poll:function(o){var r=this,s=r._pendingCSS,m=e.UA.webkit,k,g,h,q,p,l;if(o){s||(s=r._pendingCSS=[]);s.push(o);if(r._pollTimer){return}}r._pollTimer=null;for(k=0;k<s.length;++k){p=s[k];if(m){l=p.doc.styleSheets;h=l.length;q=p.node.href;while(--h>=0){if(l[h].href===q){s.splice(k,1);k-=1;r._progress(null,p);break}}}else{try{g=!!p.node.sheet.cssRules;s.splice(k,1);k-=1;r._progress(null,p)}catch(n){}}}if(s.length){r._pollTimer=setTimeout(function(){r._poll.call(r)},r.options.pollInterval)}},_progress:function(i,h){var g=this.options;if(i){h.error=i;this.errors.push({error:i,request:h});e.log(i,"error","get")}h.node._yuiget_finished=h.finished=true;if(g.onProgress){g.onProgress.call(g.context||this,this._getEventData(h))}if(h.autopurge){f._autoPurge(this.options.purgethreshold);f._purgeNodes.push(h.node)}if(this._pending===h){this._pending=null}this._reqsWaiting-=1;this._next()}}},"3.18.1",{requires:["yui-base"]});YUI.add("features",function(c,b){var d={};c.mix(c.namespace("Features"),{tests:d,add:function(e,f,g){d[e]=d[e]||{};d[e][f]=g},all:function(f,g){var h=d[f],e=[];if(h){c.Object.each(h,function(j,i){e.push(i+":"+(c.Features.test(f,i,g)?1:0))})}return(e.length)?e.join(";"):""},test:function(f,h,g){g=g||[];var e,j,l,k=d[f],i=k&&k[h];if(!i){c.log("Feature test "+f+", "+h+" not found")}else{e=i.result;if(c.Lang.isUndefined(e)){j=i.ua;if(j){e=(c.UA[j])}l=i.test;if(l&&((!j)||e)){e=l.apply(c,g)}i.result=e}}return e}});var a=c.Features.add;a("load","0",{name:"app-transitions-native",test:function(g){var f=g.config.doc,e=f?f.documentElement:null;if(e&&e.style){return("MozTransition" in e.style||"WebkitTransition" in e.style||"transition" in e.style)}return false},trigger:"app-transitions"});a("load","1",{name:"autocomplete-list-keys",test:function(e){return !(e.UA.ios||e.UA.android)},trigger:"autocomplete-list"});a("load","2",{name:"dd-gestures",trigger:"dd-drag",ua:"touchEnabled"});a("load","3",{name:"dom-style-ie",test:function(k){var i=k.Features.test,j=k.Features.add,g=k.config.win,h=k.config.doc,e="documentElement",f=false;j("style","computedStyle",{test:function(){return g&&"getComputedStyle" in g}});j("style","opacity",{test:function(){return h&&"opacity" in h[e].style}});f=(!i("style","opacity")&&!i("style","computedStyle"));return f},trigger:"dom-style"});a("load","4",{name:"editor-para-ie",trigger:"editor-para",ua:"ie",when:"instead"});a("load","5",{name:"event-base-ie",test:function(f){var e=f.config.doc&&f.config.doc.implementation;return(e&&(!e.hasFeature("Events","2.0")))},trigger:"node-base"});a("load","6",{name:"graphics-canvas",test:function(i){var g=i.config.doc,h=i.config.defaultGraphicEngine&&i.config.defaultGraphicEngine=="canvas",f=g&&g.createElement("canvas"),e=(g&&g.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));return(!e||h)&&(f&&f.getContext&&f.getContext("2d"))},trigger:"graphics"});a("load","7",{name:"graphics-canvas-default",test:function(i){var g=i.config.doc,h=i.config.defaultGraphicEngine&&i.config.defaultGraphicEngine=="canvas",f=g&&g.createElement("canvas"),e=(g&&g.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));return(!e||h)&&(f&&f.getContext&&f.getContext("2d"))},trigger:"graphics"});a("load","8",{name:"graphics-svg",test:function(i){var h=i.config.doc,g=!i.config.defaultGraphicEngine||i.config.defaultGraphicEngine!="canvas",f=h&&h.createElement("canvas"),e=(h&&h.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));return e&&(g||!f)},trigger:"graphics"});a("load","9",{name:"graphics-svg-default",test:function(i){var h=i.config.doc,g=!i.config.defaultGraphicEngine||i.config.defaultGraphicEngine!="canvas",f=h&&h.createElement("canvas"),e=(h&&h.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));return e&&(g||!f)},trigger:"graphics"});a("load","10",{name:"graphics-vml",test:function(g){var f=g.config.doc,e=f&&f.createElement("canvas");return(f&&!f.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(!e||!e.getContext||!e.getContext("2d")))},trigger:"graphics"});a("load","11",{name:"graphics-vml-default",test:function(g){var f=g.config.doc,e=f&&f.createElement("canvas");return(f&&!f.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(!e||!e.getContext||!e.getContext("2d")))},trigger:"graphics"});a("load","12",{name:"history-hash-ie",test:function(f){var e=f.config.doc&&f.config.doc.documentMode;return f.UA.ie&&(!("onhashchange" in f.config.win)||!e||e<8)},trigger:"history-hash"});a("load","13",{name:"io-nodejs",trigger:"io-base",ua:"nodejs"});a("load","14",{name:"json-parse-shim",test:function(k){var h=k.config.global.JSON,g=Object.prototype.toString.call(h)==="[object JSON]"&&h,j=k.config.useNativeJSONParse!==false&&!!g;function f(l,e){return l==="ok"?true:e}if(j){try{j=(g.parse('{"ok":false}',f)).ok}catch(i){j=false}}return !j},trigger:"json-parse"});a("load","15",{name:"json-stringify-shim",test:function(j){var g=j.config.global.JSON,f=Object.prototype.toString.call(g)==="[object JSON]"&&g,i=j.config.useNativeJSONStringify!==false&&!!f;if(i){try{i=("0"===f.stringify(0))}catch(h){i=false}}return !i},trigger:"json-stringify"});a("load","16",{name:"scrollview-base-ie",trigger:"scrollview-base",ua:"ie"});a("load","17",{name:"selector-css2",test:function(g){var f=g.config.doc,e=f&&!("querySelectorAll" in f);return e},trigger:"selector"});a("load","18",{name:"transition-timer",test:function(h){var g=h.config.doc,f=(g)?g.documentElement:null,e=true;if(f&&f.style){e=!("MozTransition" in f.style||"WebkitTransition" in f.style||"transition" in f.style)}return e},trigger:"transition"});a("load","19",{name:"widget-base-ie",trigger:"widget-base",ua:"ie"});a("load","20",{name:"yql-jsonp",test:function(e){return(!e.UA.nodejs&&!e.UA.winjs)},trigger:"yql"});a("load","21",{name:"yql-nodejs",trigger:"yql",ua:"nodejs"});a("load","22",{name:"yql-winjs",trigger:"yql",ua:"winjs"})},"3.18.1",{requires:["yui-base"]});YUI.add("intl-base",function(c,b){var a=/[, ]/;c.mix(c.namespace("Intl"),{lookupBestLang:function(h,j){var g,k,d,f;function e(m){var l;for(l=0;l<j.length;l+=1){if(m.toLowerCase()===j[l].toLowerCase()){return j[l]}}}if(c.Lang.isString(h)){h=h.split(a)}for(g=0;g<h.length;g+=1){k=h[g];if(!k||k==="*"){continue}while(k.length>0){d=e(k);if(d){return d}else{f=k.lastIndexOf("-");if(f>=0){k=k.substring(0,f);if(f>=2&&k.charAt(f-2)==="-"){k=k.substring(0,f-2)}}else{break}}}}return""}})},"3.18.1",{requires:["yui-base"]});YUI.add("yui-log",function(e,d){var c=e,f="yui:log",a="undefined",b={debug:1,info:2,warn:4,error:8};c.log=function(j,t,g,r){var n,q,o,l,p,k,i=c,s=i.config,h=(i.fire)?i:YUI.Env.globalEvents;if(s.debug){g=g||"";if(typeof g!=="undefined"){q=s.logExclude;o=s.logInclude;if(o&&!(g in o)){n=1}else{if(o&&(g in o)){n=!o[g]}else{if(q&&(g in q)){n=q[g]}}}if((typeof t==="undefined")){t="info"}i.config.logLevel=i.config.logLevel||"debug";k=b[i.config.logLevel.toLowerCase()];if(t in b&&b[t]<k){n=1}}if(!n){if(s.useBrowserConsole){l=(g)?g+": "+j:j;if(i.Lang.isFunction(s.logFn)){s.logFn.call(i,j,t,g)}else{if(typeof console!==a&&console.log){p=(t&&console[t]&&(t in b))?t:"log";console[p](l)}else{if(typeof opera!==a){opera.postError(l)}}}}if(h&&!r){if(h===i&&(!h.getEvent(f))){h.publish(f,{broadcast:2})}h.fire(f,{msg:j,cat:t,src:g})}}}return i};c.message=function(){return c.log.apply(c,arguments)}},"3.18.1",{requires:["yui-base"]});YUI.add("yui-later",function(c,b){var a=[];c.later=function(k,g,l,h,i){k=k||0;h=(!c.Lang.isUndefined(h))?c.Array(h):a;g=g||c.config.win||c;var j=false,d=(g&&c.Lang.isString(l))?g[l]:l,e=function(){if(!j){if(!d.apply){d(h[0],h[1],h[2],h[3])}else{d.apply(g,h||a)}}},f=(i)?setInterval(e,k):setTimeout(e,k);return{id:f,interval:i,cancel:function(){j=true;if(this.interval){clearInterval(f)}else{clearTimeout(f)}}}};c.Lang.later=c.later},"3.18.1",{requires:["yui-base"]});YUI.add("loader-base",function(d,j){(function(){var J=d.version,F="/build/",G=J+"/",E=d.Env.base,B="gallery-2014.07.31-18-26",D="2in3",C="4",A="2.9.0",H=E+"combo?",I={version:J,root:G,base:d.Env.base,comboBase:H,skin:{defaultSkin:"sam",base:"assets/skins/",path:"skin.css",after:["cssreset","cssfonts","cssgrids","cssbase","cssreset-context","cssfonts-context"]},groups:{},patterns:{}},z=I.groups,y=function(L,P,M){var K=D+"."+(L||C)+"/"+(P||A)+F,N=(M&&M.base)?M.base:E,O=(M&&M.comboBase)?M.comboBase:H;z.yui2.base=N+K;z.yui2.root=K;z.yui2.comboBase=O},x=function(K,M){var L=(K||B)+F,N=(M&&M.base)?M.base:E,O=(M&&M.comboBase)?M.comboBase:H;z.gallery.base=N+L;z.gallery.root=L;z.gallery.comboBase=O};z[J]={};z.gallery={ext:false,combine:true,comboBase:H,update:x,patterns:{"gallery-":{},"lang/gallery-":{},"gallerycss-":{type:"css"}}};z.yui2={combine:true,ext:false,comboBase:H,update:y,patterns:{"yui2-":{configFn:function(K){if(/-skin|reset|fonts|grids|base/.test(K.name)){K.type="css";K.path=K.path.replace(/\.js/,".css");K.path=K.path.replace(/\/yui2-skin/,"/assets/skins/sam/yui2-skin")}}}}};x();y();if(YUI.Env[J]){d.mix(I,YUI.Env[J],false,["modules","groups","skin"],0,true)}YUI.Env[J]=I}());var f={},c=[],o=1024,a=YUI.Env,q=a._loaded,r="css",l="js",w="intl",i="sam",t=d.version,v="",e=d.Object,s=e.each,n=d.Array,h=a._loaderQueue,u=a[t],b="skin-",k=d.Lang,p=a.mods,m,g=function(y,z,A,x){var B=y+"/"+z;if(!x){B+="-min"}B+="."+(A||r);return B};if(!YUI.Env._cssLoaded){YUI.Env._cssLoaded={}}d.Env.meta=u;d.Loader=function(y){var x=this;y=y||{};m=u.md5;x.context=d;if(y.doBeforeLoader){y.doBeforeLoader.apply(x,arguments)}x.base=d.Env.meta.base+d.Env.meta.root;x.comboBase=d.Env.meta.comboBase;x.combine=y.base&&(y.base.indexOf(x.comboBase.substr(0,20))>-1);x.comboSep="&";x.maxURLLength=o;x.ignoreRegistered=y.ignoreRegistered;x.root=d.Env.meta.root;x.timeout=0;x.forceMap={};x.allowRollup=false;x.filters={};x.required={};x.patterns={};x.moduleInfo={};x.groups=d.merge(d.Env.meta.groups);x.skin=d.merge(d.Env.meta.skin);x.conditions={};x.config=y;x._internal=true;x._populateConditionsCache();x.loaded=q[t];x.async=true;x._inspectPage();x._internal=false;x._config(y);x.forceMap=(x.force)?d.Array.hash(x.force):{};x.testresults=null;if(d.config.tests){x.testresults=d.config.tests}x.sorted=[];x.dirty=true;x.inserted={};x.skipped={};x.tested={};if(x.ignoreRegistered){x._resetModules()}};d.Loader.prototype={getModuleInfo:function(B){var x=this.moduleInfo[B],A,C,y,z;if(x){return x}A=u.modules;C=a._renderedMods;y=this._internal;if(C&&C.hasOwnProperty(B)&&!this.ignoreRegistered){this.moduleInfo[B]=d.merge(C[B])}else{if(A.hasOwnProperty(B)){this._internal=true;z=this.addModule(A[B],B);if(z&&z.type===r){if(this.isCSSLoaded(z.name,true)){d.log("Found CSS module on page: "+z.name,"info","loader");this.loaded[z.name]=true}}this._internal=y}}return this.moduleInfo[B]},_expandAliases:function(B){var y=[],x=YUI.Env.aliases,A,z;B=d.Array(B);for(A=0;A<B.length;A+=1){z=B[A];y.push.apply(y,x[z]?x[z]:[z])}return y},_populateConditionsCache:function(){var A=u.modules,x=a._conditions,C,z,B,y;if(x&&!this.ignoreRegistered){for(C in x){if(x.hasOwnProperty(C)){this.conditions[C]=d.merge(x[C])}}}else{for(C in A){if(A.hasOwnProperty(C)&&A[C].condition){B=this._expandAliases(A[C].condition.trigger);for(z=0;z<B.length;z+=1){y=B[z];this.conditions[y]=this.conditions[y]||{};this.conditions[y][A[C].name||C]=A[C].condition}}}a._conditions=this.conditions}},_resetModules:function(){var x=this,B,C,A,y,z;for(B in x.moduleInfo){if(x.moduleInfo.hasOwnProperty(B)&&x.moduleInfo[B]){A=x.moduleInfo[B];y=A.name;z=(YUI.Env.mods[y]?YUI.Env.mods[y].details:null);if(z){x.moduleInfo[y]._reset=true;x.moduleInfo[y].requires=z.requires||[];x.moduleInfo[y].optional=z.optional||[];x.moduleInfo[y].supersedes=z.supercedes||[]}if(A.defaults){for(C in A.defaults){if(A.defaults.hasOwnProperty(C)){if(A[C]){A[C]=A.defaults[C]}}}}A.langCache=undefined;A.skinCache=undefined;if(A.skinnable){x._addSkin(x.skin.defaultSkin,A.name)}}}},REGEX_CSS:/\.css(?:[?;].*)?$/i,FILTER_DEFS:{RAW:{searchExp:"-min\\.js",replaceStr:".js"},DEBUG:{searchExp:"-min\\.js",replaceStr:"-debug.js"},COVERAGE:{searchExp:"-min\\.js",replaceStr:"-coverage.js"}},_inspectPage:function(){var z=this,y,x,C,B,A;for(A in p){if(p.hasOwnProperty(A)){y=p[A];if(y.details){x=z.getModuleInfo(y.name);C=y.details.requires;B=x&&x.requires;if(x){if(!x._inspected&&C&&B.length!==C.length){delete x.expanded}}else{x=z.addModule(y.details,A)}x._inspected=true}}}},_requires:function(D,C){var A,E,z,B,y=this.getModuleInfo(D),x=this.getModuleInfo(C);if(!y||!x){return false}E=y.expanded_map;z=y.after_map;if(z&&(C in z)){return true}z=x.after_map;if(z&&(D in z)){return false}B=x.supersedes;if(B){for(A=0;A<B.length;A++){if(this._requires(D,B[A])){return true}}}B=y.supersedes;if(B){for(A=0;A<B.length;A++){if(this._requires(C,B[A])){return false}}}if(E&&(C in E)){return true}if(y.ext&&y.type===r&&!x.ext&&x.type===r){return true}return false},_config:function(y){var B,A,z,E,C,F,I,H=this,G=[],D,x;if(y){for(B in y){if(y.hasOwnProperty(B)){z=y[B];if(B==="require"){H.require(z)}else{if(B==="skin"){if(typeof z==="string"){H.skin.defaultSkin=y.skin;z={defaultSkin:z}}d.mix(H.skin,z,true)}else{if(B==="groups"){for(A in z){if(z.hasOwnProperty(A)){I=A;F=z[A];H.addGroup(F,I);if(F.aliases){for(E in F.aliases){if(F.aliases.hasOwnProperty(E)){H.addAlias(F.aliases[E],E)}}}}}}else{if(B==="modules"){for(A in z){if(z.hasOwnProperty(A)){H.addModule(z[A],A)}}}else{if(B==="aliases"){for(A in z){if(z.hasOwnProperty(A)){H.addAlias(z[A],A)}}}else{if(B==="gallery"){if(this.groups.gallery.update){this.groups.gallery.update(z,y)}}else{if(B==="yui2"||B==="2in3"){if(this.groups.yui2.update){this.groups.yui2.update(y["2in3"],y.yui2,y)}}else{H[B]=z}}}}}}}}}}C=H.filter;if(k.isString(C)){C=C.toUpperCase();H.filterName=C;H.filter=H.FILTER_DEFS[C];if(C==="DEBUG"){H.require("yui-log","dump")}}if(H.filterName&&H.coverage){if(H.filterName==="COVERAGE"&&k.isArray(H.coverage)&&H.coverage.length){for(B=0;B<H.coverage.length;B++){D=H.coverage[B];x=H.getModuleInfo(D);if(x&&x.use){G=G.concat(x.use)}else{G.push(D)}}H.filters=H.filters||{};d.Array.each(G,function(J){H.filters[J]=H.FILTER_DEFS.COVERAGE});H.filterName="RAW";H.filter=H.FILTER_DEFS[H.filterName]}}},formatSkin:function(z,x){var y=b+z;if(x){y=y+"-"+x}return y},_addSkin:function(F,D,E){var B,y,x,z=this.skin,C=D&&this.getModuleInfo(D),A=C&&C.ext;if(D){y=this.formatSkin(F,D);if(!this.getModuleInfo(y)){B=C.pkg||D;x={skin:true,name:y,group:C.group,type:"css",after:z.after,path:(E||B)+"/"+z.base+F+"/"+D+".css",ext:A};if(C.base){x.base=C.base}if(C.configFn){x.configFn=C.configFn}this.addModule(x,y);d.log("Adding skin ("+y+"), "+E+", "+B+", "+x.path,"info","loader")}}return y},addAlias:function(x,y){YUI.Env.aliases[y]=x;this.addModule({name:y,use:x})},addGroup:function(D,A){var C=D.modules,z=this,x=D.defaultBase||d.config.defaultBase,B,y;A=A||D.name;D.name=A;z.groups[A]=D;if(!D.base&&x&&D.root){D.base=x+D.root}if(D.patterns){for(B in D.patterns){if(D.patterns.hasOwnProperty(B)){D.patterns[B].group=A;z.patterns[B]=D.patterns[B]}}}if(C){for(B in C){if(C.hasOwnProperty(B)){y=C[B];if(typeof y==="string"){y={name:B,fullpath:y}}y.group=A;z.addModule(y,B)}}}},addModule:function(O,X){X=X||O.name;if(typeof O==="string"){O={name:X,fullpath:O}}var S,R,P,I,x,J,z,N,y,Q,K,G,D,B,A,W,V,H,C,E,T,M,U=this.moduleInfo[X],F=this.conditions,L;if(U&&U.temp){O=d.merge(U,O)}O.name=X;if(!O||!O.name){return null}if(!O.type){O.type=l;M=O.path||O.fullpath;if(M&&this.REGEX_CSS.test(M)){d.log("Auto determined module type as CSS","warn","loader");O.type=r}}if(!O.path&&!O.fullpath){O.path=g(X,X,O.type)}O.supersedes=O.supersedes||O.use;O.ext=("ext" in O)?O.ext:(this._internal)?false:true;S=O.submodules;this.moduleInfo[X]=O;O.requires=O.requires||[];if(this.requires){for(R=0;R<this.requires.length;R++){O.requires.push(this.requires[R])}}if(O.group&&this.groups&&this.groups[O.group]){T=this.groups[O.group];if(T.requires){for(R=0;R<T.requires.length;R++){O.requires.push(T.requires[R])}}}if(!O.defaults){O.defaults={requires:O.requires?[].concat(O.requires):null,supersedes:O.supersedes?[].concat(O.supersedes):null,optional:O.optional?[].concat(O.optional):null}}if(O.skinnable&&O.ext&&O.temp){C=this._addSkin(this.skin.defaultSkin,X);O.requires.unshift(C)}if(O.requires.length){O.requires=this.filterRequires(O.requires)||[]}if(!O.langPack&&O.lang){K=n(O.lang);for(Q=0;Q<K.length;Q++){W=K[Q];G=this.getLangPackName(W,X);z=this.getModuleInfo(G);if(!z){z=this._addLangPack(W,O,G)}}}if(S){x=O.supersedes||[];P=0;for(R in S){if(S.hasOwnProperty(R)){J=S[R];J.path=J.path||g(X,R,O.type);J.pkg=X;J.group=O.group;if(J.supersedes){x=x.concat(J.supersedes)}z=this.addModule(J,R);x.push(R);if(z.skinnable){O.skinnable=true;H=this.skin.overrides;if(H&&H[R]){for(Q=0;Q<H[R].length;Q++){C=this._addSkin(H[R][Q],R,X);x.push(C)}}C=this._addSkin(this.skin.defaultSkin,R,X);x.push(C)}if(J.lang&&J.lang.length){K=n(J.lang);for(Q=0;Q<K.length;Q++){W=K[Q];G=this.getLangPackName(W,X);D=this.getLangPackName(W,R);z=this.getModuleInfo(G);if(!z){z=this._addLangPack(W,O,G)}B=B||n.hash(z.supersedes);if(!(D in B)){z.supersedes.push(D)}O.lang=O.lang||[];A=A||n.hash(O.lang);if(!(W in A)){O.lang.push(W)}G=this.getLangPackName(v,X);D=this.getLangPackName(v,R);z=this.getModuleInfo(G);if(!z){z=this._addLangPack(W,O,G)}if(!(D in B)){z.supersedes.push(D)}}}P++}}O.supersedes=n.dedupe(x);if(this.allowRollup){O.rollup=(P<4)?P:Math.min(P-1,4)}}N=O.plugins;if(N){for(R in N){if(N.hasOwnProperty(R)){y=N[R];y.pkg=X;y.path=y.path||g(X,R,O.type);y.requires=y.requires||[];y.group=O.group;this.addModule(y,R);if(O.skinnable){this._addSkin(this.skin.defaultSkin,R,X)}}}}if(O.condition){I=this._expandAliases(O.condition.trigger);for(R=0;R<I.length;R++){L=I[R];E=O.condition.when;F[L]=F[L]||{};F[L][X]=O.condition;if(E&&E!=="after"){if(E==="instead"){O.supersedes=O.supersedes||[];O.supersedes.push(L)}}else{O.after=O.after||[];O.after.push(L)}}}if(O.supersedes){O.supersedes=this.filterRequires(O.supersedes)}if(O.after){O.after=this.filterRequires(O.after);O.after_map=n.hash(O.after)}if(O.configFn){V=O.configFn(O);if(V===false){d.log("Config function returned false for "+X+", skipping.","info","loader");delete this.moduleInfo[X];delete a._renderedMods[X];O=null}}if(O){if(!a._renderedMods){a._renderedMods={}}a._renderedMods[X]=d.mix(a._renderedMods[X]||{},O);a._conditions=F}return O},require:function(y){var x=(typeof y==="string")?n(arguments):y;this.dirty=true;this.required=d.merge(this.required,n.hash(this.filterRequires(x)));this._explodeRollups()},_explodeRollups:function(){var F=this,y,E,A,C,D,B,z,x=F.required;if(!F.allowRollup){for(A in x){if(x.hasOwnProperty(A)){y=F.getModule(A);if(y&&y.use){B=y.use.length;for(C=0;C<B;C++){E=F.getModule(y.use[C]);if(E&&E.use){z=E.use.length;for(D=0;D<z;D++){x[E.use[D]]=true}}else{x[y.use[C]]=true}}}}}F.required=x}},filterRequires:function(A){if(A){if(!d.Lang.isArray(A)){A=[A]}A=d.Array(A);var C=[],z,y,B,x;for(z=0;z<A.length;z++){y=this.getModule(A[z]);if(y&&y.use){for(B=0;B<y.use.length;B++){x=this.getModule(y.use[B]);if(x&&x.use&&(x.name!==y.name)){C=d.Array.dedupe([].concat(C,this.filterRequires(x.use)))}else{C.push(y.use[B])}}}else{C.push(A[z])}}A=C}return A},_canBeAttached:function(x){x=this.getModule(x);if(x&&x.test){if(!x.hasOwnProperty("_testResult")){x._testResult=x.test(d)}return x._testResult}return true},getRequires:function(U){if(!U){return c}if(U._parsed){return U.expanded||c}var P,L,O,z,H,F,W,D=this.testresults,X=U.name,E,V=p[X]&&p[X].details,A=U.optionalRequires,R,M,G,I,Q,J,C,S,T,B,K=U.lang||U.intl,N=d.Features&&d.Features.tests.load,x,y;if(U.temp&&V){Q=U;U=this.addModule(V,X);U.group=Q.group;U.pkg=Q.pkg;delete U.expanded}y=!((!this.lang||U.langCache===this.lang)&&(U.skinCache===this.skin.defaultSkin));if(U.expanded&&!y){return U.expanded}if(A){for(P=0,z=A.length;P<z;P++){if(this._canBeAttached(A[P])){U.requires.push(A[P])}}}R=[];x={};I=this.filterRequires(U.requires);if(U.lang){R.unshift("intl");I.unshift("intl");K=true}J=this.filterRequires(U.optional);U._parsed=true;U.langCache=this.lang;U.skinCache=this.skin.defaultSkin;for(P=0;P<I.length;P++){if(!x[I[P]]){R.push(I[P]);x[I[P]]=true;L=this.getModule(I[P]);if(L){H=this.getRequires(L);K=K||(L.expanded_map&&(w in L.expanded_map));for(O=0;O<H.length;O++){R.push(H[O])}}}}I=this.filterRequires(U.supersedes);if(I){for(P=0;P<I.length;P++){if(!x[I[P]]){if(U.submodules){R.push(I[P])}x[I[P]]=true;L=this.getModule(I[P]);if(L){H=this.getRequires(L);K=K||(L.expanded_map&&(w in L.expanded_map));for(O=0;O<H.length;O++){R.push(H[O])}}}}}if(J&&this.loadOptional){for(P=0;P<J.length;P++){if(!x[J[P]]){R.push(J[P]);x[J[P]]=true;L=this.getModuleInfo(J[P]);if(L){H=this.getRequires(L);K=K||(L.expanded_map&&(w in L.expanded_map));for(O=0;O<H.length;O++){R.push(H[O])}}}}}E=this.conditions[X];if(E){U._parsed=false;if(D&&N){s(D,function(Y,aa){var Z=N[aa].name;if(!x[Z]&&N[aa].trigger===X){if(Y&&N[aa]){x[Z]=true;R.push(Z)}}})}else{for(P in E){if(E.hasOwnProperty(P)){if(!x[P]){G=E[P];M=G&&((!G.ua&&!G.test)||(G.ua&&d.UA[G.ua])||(G.test&&G.test(d,I)));if(M){x[P]=true;R.push(P);L=this.getModule(P);if(L){H=this.getRequires(L);for(O=0;O<H.length;O++){R.push(H[O])}}}}}}}}if(U.skinnable){S=this.skin.overrides;for(P in YUI.Env.aliases){if(YUI.Env.aliases.hasOwnProperty(P)){if(d.Array.indexOf(YUI.Env.aliases[P],X)>-1){T=P}}}if(S&&(S[X]||(T&&S[T]))){B=X;if(S[T]){B=T}for(P=0;P<S[B].length;P++){C=this._addSkin(S[B][P],X);if(!this.isCSSLoaded(C,this._boot)){R.push(C)}}}else{C=this._addSkin(this.skin.defaultSkin,X);if(!this.isCSSLoaded(C,this._boot)){R.push(C)}}}U._parsed=false;if(K){if(U.lang&&!U.langPack&&d.Intl){W=d.Intl.lookupBestLang(this.lang||v,U.lang);F=this.getLangPackName(W,X);if(F){R.unshift(F)}}R.unshift(w)}U.expanded_map=n.hash(R);U.expanded=e.keys(U.expanded_map);return U.expanded},isCSSLoaded:function(y,C){if(!y||!YUI.Env.cssStampEl||(!C&&this.ignoreRegistered)){d.log("isCSSLoaded was skipped for "+y,"warn","loader");return false}var B=YUI.Env.cssStampEl,x=false,z=YUI.Env._cssLoaded[y],A=B.currentStyle;if(z!==undefined){return z}B.className=y;if(!A){A=d.config.doc.defaultView.getComputedStyle(B,null)}if(A&&A.display==="none"){x=true}d.log("Has Skin? "+y+" : "+x,"info","loader");B.className="";YUI.Env._cssLoaded[y]=x;return x},getProvides:function(y){var x=this.getModule(y),A,z;if(!x){return f}if(x&&!x.provides){A={};z=x.supersedes;if(z){n.each(z,function(B){d.mix(A,this.getProvides(B))},this)}A[y]=true;x.provides=A}return x.provides},calculate:function(y,x){if(y||x||this.dirty){if(y){this._config(y)}if(!this._init){this._setup()}this._explode();if(this.allowRollup){this._rollup()}else{this._explodeRollups()}this._reduce();this._sort()}},_addLangPack:function(D,x,C){var A=x.name,y,z,B=this.getModuleInfo(C);if(!B){y=g((x.pkg||A),C,l,true);z={path:y,intl:true,langPack:true,ext:x.ext,group:x.group,supersedes:[]};if(x.root){z.root=x.root}if(x.base){z.base=x.base}if(x.configFn){z.configFn=x.configFn}this.addModule(z,C);if(D){d.Env.lang=d.Env.lang||{};d.Env.lang[D]=d.Env.lang[D]||{};d.Env.lang[D][A]=true}}return this.getModuleInfo(C)},_setup:function(){var D=this.moduleInfo,A,B,z,x,y,C;for(A in D){if(D.hasOwnProperty(A)){x=D[A];if(x){x.requires=n.dedupe(x.requires);if(x.lang){C=this.getLangPackName(v,A);this._addLangPack(null,x,C)}}}}y={};if(!this.ignoreRegistered){d.mix(y,a.mods)}if(this.ignore){d.mix(y,n.hash(this.ignore))}for(z in y){if(y.hasOwnProperty(z)){d.mix(y,this.getProvides(z))}}if(this.force){for(B=0;B<this.force.length;B++){if(this.force[B] in y){delete y[this.force[B]]}}}d.mix(this.loaded,y);this._init=true},getLangPackName:function(y,x){return("lang/"+x+((y)?"_"+y:""))},_explode:function(){var D=this.required,x,A,y={},z=this,B,C;z.dirty=false;z._explodeRollups();D=z.required;for(B in D){if(D.hasOwnProperty(B)){if(!y[B]){y[B]=true;x=z.getModule(B);if(x){C=x.expound;if(C){D[C]=z.getModule(C);A=z.getRequires(D[C]);d.mix(D,n.hash(A))}A=z.getRequires(x);d.mix(D,n.hash(A))}}}}},_patternTest:function(y,x){return(y.indexOf(x)>-1)},getModule:function(C){if(!C){return null}var B,A,y,x=this.getModuleInfo(C),z=this.patterns;if(!x||(x&&x.ext)){for(y in z){if(z.hasOwnProperty(y)){B=z[y];if(!B.test){B.test=this._patternTest}if(B.test(C,y)){A=B;break}}}}if(!x){if(A){if(B.action){B.action.call(this,C,y)}else{d.log("Undefined module: "+C+", matched a pattern: "+y,"info","loader");x=this.addModule(d.merge(A,{test:void 0,temp:true}),C);if(x&&A.configFn){x.configFn=A.configFn}}}}else{if(A&&x&&A.configFn&&!x.configFn){x.configFn=A.configFn;x.configFn(x)}}return x},_rollup:function(){},_reduce:function(C){C=C||this.required;var z,y,B,x,A=this.loadType,D=this.ignore?n.hash(this.ignore):false;for(z in C){if(C.hasOwnProperty(z)){x=this.getModule(z);if(((this.loaded[z]||p[z])&&!this.forceMap[z]&&!this.ignoreRegistered)||(A&&x&&x.type!==A)){delete C[z]}if(D&&D[z]){delete C[z]}B=x&&x.supersedes;if(B){for(y=0;y<B.length;y++){if(B[y] in C){delete C[B[y]]}}}}}return C},_finish:function(z,y){d.log("loader finishing: "+z+", "+d.id+", "+this.data,"info","loader");h.running=false;var x=this.onEnd;if(x){x.call(this.context,{msg:z,data:this.data,success:y})}this._continue()},_onSuccess:function(){var F=this,B=d.merge(F.skipped),D,A=[],y=F.requireRegistration,E,x,z,C;for(z in B){if(B.hasOwnProperty(z)){delete F.inserted[z]}}F.skipped={};for(z in F.inserted){if(F.inserted.hasOwnProperty(z)){C=F.getModule(z);if(C&&y&&C.type===l&&!(z in YUI.Env.mods)){A.push(z)}else{d.mix(F.loaded,F.getProvides(z))}}}D=F.onSuccess;x=(A.length)?"notregistered":"success";E=!(A.length);if(D){D.call(F.context,{msg:x,data:F.data,success:E,failed:A,skipped:B})}F._finish(x,E)},_onProgress:function(z){var x=this,y;if(z.data&&z.data.length){for(y=0;y<z.data.length;y++){z.data[y]=x.getModule(z.data[y].name)}}if(x.onProgress){x.onProgress.call(x.context,{name:z.url,data:z.data})}},_onFailure:function(B){var z=this.onFailure,A=[],y=0,x=B.errors.length;for(y;y<x;y++){A.push(B.errors[y].error)}A=A.join(",");d.log("load error: "+A+", "+d.id,"error","loader");if(z){z.call(this.context,{msg:A,data:this.data,success:false})}this._finish(A,false)},_onTimeout:function(y){d.log("loader timeout: "+d.id,"error","loader");var x=this.onTimeout;if(x){x.call(this.context,{msg:"timeout",data:this.data,success:false,transaction:y})}},_sort:function(){var y,z=this.required,x={};this.sorted=[];for(y in z){if(!x[y]&&z.hasOwnProperty(y)){this._visit(y,x)}}},_visit:function(x,G){var E,A,y,B,F,z,H,D,C;G[x]=true;E=this.required;y=this.moduleInfo[x];A=this.conditions[x]||{};if(y){F=y.expanded||y.requires;for(D=0,C=F.length;D<C;++D){B=F[D];z=A[B];H=z&&(!z.when||z.when==="after");if(E[B]&&!G[B]&&!H){this._visit(B,G)}}}this.sorted.push(x)},_insert:function(x,A,E,z){d.log("private _insert() "+(E||"")+", "+d.id,"info","loader");if(x){this._config(x)}var B=this.resolve(!z),H=this,D=0,C=0,G={},F,y;H._refetch=[];if(E){B[((E===l)?r:l)]=[]}if(!H.fetchCSS){B.css=[]}if(B.js.length){D++}if(B.css.length){D++}y=function(P){C++;var I={},L=0,O=0,K="",M,N,J;if(P&&P.errors){for(L=0;L<P.errors.length;L++){if(P.errors[L].request){K=P.errors[L].request.url}else{K=P.errors[L]}I[K]=K}}if(P&&P.data&&P.data.length&&(P.type==="success")){for(L=0;L<P.data.length;L++){H.inserted[P.data[L].name]=true;if(P.data[L].lang||P.data[L].skinnable){delete H.inserted[P.data[L].name];H._refetch.push(P.data[L].name)}}}if(C===D){H._loading=null;d.log("Loader actions complete!","info","loader");if(H._refetch.length){d.log("Found potential modules to refetch","info","loader");for(L=0;L<H._refetch.length;L++){F=H.getRequires(H.getModule(H._refetch[L]));for(O=0;O<F.length;O++){if(!H.inserted[F[O]]){G[F[O]]=F[O]}}}G=d.Object.keys(G);if(G.length){d.log("Refetching modules with new meta-data","info","loader");H.require(G);J=H.resolve(true);if(J.cssMods.length){for(L=0;L<J.cssMods.length;L++){N=J.cssMods[L].name;delete YUI.Env._cssLoaded[N];if(H.isCSSLoaded(N)){H.inserted[N]=true;delete H.required[N]}}H.sorted=[];H._sort()}P=null;H._insert()}}if(P&&P.fn){d.log("Firing final Loader callback!","info","loader");M=P.fn;delete P.fn;M.call(H,P)}}};this._loading=true;if(!B.js.length&&!B.css.length){d.log("No modules resolved..","warn","loader");C=-1;y({fn:H._onSuccess});return}if(B.css.length){d.log("Loading CSS modules","info","loader");d.Get.css(B.css,{data:B.cssMods,attributes:H.cssAttributes,insertBefore:H.insertBefore,charset:H.charset,timeout:H.timeout,context:H,onProgress:function(I){H._onProgress.call(H,I)},onTimeout:function(I){H._onTimeout.call(H,I)},onSuccess:function(I){I.type="success";I.fn=H._onSuccess;y.call(H,I)},onFailure:function(I){I.type="failure";I.fn=H._onFailure;y.call(H,I)}})}if(B.js.length){d.log("Loading JS modules","info","loader");d.Get.js(B.js,{data:B.jsMods,insertBefore:H.insertBefore,attributes:H.jsAttributes,charset:H.charset,timeout:H.timeout,autopurge:false,context:H,async:H.async,onProgress:function(I){H._onProgress.call(H,I)},onTimeout:function(I){H._onTimeout.call(H,I)},onSuccess:function(I){I.type="success";I.fn=H._onSuccess;y.call(H,I)},onFailure:function(I){I.type="failure";I.fn=H._onFailure;y.call(H,I)}})}},_continue:function(){if(!(h.running)&&h.size()>0){h.running=true;h.next()()}},insert:function(A,y,z){d.log("public insert() "+(y||"")+", "+d.Object.keys(this.required),"info","loader");var x=this,B=d.merge(this);delete B.require;delete B.dirty;h.add(function(){x._insert(B,A,y,z)});this._continue()},loadNext:function(){d.log("loadNext was called..","error","loader");return},_filter:function(z,y,C){var B=this.filter,x=y&&(y in this.filters),A=x&&this.filters[y],D=C||(this.getModuleInfo(y)||{}).group||null;if(D&&this.groups[D]&&this.groups[D].filter){A=this.groups[D].filter;x=true}if(z){if(x){B=(k.isString(A))?this.FILTER_DEFS[A.toUpperCase()]||null:A}if(B){z=z.replace(new RegExp(B.searchExp,"g"),B.replaceStr)}}return z},_url:function(z,x,y){return this._filter((y||this.base||"")+z,x)},resolve:function(B,E){var M=this,K={js:[],jsMods:[],css:[],cssMods:[]},x,G=d.config.comboLoader&&d.config.customComboBase;if(M.skin.overrides||M.skin.defaultSkin!==i||M.ignoreRegistered){M._resetModules()}if(B){M.calculate()}E=E||M.sorted;x=function(P){if(P){var Q=(P.group&&M.groups[P.group])||f,O;if(Q.async===false){P.async=Q.async}O=(P.fullpath)?M._filter(P.fullpath,P.name):M._url(P.path,P.name,Q.base||P.base);if(P.attributes||P.async===false){O={url:O,async:P.async};if(P.attributes){O.attributes=P.attributes}}K[P.type].push(O);K[P.type+"Mods"].push(P)}else{d.log("Undefined Module","warn","loader")}};var A=(M.ignoreRegistered)?{}:M.inserted,z,L,H,N,y,J,F,D,C,I=false;for(C=0,D=E.length;C<D;C++){F=M.getModule(E[C]);if(!F||A[F.name]){continue}J=M.groups[F.group];N=M.comboBase;if(J){if(!J.combine||F.fullpath){x(F);continue}F.combine=true;if(typeof J.root==="string"){F.root=J.root}N=J.comboBase||N;y=J.comboSep;L=J.maxURLLength}else{if(!M.combine){x(F);continue}}if(!F.combine&&F.ext){x(F);continue}I=true;z=z||{};z[N]=z[N]||{js:[],jsMods:[],css:[],cssMods:[]};H=z[N];H.group=F.group;H.comboSep=y||M.comboSep;H.maxURLLength=L||M.maxURLLength;H[F.type+"Mods"].push(F);if(F.type===l||F.type===r){K[F.type+"Mods"].push(F)}}if(I){if(G){K=this._pathogenEncodeComboSources(K)}else{K=this._encodeComboSources(K,z)}}return K},_encodeComboSources:function(J,C){var z,A,y,x,F,M,G,H,K,N,I,B,D,E,L=this;for(N in C){if(C.hasOwnProperty(N)){I=C[N];B=I.comboSep;K=I.maxURLLength;d.log("Using maxURLLength of "+K,"info","loader");for(G in I){if(G===l||G===r){A=I[G+"Mods"];F=[];for(D=0,E=A.length;D<E;D+=1){H=A[D];M=((typeof H.root==="string")?H.root:L.root)+(H.path||H.fullpath);F.push(L._filter(M,H.name))}y=N+F.join(B);x=y.length;if(K<=N.length){d.log("maxURLLength ("+K+") is lower than the comboBase length ("+N.length+"), resetting to default ("+o+")","error","loader");K=o}if(F.length){if(x>K){d.log("Exceeded maxURLLength ("+K+") for "+G+", splitting","info","loader");z=[];for(D=0,E=F.length;D<E;D++){z.push(F[D]);y=N+z.join(B);if(y.length>K){M=z.pop();y=N+z.join(B);J[G].push(L._filter(y,null,I.group));z=[];if(M){z.push(M)}}}if(z.length){y=N+z.join(B);J[G].push(L._filter(y,null,I.group))}}else{J[G].push(L._filter(y,null,I.group))}}}}}}return J},load:function(x){if(!x){d.log("No callback supplied to load()","error","loader");return}var y=this,z=y.resolve(true);y.data=z;y.onEnd=function(){x.apply(y.context||y,arguments)};y.insert()}}},"3.18.1",{requires:["get","features"]});YUI.add("loader-rollup",function(b,a){b.Loader.prototype._rollup=function(){var l,k,h,p,d=this.required,f,g=this.moduleInfo,e,n,o;if(this.dirty||!this.rollups){this.rollups={};for(l in g){if(g.hasOwnProperty(l)){h=this.getModule(l);if(h&&h.rollup){this.rollups[l]=h}}}}for(;;){e=false;for(l in this.rollups){if(this.rollups.hasOwnProperty(l)){if(!d[l]&&((!this.loaded[l])||this.forceMap[l])){h=this.getModule(l);p=h.supersedes||[];f=false;if(!h.rollup){continue}n=0;for(k=0;k<p.length;k++){o=g[p[k]];if(this.loaded[p[k]]&&!this.forceMap[p[k]]){f=false;break}else{if(d[p[k]]&&h.type===o.type){n++;f=(n>=h.rollup);if(f){break}}}}if(f){d[l]=true;e=true;this.getRequires(h)}}}}if(!e){break}}}},"3.18.1",{requires:["loader-base"]});YUI.add("loader-yui3",function(b,a){YUI.Env[b.version].modules=YUI.Env[b.version].modules||{};b.mix(YUI.Env[b.version].modules,{"align-plugin":{requires:["node-screen","node-pluginhost"]},anim:{use:["anim-base","anim-color","anim-curve","anim-easing","anim-node-plugin","anim-scroll","anim-xy"]},"anim-base":{requires:["base-base","node-style","color-base"]},"anim-color":{requires:["anim-base"]},"anim-curve":{requires:["anim-xy"]},"anim-easing":{requires:["anim-base"]},"anim-node-plugin":{requires:["node-pluginhost","anim-base"]},"anim-scroll":{requires:["anim-base"]},"anim-shape":{requires:["anim-base","anim-easing","anim-color","matrix"]},"anim-shape-transform":{use:["anim-shape"]},"anim-xy":{requires:["anim-base","node-screen"]},app:{use:["app-base","app-content","app-transitions","lazy-model-list","model","model-list","model-sync-rest","model-sync-local","router","view","view-node-map"]},"app-base":{requires:["classnamemanager","pjax-base","router","view"]},"app-content":{requires:["app-base","pjax-content"]},"app-transitions":{requires:["app-base"]},"app-transitions-css":{type:"css"},"app-transitions-native":{condition:{name:"app-transitions-native",test:function(e){var d=e.config.doc,c=d?d.documentElement:null;if(c&&c.style){return("MozTransition" in c.style||"WebkitTransition" in c.style||"transition" in c.style)}return false},trigger:"app-transitions"},requires:["app-transitions","app-transitions-css","parallel","transition"]},"array-extras":{requires:["yui-base"]},"array-invoke":{requires:["yui-base"]},arraylist:{requires:["yui-base"]},"arraylist-add":{requires:["arraylist"]},"arraylist-filter":{requires:["arraylist"]},arraysort:{requires:["yui-base"]},"async-queue":{requires:["event-custom"]},attribute:{use:["attribute-base","attribute-complex"]},"attribute-base":{requires:["attribute-core","attribute-observable","attribute-extras"]},"attribute-complex":{requires:["attribute-base"]},"attribute-core":{requires:["oop"]},"attribute-events":{use:["attribute-observable"]},"attribute-extras":{requires:["oop"]},"attribute-observable":{requires:["event-custom"]},autocomplete:{use:["autocomplete-base","autocomplete-sources","autocomplete-list","autocomplete-plugin"]},"autocomplete-base":{optional:["autocomplete-sources"],requires:["array-extras","base-build","escape","event-valuechange","node-base"]},"autocomplete-filters":{requires:["array-extras","text-wordbreak"]},"autocomplete-filters-accentfold":{requires:["array-extras","text-accentfold","text-wordbreak"]},"autocomplete-highlighters":{requires:["array-extras","highlight-base"]},"autocomplete-highlighters-accentfold":{requires:["array-extras","highlight-accentfold"]},"autocomplete-list":{after:["autocomplete-sources"],lang:["en","es","hu","it"],requires:["autocomplete-base","event-resize","node-screen","selector-css3","shim-plugin","widget","widget-position","widget-position-align"],skinnable:true},"autocomplete-list-keys":{condition:{name:"autocomplete-list-keys",test:function(c){return !(c.UA.ios||c.UA.android)},trigger:"autocomplete-list"},requires:["autocomplete-list","base-build"]},"autocomplete-plugin":{requires:["autocomplete-list","node-pluginhost"]},"autocomplete-sources":{optional:["io-base","json-parse","jsonp","yql"],requires:["autocomplete-base"]},axes:{use:["axis-numeric","axis-category","axis-time","axis-stacked"]},"axes-base":{use:["axis-numeric-base","axis-category-base","axis-time-base","axis-stacked-base"]},axis:{requires:["dom","widget","widget-position","widget-stack","graphics","axis-base"]},"axis-base":{requires:["classnamemanager","datatype-number","datatype-date","base","event-custom"]},"axis-category":{requires:["axis","axis-category-base"]},"axis-category-base":{requires:["axis-base"]},"axis-numeric":{requires:["axis","axis-numeric-base"]},"axis-numeric-base":{requires:["axis-base"]},"axis-stacked":{requires:["axis-numeric","axis-stacked-base"]},"axis-stacked-base":{requires:["axis-numeric-base"]},"axis-time":{requires:["axis","axis-time-base"]},"axis-time-base":{requires:["axis-base"]},base:{use:["base-base","base-pluginhost","base-build"]},"base-base":{requires:["attribute-base","base-core","base-observable"]},"base-build":{requires:["base-base"]},"base-core":{requires:["attribute-core"]},"base-observable":{requires:["attribute-observable","base-core"]},"base-pluginhost":{requires:["base-base","pluginhost"]},button:{requires:["button-core","cssbutton","widget"]},"button-core":{requires:["attribute-core","classnamemanager","node-base","escape"]},"button-group":{requires:["button-plugin","cssbutton","widget"]},"button-plugin":{requires:["button-core","cssbutton","node-pluginhost"]},cache:{use:["cache-base","cache-offline","cache-plugin"]},"cache-base":{requires:["base"]},"cache-offline":{requires:["cache-base","json"]},"cache-plugin":{requires:["plugin","cache-base"]},calendar:{requires:["calendar-base","calendarnavigator"],skinnable:true},"calendar-base":{lang:["de","en","es","es-AR","fr","hu","it","ja","nb-NO","nl","pt-BR","ru","zh-Hans","zh-Hans-CN","zh-Hant","zh-Hant-HK","zh-HANT-TW"],requires:["widget","datatype-date","datatype-date-math","cssgrids"],skinnable:true},calendarnavigator:{requires:["plugin","classnamemanager","datatype-date","node"],skinnable:true},charts:{use:["charts-base"]},"charts-base":{requires:["dom","event-mouseenter","event-touch","graphics-group","axes","series-pie","series-line","series-marker","series-area","series-spline","series-column","series-bar","series-areaspline","series-combo","series-combospline","series-line-stacked","series-marker-stacked","series-area-stacked","series-spline-stacked","series-column-stacked","series-bar-stacked","series-areaspline-stacked","series-combo-stacked","series-combospline-stacked"]},"charts-legend":{requires:["charts-base"]},classnamemanager:{requires:["yui-base"]},"clickable-rail":{requires:["slider-base"]},collection:{use:["array-extras","arraylist","arraylist-add","arraylist-filter","array-invoke"]},color:{use:["color-base","color-hsl","color-harmony"]},"color-base":{requires:["yui-base"]},"color-harmony":{requires:["color-hsl"]},"color-hsl":{requires:["color-base"]},"color-hsv":{requires:["color-base"]},console:{lang:["en","es","hu","it","ja"],requires:["yui-log","widget"],skinnable:true},"console-filters":{requires:["plugin","console"],skinnable:true},"content-editable":{requires:["node-base","editor-selection","stylesheet","plugin"]},controller:{use:["router"]},cookie:{requires:["yui-base"]},"createlink-base":{requires:["editor-base"]},cssbase:{after:["cssreset","cssfonts","cssgrids","cssreset-context","cssfonts-context","cssgrids-context"],type:"css"},"cssbase-context":{after:["cssreset","cssfonts","cssgrids","cssreset-context","cssfonts-context","cssgrids-context"],type:"css"},cssbutton:{type:"css"},cssfonts:{type:"css"},"cssfonts-context":{type:"css"},cssgrids:{optional:["cssnormalize"],type:"css"},"cssgrids-base":{optional:["cssnormalize"],type:"css"},"cssgrids-responsive":{optional:["cssnormalize"],requires:["cssgrids","cssgrids-responsive-base"],type:"css"},"cssgrids-units":{optional:["cssnormalize"],requires:["cssgrids-base"],type:"css"},cssnormalize:{type:"css"},"cssnormalize-context":{type:"css"},cssreset:{type:"css"},"cssreset-context":{type:"css"},dataschema:{use:["dataschema-base","dataschema-json","dataschema-xml","dataschema-array","dataschema-text"]},"dataschema-array":{requires:["dataschema-base"]},"dataschema-base":{requires:["base"]},"dataschema-json":{requires:["dataschema-base","json"]},"dataschema-text":{requires:["dataschema-base"]},"dataschema-xml":{requires:["dataschema-base"]},datasource:{use:["datasource-local","datasource-io","datasource-get","datasource-function","datasource-cache","datasource-jsonschema","datasource-xmlschema","datasource-arrayschema","datasource-textschema","datasource-polling"]},"datasource-arrayschema":{requires:["datasource-local","plugin","dataschema-array"]},"datasource-cache":{requires:["datasource-local","plugin","cache-base"]},"datasource-function":{requires:["datasource-local"]},"datasource-get":{requires:["datasource-local","get"]},"datasource-io":{requires:["datasource-local","io-base"]},"datasource-jsonschema":{requires:["datasource-local","plugin","dataschema-json"]},"datasource-local":{requires:["base"]},"datasource-polling":{requires:["datasource-local"]},"datasource-textschema":{requires:["datasource-local","plugin","dataschema-text"]},"datasource-xmlschema":{requires:["datasource-local","plugin","datatype-xml","dataschema-xml"]},datatable:{use:["datatable-core","datatable-table","datatable-head","datatable-body","datatable-base","datatable-column-widths","datatable-message","datatable-mutable","datatable-sort","datatable-datasource"]},"datatable-base":{requires:["datatable-core","datatable-table","datatable-head","datatable-body","base-build","widget"],skinnable:true},"datatable-body":{requires:["datatable-core","view","classnamemanager"]},"datatable-column-widths":{requires:["datatable-base"]},"datatable-core":{requires:["escape","model-list","node-event-delegate"]},"datatable-datasource":{requires:["datatable-base","plugin","datasource-local"]},"datatable-foot":{requires:["datatable-core","view"]},"datatable-formatters":{requires:["datatable-body","datatype-number-format","datatype-date-format","escape"]},"datatable-head":{requires:["datatable-core","view","classnamemanager"]},"datatable-highlight":{requires:["datatable-base","event-hover"],skinnable:true},"datatable-keynav":{requires:["datatable-base"]},"datatable-message":{lang:["en","fr","es","hu","it"],requires:["datatable-base"],skinnable:true},"datatable-mutable":{requires:["datatable-base"]},"datatable-paginator":{lang:["en","fr"],requires:["model","view","paginator-core","datatable-foot","datatable-paginator-templates"],skinnable:true},"datatable-paginator-templates":{requires:["template"]},"datatable-scroll":{requires:["datatable-base","datatable-column-widths","dom-screen"],skinnable:true},"datatable-sort":{lang:["en","fr","es","hu"],requires:["datatable-base"],skinnable:true},"datatable-table":{requires:["datatable-core","datatable-head","datatable-body","view","classnamemanager"]},datatype:{use:["datatype-date","datatype-number","datatype-xml"]},"datatype-date":{use:["datatype-date-parse","datatype-date-format","datatype-date-math"]},"datatype-date-format":{lang:["ar","ar-JO","ca","ca-ES","da","da-DK","de","de-AT","de-DE","el","el-GR","en","en-AU","en-CA","en-GB","en-IE","en-IN","en-JO","en-MY","en-NZ","en-PH","en-SG","en-US","es","es-AR","es-BO","es-CL","es-CO","es-EC","es-ES","es-MX","es-PE","es-PY","es-US","es-UY","es-VE","fi","fi-FI","fr","fr-BE","fr-CA","fr-FR","hi","hi-IN","hu","id","id-ID","it","it-IT","ja","ja-JP","ko","ko-KR","ms","ms-MY","nb","nb-NO","nl","nl-BE","nl-NL","pl","pl-PL","pt","pt-BR","ro","ro-RO","ru","ru-RU","sv","sv-SE","th","th-TH","tr","tr-TR","vi","vi-VN","zh-Hans","zh-Hans-CN","zh-Hant","zh-Hant-HK","zh-Hant-TW"]},"datatype-date-math":{requires:["yui-base"]},"datatype-date-parse":{},"datatype-number":{use:["datatype-number-parse","datatype-number-format"]},"datatype-number-format":{},"datatype-number-parse":{requires:["escape"]},"datatype-xml":{use:["datatype-xml-parse","datatype-xml-format"]},"datatype-xml-format":{},"datatype-xml-parse":{},dd:{use:["dd-ddm-base","dd-ddm","dd-ddm-drop","dd-drag","dd-proxy","dd-constrain","dd-drop","dd-scroll","dd-delegate"]},"dd-constrain":{requires:["dd-drag"]},"dd-ddm":{requires:["dd-ddm-base","event-resize"]},"dd-ddm-base":{requires:["node","base","yui-throttle","classnamemanager"]},"dd-ddm-drop":{requires:["dd-ddm"]},"dd-delegate":{requires:["dd-drag","dd-drop-plugin","event-mouseenter"]},"dd-drag":{requires:["dd-ddm-base","selector-css2"]},"dd-drop":{requires:["dd-drag","dd-ddm-drop"]},"dd-drop-plugin":{requires:["dd-drop"]},"dd-gestures":{condition:{name:"dd-gestures",trigger:"dd-drag",ua:"touchEnabled"},requires:["dd-drag","event-synthetic","event-gestures"]},"dd-plugin":{optional:["dd-constrain","dd-proxy"],requires:["dd-drag"]},"dd-proxy":{requires:["dd-drag"]},"dd-scroll":{requires:["dd-drag"]},dial:{lang:["en","es","hu"],requires:["widget","dd-drag","event-mouseenter","event-move","event-key","transition","intl"],skinnable:true},dom:{use:["dom-base","dom-screen","dom-style","selector-native","selector"]},"dom-base":{requires:["dom-core"]},"dom-core":{requires:["oop","features"]},"dom-screen":{requires:["dom-base","dom-style"]},"dom-style":{requires:["dom-base"]},"dom-style-ie":{condition:{name:"dom-style-ie",test:function(i){var g=i.Features.test,h=i.Features.add,e=i.config.win,f=i.config.doc,c="documentElement",d=false;h("style","computedStyle",{test:function(){return e&&"getComputedStyle" in e}});h("style","opacity",{test:function(){return f&&"opacity" in f[c].style}});d=(!g("style","opacity")&&!g("style","computedStyle"));return d},trigger:"dom-style"},requires:["dom-style","color-base"]},dump:{requires:["yui-base"]},editor:{use:["frame","editor-selection","exec-command","editor-base","editor-para","editor-br","editor-bidi","editor-tab","createlink-base"]},"editor-base":{requires:["base","frame","node","exec-command","editor-selection"]},"editor-bidi":{requires:["editor-base"]},"editor-br":{requires:["editor-base"]},"editor-inline":{requires:["editor-base","content-editable"]},"editor-lists":{requires:["editor-base"]},"editor-para":{requires:["editor-para-base"]},"editor-para-base":{requires:["editor-base"]},"editor-para-ie":{condition:{name:"editor-para-ie",trigger:"editor-para",ua:"ie",when:"instead"},requires:["editor-para-base"]},"editor-selection":{requires:["node"]},"editor-tab":{requires:["editor-base"]},escape:{requires:["yui-base"]},event:{after:["node-base"],use:["event-base","event-delegate","event-synthetic","event-mousewheel","event-mouseenter","event-key","event-focus","event-resize","event-hover","event-outside","event-touch","event-move","event-flick","event-valuechange","event-tap"]},"event-base":{after:["node-base"],requires:["event-custom-base"]},"event-base-ie":{after:["event-base"],condition:{name:"event-base-ie",test:function(d){var c=d.config.doc&&d.config.doc.implementation;return(c&&(!c.hasFeature("Events","2.0")))},trigger:"node-base"},requires:["node-base"]},"event-contextmenu":{requires:["event-synthetic","dom-screen"]},"event-custom":{use:["event-custom-base","event-custom-complex"]},"event-custom-base":{requires:["oop"]},"event-custom-complex":{requires:["event-custom-base"]},"event-delegate":{requires:["node-base"]},"event-flick":{requires:["node-base","event-touch","event-synthetic"]},"event-focus":{requires:["event-synthetic"]},"event-gestures":{use:["event-flick","event-move"]},"event-hover":{requires:["event-mouseenter"]},"event-key":{requires:["event-synthetic"]},"event-mouseenter":{requires:["event-synthetic"]},"event-mousewheel":{requires:["node-base"]},"event-move":{requires:["node-base","event-touch","event-synthetic"]},"event-outside":{requires:["event-synthetic"]},"event-resize":{requires:["node-base","event-synthetic"]},"event-simulate":{requires:["event-base"]},"event-synthetic":{requires:["node-base","event-custom-complex"]},"event-tap":{requires:["node-base","event-base","event-touch","event-synthetic"]},"event-touch":{requires:["node-base"]},"event-valuechange":{requires:["event-focus","event-synthetic"]},"exec-command":{requires:["frame"]},features:{requires:["yui-base"]},file:{requires:["file-flash","file-html5"]},"file-flash":{requires:["base"]},"file-html5":{requires:["base"]},frame:{requires:["base","node","plugin","selector-css3","yui-throttle"]},"gesture-simulate":{requires:["async-queue","event-simulate","node-screen"]},get:{requires:["yui-base"]},graphics:{requires:["node","event-custom","pluginhost","matrix","classnamemanager"]},"graphics-canvas":{condition:{name:"graphics-canvas",test:function(g){var e=g.config.doc,f=g.config.defaultGraphicEngine&&g.config.defaultGraphicEngine=="canvas",d=e&&e.createElement("canvas"),c=(e&&e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));return(!c||f)&&(d&&d.getContext&&d.getContext("2d"))},trigger:"graphics"},requires:["graphics","color-base"]},"graphics-canvas-default":{condition:{name:"graphics-canvas-default",test:function(g){var e=g.config.doc,f=g.config.defaultGraphicEngine&&g.config.defaultGraphicEngine=="canvas",d=e&&e.createElement("canvas"),c=(e&&e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));return(!c||f)&&(d&&d.getContext&&d.getContext("2d"))},trigger:"graphics"}},"graphics-group":{requires:["graphics"]},"graphics-svg":{condition:{name:"graphics-svg",test:function(g){var f=g.config.doc,e=!g.config.defaultGraphicEngine||g.config.defaultGraphicEngine!="canvas",d=f&&f.createElement("canvas"),c=(f&&f.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));return c&&(e||!d)},trigger:"graphics"},requires:["graphics"]},"graphics-svg-default":{condition:{name:"graphics-svg-default",test:function(g){var f=g.config.doc,e=!g.config.defaultGraphicEngine||g.config.defaultGraphicEngine!="canvas",d=f&&f.createElement("canvas"),c=(f&&f.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));return c&&(e||!d)},trigger:"graphics"}},"graphics-vml":{condition:{name:"graphics-vml",test:function(e){var d=e.config.doc,c=d&&d.createElement("canvas");return(d&&!d.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(!c||!c.getContext||!c.getContext("2d")))},trigger:"graphics"},requires:["graphics","color-base"]},"graphics-vml-default":{condition:{name:"graphics-vml-default",test:function(e){var d=e.config.doc,c=d&&d.createElement("canvas");return(d&&!d.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(!c||!c.getContext||!c.getContext("2d")))},trigger:"graphics"}},handlebars:{use:["handlebars-compiler"]},"handlebars-base":{requires:[]},"handlebars-compiler":{requires:["handlebars-base"]},highlight:{use:["highlight-base","highlight-accentfold"]},"highlight-accentfold":{requires:["highlight-base","text-accentfold"]},"highlight-base":{requires:["array-extras","classnamemanager","escape","text-wordbreak"]},history:{use:["history-base","history-hash","history-html5"]},"history-base":{requires:["event-custom-complex"]},"history-hash":{after:["history-html5"],requires:["event-synthetic","history-base","yui-later"]},"history-hash-ie":{condition:{name:"history-hash-ie",test:function(d){var c=d.config.doc&&d.config.doc.documentMode;return d.UA.ie&&(!("onhashchange" in d.config.win)||!c||c<8)},trigger:"history-hash"},requires:["history-hash","node-base"]},"history-html5":{optional:["json"],requires:["event-base","history-base","node-base"]},imageloader:{requires:["base-base","node-style","node-screen"]},intl:{requires:["intl-base","event-custom"]},"intl-base":{requires:["yui-base"]},io:{use:["io-base","io-xdr","io-form","io-upload-iframe","io-queue"]},"io-base":{requires:["event-custom-base","querystring-stringify-simple"]},"io-form":{requires:["io-base","node-base"]},"io-nodejs":{condition:{name:"io-nodejs",trigger:"io-base",ua:"nodejs"},requires:["io-base"]},"io-queue":{requires:["io-base","queue-promote"]},"io-upload-iframe":{requires:["io-base","node-base"]},"io-xdr":{requires:["io-base","datatype-xml-parse"]},json:{use:["json-parse","json-stringify"]},"json-parse":{requires:["yui-base"]},"json-parse-shim":{condition:{name:"json-parse-shim",test:function(i){var f=i.config.global.JSON,d=Object.prototype.toString.call(f)==="[object JSON]"&&f,h=i.config.useNativeJSONParse!==false&&!!d;function c(j,e){return j==="ok"?true:e}if(h){try{h=(d.parse('{"ok":false}',c)).ok}catch(g){h=false}}return !h},trigger:"json-parse"},requires:["json-parse"]},"json-stringify":{requires:["yui-base"]},"json-stringify-shim":{condition:{name:"json-stringify-shim",test:function(h){var d=h.config.global.JSON,c=Object.prototype.toString.call(d)==="[object JSON]"&&d,g=h.config.useNativeJSONStringify!==false&&!!c;if(g){try{g=("0"===c.stringify(0))}catch(f){g=false}}return !g},trigger:"json-stringify"},requires:["json-stringify"]},jsonp:{requires:["get","oop"]},"jsonp-url":{requires:["jsonp"]},"lazy-model-list":{requires:["model-list"]},loader:{use:["loader-base","loader-rollup","loader-yui3"]},"loader-base":{requires:["get","features"]},"loader-pathogen-combohandler":{},"loader-pathogen-encoder":{use:["loader-base","loader-rollup","loader-yui3","loader-pathogen-combohandler"]},"loader-rollup":{requires:["loader-base"]},"loader-yui3":{requires:["loader-base"]},matrix:{requires:["yui-base"]},model:{requires:["base-build","escape","json-parse"]},"model-list":{requires:["array-extras","array-invoke","arraylist","base-build","escape","json-parse","model"]},"model-sync-local":{requires:["model","json-stringify"]},"model-sync-rest":{requires:["model","io-base","json-stringify"]},node:{use:["node-base","node-event-delegate","node-pluginhost","node-screen","node-style"]},"node-base":{requires:["event-base","node-core","dom-base","dom-style"]},"node-core":{requires:["dom-core","selector"]},"node-event-delegate":{requires:["node-base","event-delegate"]},"node-event-html5":{requires:["node-base"]},"node-event-simulate":{requires:["node-base","event-simulate","gesture-simulate"]},"node-flick":{requires:["classnamemanager","transition","event-flick","plugin"],skinnable:true},"node-focusmanager":{requires:["attribute","node","plugin","node-event-simulate","event-key","event-focus"]},"node-load":{requires:["node-base","io-base"]},"node-menunav":{requires:["node","classnamemanager","plugin","node-focusmanager"],skinnable:true},"node-pluginhost":{requires:["node-base","pluginhost"]},"node-screen":{requires:["dom-screen","node-base"]},"node-scroll-info":{requires:["array-extras","base-build","event-resize","node-pluginhost","plugin","selector"]},"node-style":{requires:["dom-style","node-base"]},oop:{requires:["yui-base"]},overlay:{requires:["widget","widget-stdmod","widget-position","widget-position-align","widget-stack","widget-position-constrain"],skinnable:true},paginator:{requires:["paginator-core"]},"paginator-core":{requires:["base"]},"paginator-url":{requires:["paginator"]},panel:{requires:["widget","widget-autohide","widget-buttons","widget-modality","widget-position","widget-position-align","widget-position-constrain","widget-stack","widget-stdmod"],skinnable:true},parallel:{requires:["yui-base"]},pjax:{requires:["pjax-base","pjax-content"]},"pjax-base":{requires:["classnamemanager","node-event-delegate","router"]},"pjax-content":{requires:["io-base","node-base","router"]},"pjax-plugin":{requires:["node-pluginhost","pjax","plugin"]},plugin:{requires:["base-base"]},pluginhost:{use:["pluginhost-base","pluginhost-config"]},"pluginhost-base":{requires:["yui-base"]},"pluginhost-config":{requires:["pluginhost-base"]},promise:{requires:["timers"]},querystring:{use:["querystring-parse","querystring-stringify"]},"querystring-parse":{requires:["yui-base","array-extras"]},"querystring-parse-simple":{requires:["yui-base"]},"querystring-stringify":{requires:["yui-base"]},"querystring-stringify-simple":{requires:["yui-base"]},"queue-promote":{requires:["yui-base"]},"range-slider":{requires:["slider-base","slider-value-range","clickable-rail"]},recordset:{use:["recordset-base","recordset-sort","recordset-filter","recordset-indexer"]},"recordset-base":{requires:["base","arraylist"]},"recordset-filter":{requires:["recordset-base","array-extras","plugin"]},"recordset-indexer":{requires:["recordset-base","plugin"]},"recordset-sort":{requires:["arraysort","recordset-base","plugin"]},resize:{use:["resize-base","resize-proxy","resize-constrain"]},"resize-base":{requires:["base","widget","event","oop","dd-drag","dd-delegate","dd-drop"],skinnable:true},"resize-constrain":{requires:["plugin","resize-base"]},"resize-plugin":{optional:["resize-constrain"],requires:["resize-base","plugin"]},"resize-proxy":{requires:["plugin","resize-base"]},router:{optional:["querystring-parse"],requires:["array-extras","base-build","history"]},scrollview:{requires:["scrollview-base","scrollview-scrollbars"]},"scrollview-base":{requires:["widget","event-gestures","event-mousewheel","transition"],skinnable:true},"scrollview-base-ie":{condition:{name:"scrollview-base-ie",trigger:"scrollview-base",ua:"ie"},requires:["scrollview-base"]},"scrollview-list":{requires:["plugin","classnamemanager"],skinnable:true},"scrollview-paginator":{requires:["plugin","classnamemanager"]},"scrollview-scrollbars":{requires:["classnamemanager","transition","plugin"],skinnable:true},selector:{requires:["selector-native"]},"selector-css2":{condition:{name:"selector-css2",test:function(e){var d=e.config.doc,c=d&&!("querySelectorAll" in d);return c},trigger:"selector"},requires:["selector-native"]},"selector-css3":{requires:["selector-native","selector-css2"]},"selector-native":{requires:["dom-base"]},"series-area":{requires:["series-cartesian","series-fill-util"]},"series-area-stacked":{requires:["series-stacked","series-area"]},"series-areaspline":{requires:["series-area","series-curve-util"]},"series-areaspline-stacked":{requires:["series-stacked","series-areaspline"]},"series-bar":{requires:["series-marker","series-histogram-base"]},"series-bar-stacked":{requires:["series-stacked","series-bar"]},"series-base":{requires:["graphics","axis-base"]},"series-candlestick":{requires:["series-range"]},"series-cartesian":{requires:["series-base"]},"series-column":{requires:["series-marker","series-histogram-base"]},"series-column-stacked":{requires:["series-stacked","series-column"]},"series-combo":{requires:["series-cartesian","series-line-util","series-plot-util","series-fill-util"]},"series-combo-stacked":{requires:["series-stacked","series-combo"]},"series-combospline":{requires:["series-combo","series-curve-util"]},"series-combospline-stacked":{requires:["series-combo-stacked","series-curve-util"]},"series-curve-util":{},"series-fill-util":{},"series-histogram-base":{requires:["series-cartesian","series-plot-util"]},"series-line":{requires:["series-cartesian","series-line-util"]},"series-line-stacked":{requires:["series-stacked","series-line"]},"series-line-util":{},"series-marker":{requires:["series-cartesian","series-plot-util"]},"series-marker-stacked":{requires:["series-stacked","series-marker"]},"series-ohlc":{requires:["series-range"]},"series-pie":{requires:["series-base","series-plot-util"]},"series-plot-util":{},"series-range":{requires:["series-cartesian"]},"series-spline":{requires:["series-line","series-curve-util"]},"series-spline-stacked":{requires:["series-stacked","series-spline"]},"series-stacked":{requires:["axis-stacked"]},"shim-plugin":{requires:["node-style","node-pluginhost"]},slider:{use:["slider-base","slider-value-range","clickable-rail","range-slider"]},"slider-base":{requires:["widget","dd-constrain","event-key"],skinnable:true},"slider-value-range":{requires:["slider-base"]},sortable:{requires:["dd-delegate","dd-drop-plugin","dd-proxy"]},"sortable-scroll":{requires:["dd-scroll","sortable"]},stylesheet:{requires:["yui-base"]},substitute:{optional:["dump"],requires:["yui-base"]},swf:{requires:["event-custom","node","swfdetect","escape"]},swfdetect:{requires:["yui-base"]},tabview:{requires:["widget","widget-parent","widget-child","tabview-base","node-pluginhost","node-focusmanager"],skinnable:true},"tabview-base":{requires:["node-event-delegate","classnamemanager"]},"tabview-plugin":{requires:["tabview-base"]},template:{use:["template-base","template-micro"]},"template-base":{requires:["yui-base"]},"template-micro":{requires:["escape"]},test:{requires:["event-simulate","event-custom","json-stringify"]},"test-console":{requires:["console-filters","test","array-extras"],skinnable:true},text:{use:["text-accentfold","text-wordbreak"]},"text-accentfold":{requires:["array-extras","text-data-accentfold"]},"text-data-accentfold":{requires:["yui-base"]},"text-data-wordbreak":{requires:["yui-base"]},"text-wordbreak":{requires:["array-extras","text-data-wordbreak"]},timers:{requires:["yui-base"]},transition:{requires:["node-style"]},"transition-timer":{condition:{name:"transition-timer",test:function(f){var e=f.config.doc,d=(e)?e.documentElement:null,c=true;if(d&&d.style){c=!("MozTransition" in d.style||"WebkitTransition" in d.style||"transition" in d.style)}return c},trigger:"transition"},requires:["transition"]},tree:{requires:["base-build","tree-node"]},"tree-labelable":{requires:["tree"]},"tree-lazy":{requires:["base-pluginhost","plugin","tree"]},"tree-node":{},"tree-openable":{requires:["tree"]},"tree-selectable":{requires:["tree"]},"tree-sortable":{requires:["tree"]},uploader:{requires:["uploader-html5","uploader-flash"]},"uploader-flash":{requires:["swfdetect","escape","widget","base","cssbutton","node","event-custom","uploader-queue"]},"uploader-html5":{requires:["widget","node-event-simulate","file-html5","uploader-queue"]},"uploader-queue":{requires:["base"]},view:{requires:["base-build","node-event-delegate"]},"view-node-map":{requires:["view"]},widget:{use:["widget-base","widget-htmlparser","widget-skin","widget-uievents"]},"widget-anim":{requires:["anim-base","plugin","widget"]},"widget-autohide":{requires:["base-build","event-key","event-outside","widget"]},"widget-base":{requires:["attribute","base-base","base-pluginhost","classnamemanager","event-focus","node-base","node-style"],skinnable:true},"widget-base-ie":{condition:{name:"widget-base-ie",trigger:"widget-base",ua:"ie"},requires:["widget-base"]},"widget-buttons":{requires:["button-plugin","cssbutton","widget-stdmod"]},"widget-child":{requires:["base-build","widget"]},"widget-htmlparser":{requires:["widget-base"]},"widget-modality":{requires:["base-build","event-outside","widget"],skinnable:true},"widget-parent":{requires:["arraylist","base-build","widget"]},"widget-position":{requires:["base-build","node-screen","widget"]},"widget-position-align":{requires:["widget-position"]},"widget-position-constrain":{requires:["widget-position"]},"widget-skin":{requires:["widget-base"]},"widget-stack":{requires:["base-build","widget"],skinnable:true},"widget-stdmod":{requires:["base-build","widget"]},"widget-uievents":{requires:["node-event-delegate","widget-base"]},yql:{requires:["oop"]},"yql-jsonp":{condition:{name:"yql-jsonp",test:function(c){return(!c.UA.nodejs&&!c.UA.winjs)},trigger:"yql"},requires:["yql","jsonp","jsonp-url"]},"yql-nodejs":{condition:{name:"yql-nodejs",trigger:"yql",ua:"nodejs"},requires:["yql"]},"yql-winjs":{condition:{name:"yql-winjs",trigger:"yql",ua:"winjs"},requires:["yql"]},yui:{},"yui-base":{},"yui-later":{requires:["yui-base"]},"yui-log":{requires:["yui-base"]},"yui-throttle":{requires:["yui-base"]}});YUI.Env[b.version].md5="2fd2be6b12ee9f999b4367499ae61aae"},"3.18.1",{requires:["loader-base"]});YUI.add("yui",function(b,a){},"3.18.1",{use:["yui-base","get","features","intl-base","yui-log","yui-later","loader-base","loader-rollup","loader-yui3"]});YUI.add("breakout",function(c){function b(f,e,d){return Math.max(Math.min(f,d),e)}function a(d){var f=d.rows,e=d.columns;this._host=d.host;this._container=c.Node.create("<div style='position: absolute'>");this._nodes=[];if(!(f||e)){f=8}this._rows=f;this._columns=e;a.superclass.constructor.apply(this,arguments)}a.NS="breakout";a.Name="Breakout";c.extend(a,c.Plugin.Base,{_splitNode:function(){var d,i,k,j,g=Math.round(this._blockWidth),m=Math.round(this._blockHeight),q=this._rows,h=this._columns,l=this._host.getXY(),n,f=this._container,e=this._nodes=[],p,o=c.Node.create('<div style="width: '+g+"px; height: "+m+'px; position: absolute; overflow: hidden">');f.setXY(l);for(d=0;d<q;d++){e[d]=p=[];j=d*m;for(i=0;i<h;i++){k=i*g;n=this._host.cloneNode(true);p[i]=o.cloneNode().setXY([k,j]).append(n.setXY([-k,-j]));f.append(p[i])}}this._swapIn()},_swapIn:function(){this._host.get("parentNode").append(this._container);this._host.setStyle("visibility","hidden")},_setup:function(){if(this._nodes.length){return}var g=this._host,f=parseFloat(g.getComputedStyle("width")),d=parseFloat(g.getComputedStyle("height")),i,j,h=this._rows,e=this._columns;if(h){j=d/h}if(e){i=f/e}if(!h){j=i;h=d/j}if(!e){i=j;e=f/i}this._container.setStyles({width:f,height:d});this._width=f;this._height=d;this._blockWidth=i;this._blockHeight=j;this._rows=h;this._columns=e;this._splitNode()},_forEach:function(o,p){this._setup();this._swapIn();var d,l,n=this._rows,g=this._columns,p=p||{},f=Math.abs(p.random||0),j=0,h,m,i,e=this._container,k=this;p.crop&&e.setStyle("overflow","hidden");for(d=0;d<n;d++){for(l=0;l<g;l++){j++;m=this._nodes[d][l];h=o.call(this,m,d,l,n,g);i=d+l;if(p.reverse){i=n+g-i}h.animation.on("end",function(){j--;if(!j){k._container.remove();p.unhide&&k._host.setStyle("visibility","visible");p.crop&&e.setStyle("overflow","visible");k.fire("end")}});(function(q){var t=1-(Math.random()*f),r;if(p.fade){r=p.unhide?0:1;c.mix(q.animation.get("from"),{opacity:r});c.mix(q.animation.get("to"),{opacity:1-r})}else{m.setStyle("opacity",1)}setTimeout(function(){q.animation.run()},q.interval*i*t)})(h)}}},explode:function(d){d=d||{};if(!("fade" in d)){d.fade=true}var e=Math.abs(d.random||0);this._forEach(function(i,p,j,q,k){var g=(d.distance||1.5)*2,l=d.duration||1000,m=d.easing||c.Easing.easeOutStrong,h=1-(Math.random()*e),f={x:(k-1)/2,y:(q-1)/2},o={x:j-f.x,y:p-f.y},n;g*=h;n={left:(o.x*g+f.x)*this._blockWidth,top:(o.y*g+f.y)*this._blockHeight};if(d.unhide){i.setStyles(n);n={left:j*this._blockWidth,top:p*this._blockHeight}}anim=new c.Anim({node:i,easing:m,to:n,duration:l/1000});return{animation:anim,interval:0}},d)},sheer:function(e){e=e||{};var h=e.distance||1,f=e.duration||1000,d=e.interval||0,g=e.easing||c.Easing.easeIn;this._forEach(function(j,r,k,t,l){var p=!(k%2),m=!(r%2),i=this._width,q=this._height,o={left:k*this._blockWidth,top:r*this._blockHeight},n={};if(l===1){p=m}if(t===1){m=!p}if(p){if(m){n.left=o.left-h*i}else{n.top=o.top+h*q}}else{if(m){n.top=o.top-h*q}else{n.left=o.left+h*i}}if(e.unhide){n=o}anim=new c.Anim({node:j,easing:g,to:n,duration:f/1000});return{animation:anim,interval:d}},e)},pinwheel:function(d){d=d||{};var g=d.distance||1,e=d.duration||1000,f=d.easing||c.Easing.easeOut;this._forEach(function(j,r,k,t,l){var p=!(k%2),m=!(r%2),i=0,h=this._blockWidth,q=this._blockHeight,o={left:k*h,top:r*q,width:h,height:q},n={};if(p){if(m){n.top=o.top+g*q}else{n.left=o.left+g*h}}if(p===m){n.height=q*(1-g)}else{n.width=h*(1-g)}if(d.unhide){n=o}anim=new c.Anim({node:j,easing:f,to:n,duration:e/1000});return{animation:anim,interval:i}},d)},disintegrate:function(d){d=d||{};d.reverse=true;this._forEach(function(g,n,h,o,i){var e=(d.distance||1.5)*this._height,k=d.duration||1000,l=d.easing||c.Easing.easeBoth,f=k/(o+i)*2,m=n*this._blockHeight,j;if(e<0){n=o-n-1}if(d.unhide){g.setStyle("top",m-e)}else{m+=e}j=new c.Anim({node:g,easing:l,to:{top:m},duration:k/1000});return{animation:j,interval:f}},d)},fadeOut:function(d){d=d||{};d.fade=true;this._forEach(function(f,l,g,m,h){var j=d.duration||700,n=d.unhide?0:1,k=d.easing,e,i;if(!k){k=d.unhide?c.Easing.easeOut:c.Easing.easeInStrong}e=j/(m+h)*2;i=new c.Anim({node:f,easing:k,from:{},to:{},duration:j/1000});return{animation:i,interval:e}},d)},_inverse:function(e,d){d=d||{};d.unhide=true;e.call(this,d)},unsheer:function(d){this._inverse(this.sheer,d)},unpinwheel:function(d){this._inverse(this.pinwheel,d)},converge:function(d){this._inverse(this.explode,d)},fadeIn:function(d){this._inverse(this.fadeOut,d)},build:function(d){this._inverse(this.disintegrate,d)}});c.Breakout=a},"1.0",{requires:["plugin","anim"]});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(b){var a=this.length>>>0;var c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}for(;c<a;c++){if(c in this&&this[c]===b){return c}}return -1}}Array.prototype.flatten=function(){var b=[],c,a,e,d=Array.prototype;for(c=0,a=this.length;c<a;c++){e=this[c];if(Object.prototype.toString.call(e)==="[object Array]"){d.push.apply(b,d.flatten.call(e))}else{b.push(e)}}return b};function argsArray(a){return Array.prototype.slice.call(a)}Array.prototype.last=function(){return this[this.length-1]};Array.prototype.deleteItem=function(b){var a=this.indexOf(b);a!==-1&&this.splice(a,1)};Array.prototype.shuffle=function(){var b=this.length,d,c,a;while(--b){d=~~(Math.random()*b);c=this[b];a=this[d];this[d]=c;this[b]=a}};Function.prototype.bind=function(b){var a=this;return function(){var c=argsArray(arguments);return a.apply(b,c)}};Function.prototype.partial=function(){var b=this,a=argsArray(arguments);return function(){var e,c,d=[].concat(a);for(e=0,c=arguments.length;e<c;e++){d.push(arguments[e])}return b.apply(this,d)}};function instance(c,b){var a=new Function(),e,d;a.prototype=c;e=new a;if(typeof b==="object"){for(d in b){if(b.hasOwnProperty(d)){e[d]=b[d]}}}return e}function normalize(a){var b=typeof a==="function"?a():a;return isNaN(b)?undefined:b}Object.prototype.mapToFloat=function(){var a;for(a in this){if(this.hasOwnProperty(a)){this[a]=parseFloat(this[a])}}return this};Object.prototype.mapAppend=function(b){var a;for(a in this){if(this.hasOwnProperty(a)){this[a]+=b}}return this};var Game;YUI.add("solitaire",function(d){var b=d.namespace("Solitaire");function a(e){a.superclass.constructor.call(this,e)}d.extend(a,d.DD.Delegate,{getCard:function(){return this.get("currentNode").getData("target")}});d.mix(b,{activeCard:null,moves:null,selector:"body",offset:{left:50,top:70},padding:{x:50,y:50},widthScale:0,noop:function(){},name:function(){var e;for(e in b){if(b.hasOwnProperty(e)&&b[e]===Game){return e}}},container:function(){return d.one(b.selector)},width:function(){return this.Card.base.width*this.widthScale},height:function(){return this.Card.base.height*4.2},maxStackHeight:function(){return b.Application.windowHeight-normalize(this.Tableau.stackConfig.layout.top)-b.offset.top},undo:function(){d.fire("undo")},pushMove:function(f){var e=b.moves;e&&e.push(f)},serialize:function(){var j=[],k=[],h,g,f,e;d.Array.each(this.fields,function(i){g=this[i.toLowerCase()].stacks;for(f=0,e=g.length;f<e;f++){h=g[f].serialize();j.push(h);k.push(String.fromCharCode(h.length))}},this);return[String.fromCharCode(j.length)].concat(k,j).join("")},stationary:function(f){var e=Game.Card.updatePosition;Game.Card.updatePosition=b.noop;f.call(this);Game.Card.updatePosition=e},unanimated:function(g){var f=d.Solitaire.Animation,e=f.animate;f.animate=false;g.call(this);f.animate=e},unserialize:function(e){this.unanimated(function(){var f=e.charCodeAt(0),j=e.substr(1,f),k=f+1,m,n=this.fields,q=-1,h=[],p,o,l,g;for(l=0,p=0;l<f;l++,p++,k+=g){g=j.charCodeAt(l);m=e.substr(k,g);if(p===h.length){q++;h=this[n[q].toLowerCase()].stacks;p=0}o=h[p];o.unserialize(m);o.updateCardsPosition()}})},save:function(e){var f=this.serialize(),e=e||"saved-game",g=1206900000;d.Cookie.set(e,f,{expires:new Date(new Date().getTime()+g)})},loadGame:function(e){this.unanimated(function(){this.setup(function(){this.unserialize(e)})});d.fire("loadGame")},newGame:function(){d.Cookie.remove("saved-game");this.setup(this.deal);Game.save("initial-game");d.fire("newGame")},cleanup:function(){d.Event.purgeElement(this.container());d.detach("solitaire|*");this.eachStack(function(e){e.cleanup()})},setup:function(e){Game=b.game=this;d.fire("beforeSetup");b.moves=null;c.clear();this.stationary(function(){this.init();d.Solitaire.Animation.initQueue();this.createStacks();this.createEvents();this.createDraggables();e.call(this)});b.moves=[];d.fire("afterSetup");d.Solitaire.Animation.dealing=true;Game.eachStack(function(f){f.updateCardsStyle();f.updateCardsPosition()});d.Solitaire.Animation.dealing=false},createEvents:function(){var e=d.one(b.selector);e.delegate("dblclick",Game.autoPlay,".card");e.delegate("contextmenu",Game.autoPlay,".card");e.delegate("click",Game.Events.click,".card");e.delegate("touchend",Game.Events.click,".card");d.on("solitaire|endTurn",Game.Events.endTurn);d.on("solitaire|undo",Game.Events.undo)},createDraggables:function(){var e=new a({dragConfig:{dragMode:"intersect",groups:["open"],clickPixelThresh:0},container:b.selector,nodes:".card"});e.dd.plug(d.Plugin.DDProxy,{borderStyle:"none",moveOnEnd:false});e.on("drag:drag",Game.Events.drag);e.on("drag:mouseDown",Game.Events.dragCheck);e.on("drag:start",Game.Events.dragStart);e.on("drag:dropmiss",Game.Events.dragMiss);e.on("drag:drophit",Game.Events.drop);e.on("drag:end",Game.Events.dragEnd)},createField:function(l){if(!l){return}var k=instance(l),m,g,j,h,e;if(l.stackConfig){m=l.stackConfig.layout;j=new Array(l.stackConfig.total);l.Stack.field=l.field;for(h=0,e=j.length;h<e;h++){g=instance(l.Stack);g.configLayout=m;g.layout(d.merge(m,{hoffset:h*m.hspacing||0,voffset:h*m.vspacing||0}),h);j[h]=g}}k.stacks=j;typeof k.init==="function"&&k.init();return k},createStacks:function(){this.eachStack(function(e){e.cards=[];e.createNode()})},eachStack:function(f,e){Game&&d.Array.each(Game.fields,function(h){var g=h.toLowerCase(),i=Game[g],j=e||g;j===g&&i.stacks&&d.Array.each(i.stacks,f)})},resize:function(e){d.fire("beforeResize");this.scale(e);this.unanimated(function(){this.eachStack(function(f,g){var j=f.cards,h=f.configLayout;f.adjustRankHeight();f.cards=[];f.layout(d.merge(h,{hoffset:g*h.hspacing||0,voffset:g*h.vspacing||0}),g);f.updateStyle();f.setCards(j.length,function(l){var k=j[l];k&&k.updateStyle();return k});f.update()})});d.fire("afterResize")},scale:function(g){var e=d.Solitaire.Card,f=e.base,h;e.scale=g;for(h in f){if(f.hasOwnProperty(h)){e[h]=f[h]*g}}},init:function(){var g=b.preventDefault,f,h,e;d.on("selectstart",g,document);d.on("mousedown",g,document.body);d.on("contextmenu",function(j){var i=j.target;if(i.hasClass("stack")||i.hasClass("card")){j.preventDefault()}},document);this.scale(1);e=d.Array.map(Game.fields,function(i){return Game[i.toLowerCase()]=Game.createField(Game[i])});if(Game.fields.indexOf("Deck"===-1)){Game.deck=Game.createField(Game.Deck)}f=Math.min.apply(Math,d.Array.map(e,function(i){return d.Array.map(i.stacks,function(j){return j.left})}).flatten());h=Math.max.apply(Math,d.Array.map(e,function(i){return d.Array.map(i.stacks,function(j){return j.left})}).flatten())+this.Card.width;this.widthScale=(h-f)/this.Card.base.width},preventDefault:function(f){f.preventDefault()},autoPlay:function(){var e=typeof this.getCard==="function"?this.getCard():this.getData("target");e.autoPlay()},isWon:function(){var k=this.foundation.stacks,f=this.deck,h,j=0,g,e;h=f.suits.length*13*f.count;for(g=0,e=k.length;g<e;g++){j+=k[g].cards.length}return j===h},win:function(){d.fire("win");d.Cookie.remove("saved-game")},endTurn:function(){d.fire("endTurn")}});d.Solitaire.Events={click:function(g){var f=g.target.getData("target");if(f.dragging){return}f.dragging=false;f.turnOver(g);b.moves.reverse();b.endTurn();g.preventDefault()},clickEmptyDeck:function(){Game.redeal();b.moves.reverse();b.endTurn()},drag:function(){this.getCard().dragging=true},dragCheck:function(){var f=this.getCard(),e=f.createProxyStack();if(!e){return}b.activeCard=f;Game.eachStack(function(g){g.updateDragGroups()})},dragStart:function(){var e=this.getCard(),g=this.get("dragNode"),f=e.createProxyNode();if(f){g.setContent(f);!e.proxyStack&&d.one(".yui3-dd-shim").setStyle("cursor","not-allowed")}},dragMiss:function(){var e=this.getCard();Game.unanimated(function(){e.updatePosition()})},dragEnd:function(){var j=this.getCard(),m=b.container(),k=new d.Node(document.createDocumentFragment()),g,h,i=this.dd.realXY,n=m.getXY(),e,l,f=j.proxyStack;j.dragging=false;g=this.get("dragNode");h=g.get("firstChild");h&&h.remove();if(!f){return}e=f.cards;l=j.stack;f.left=i[0]-n[0];f.top=i[1]-n[1];Game.unanimated(function(){f.updateCardsPosition()});d.Array.each(e,function(o){if(!o){return}o.proxyStack=null;k.append(o.node)});m.append(k);l.updateCardsPosition()},drop:function(j){if(!b.activeCard){return}var h=b.activeCard,f=h.proxyStack,g=h.stack,i,k;if(f){k=f.first();i=j.drop.get("node").getData("target");i=i.stack||i;if((f.cards.length===1&&k.validTarget(i))||f.validTarget(i)){i.pushStack(f)}}b.endTurn()},endTurn:function(){b.moves.length&&c.push(b.moves);b.moves=[];b.activeCard=null;Game.eachStack(function(e){e.updateCardsStyle()});if(Game.isWon()){Game.win()}else{Game.save()}},undo:function(){var e=argsArray(arguments);e.unshift("endTurn");c.undo();d.fire.apply(d,e)}};d.Solitaire.Deck={count:1,suits:["c","d","h","s"],init:function(f){var g=this.suits,j,h,k,i,e=Game.Card;this.cards=[];for(i=0;i<this.count;i++){for(k=1;k<=13;k++){for(h=0;j=g[h];h++){this.cards.push(e.create(k,j).faceDown())}}}if(f===undefined){this.cards.shuffle()}else{this.msSeededShuffle(f)}},msSeededShuffle:function(e){var k=this.cards,g=Math.pow(2,31),j,f,h;for(h=k.length;h>1;h--){e=((214013*e)%g+2531011)%g;j=(e>>16)&32767;item=k[h-1];f=k[j%h];k[h-1]=f;k[j%h]=item}},createStack:function(){var e;for(e=this.cards.length-1;e>=0;e--){this.stacks[0].push(this.cards[e])}},last:function(){return this.cards.last()},pop:function(){return this.cards.pop()}};d.Solitaire.Card={zIndex:1,index:-1,width:null,height:null,rankHeight:null,hiddenRankHeight:null,isFaceDown:false,positioned:false,scale:1,stack:null,proxyStack:null,ghost:true,dragging:false,node:null,callback:null,left:0,top:0,base:{},origin:{left:function(){var e=b.container().getXY()[0];return -e-d.Solitaire.Card.width},top:function(){var e=b.container().getXY()[1];return -e-d.Solitaire.Card.height}},animSpeeds:{slow:0.5,mid:0.2,fast:0.1},create:function(g,f){var e={c:0,s:0,h:1,d:1};return instance(this,{rank:g,suit:f,color:e[f]})},truncatePosition:function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top)},faceDown:function(e){this.isFaceDown=true;this.setRankHeight();this.setImageSrc();e||b.pushMove({card:this,faceDown:true});return this},faceUp:function(e){this.isFaceDown=false;this.setRankHeight();this.setImageSrc();e||b.pushMove({card:this,faceDown:false});return this},setRankHeight:function(){var e=this.stack,f,g;if(e&&e.rankHeight){f=e.rankHeight;g=e.hiddenRankHeight}else{f=b.Card.rankHeight;g=b.Card.hiddenRankHeight}this.rankHeight=this.isFaceDown?g:f},imageSrc:function(){var e=this.base.theme+"/";e+=this.isFaceDown?"facedown":this.suit+this.rank;e+=".png";return e},setImageSrc:function(){var e=this.node;e&&e.setAttribute("src",this.imageSrc())},wrapperStyle:function(){return{left:this.left,top:this.top,width:Math.floor(this.width),height:Math.floor(this.height)}},updateStyle:function(){var e=this.node;e&&e.setStyles(this.wrapperStyle());this.setRankHeight()},turnOver:function(g){if(!this.isFaceDown){return}var f=this.stack;if(f.field==="deck"){Game.turnOver()}else{if(this.isFree()){this.faceUp()}}g.stopPropagation()},autoPlay:function(){var f=this.stack,k=f.last(),j,g,h,e;if(this.isFaceDown||f.field==="foundation"){return}j=Game.foundation.stacks;for(h=0,e=j.length;h<e;h++){g=j[h];if(this.isFree()&&this.validTarget(g)){this.moveTo(g);f.updateCardsPosition();f.update();b.endTurn();return true}}return false},ensureDOM:function(){!this.node&&this.createNode()},isFree:function(){return this===this.stack.last()},playable:function(){return this.stack.field==="deck"||(this.isFree()&&(this.stack.field!=="foundation"))},createNode:function(){var e,g,f=this;g=this.node=d.Node.create("<img class='card'>").setData("target",this).setAttribute("src",this.imageSrc()).plug(d.Plugin.Drop,{useShim:false});g.setStyles({left:-this.width,top:-this.height});this.setRankHeight();b.container().append(g)},destroyNode:function(){var e=this.node;e&&e.clearData().destroy(true)},createProxyStack:function(){if(this.isFaceDown||this.stack.field==="foundation"){this.proxyStack=null;return null}var f=instance(this.stack,{proxy:true,stack:this.stack}),j=f.cards,g,h,e;f.cards=[];f.push(this,true);for(h=j.indexOf(this)+1,e=j.length;h<e;h++){g=j[h];if(f.validProxy(g)){f.push(g,true)}else{break}}this.proxyStack=h===e?f:null;return this.proxyStack},proxyCards:function(){return this.proxyStack.cards},createProxyNode:function(){var f=d.Node.create("<div>"),e=this.proxyStack;if(!e){if(!this.ghost){return null}f.setStyles({opacity:0.6,top:-this.top,left:-this.left}).append(this.node.cloneNode(true))}else{f.setStyles({opacity:1,top:-this.top,left:-this.left});d.Array.each(this.proxyCards(),function(g){g.proxyStack=e;f.append(g.node)})}return f},updatePosition:function(e){if(!this.node){return}var g={left:this.left+"px",top:this.top+"px",zIndex:this.zIndex},f=this.origin;if(!this.positioned){this.node.setStyles({left:normalize(f.left),top:normalize(f.top)})}d.Solitaire.Animation.init(this,g,e)},pushPosition:function(){var e=this.index>=0?this.index:this.stack.cards.indexOf(this);b.pushMove({card:this,index:e,from:this.stack})},moveTo:function(e){var f=this.stack;this.pushPosition();f.deleteItem(this);e.push(this);d.fire(f.field+":afterPop",f);return this},after:function(e){this.callback=e},runCallback:function(){if(this.callback){this.callback.call(this);this.callback=null}}};d.Solitaire.Stack={cards:null,node:null,images:{tableau:"freeslot.png",deck:"freeslot.png",reserve:"freeslot.png",foundation:"freeslot.png"},serialize:function(){var h,e,k=this.cards,g,f=Game.deck.suits,l,j=[];for(h=0,e=k.length;h<e;h++){g=k[h];if(g){l=f.indexOf(g.suit)|g.rank<<2|g.isFaceDown<<6}else{l=128}j.push(String.fromCharCode(l))}return j.join("")},eachCard:function(h){var f,e,g=this.cards;for(f=0,e=g.length;f<e;f++){if(g[f]){if(h.call(this,g[f],f)===false){return false}}}return true},setCards:function(j,f){var h,e,g,l,k=instance(Game.Card,{updatePosition:b.noop,ensureDOM:b.noop});l=this.cards=[];for(h=0;h<j;h++){g=f.call(this,h)||k;this.push(g)}for(h=0;h<j;h++){if(l[h]===k){l[h]=null}}},updateCardsPosition:function(){var e=this.cards;Game.stationary(function(){this.proxy||this.adjustRankHeight();this.setCards(e.length,function(g){var f=e[g];if(f){f.stack=this;f.setRankHeight()}return f})}.bind(this));this.eachCard(function(f){f.updatePosition()})},updateCardsStyle:function(){var e=this.field;e==="foundation"||this.eachCard(function(f){if(f.playable()){f.node.addClass("playable")}else{f.node.removeClass("playable")}})},unserialize:function(g){var f=Game.deck,e=Game.Card;this.setCards(g.length,function(j){var k,h;k=g.charCodeAt(j);if(k===128){h=null}else{h=e.create((k>>2)&15,f.suits[k&3]);k&64?h.faceDown(true):h.faceUp(true)}return h});this.update()},imageSrc:function(){var e=this.images[this.field];return e?b.Card.base.theme+"/"+e:"trans.gif"},layout:function(i){var h=i.hoffset*d.Solitaire.Card.width,f=i.voffset*d.Solitaire.Card.height,g=b.offset,e=this;d.Array.each(["top","left"],function(j){e[j]=normalize(i[j])});this.left+=h+g.left;this.top+=f+g.top},deleteItem:function(e){this.cards.deleteItem(e)},push:function(f,e){var g=this.last(),i=this.field,h=f.stack?f.stack.field:"deck";if(g){f.zIndex=g.zIndex+1}else{if(i==="deck"||i==="foundation"){f.zIndex=200}else{if(h==="deck"){f.zIndex=Game.Card.zIndex}}}if(!e){f.stack=this;this.setCardPosition(f);f.truncatePosition();f.ensureDOM()}this.cards.push(f);e||f.updatePosition({from:h,to:i})},pushStack:function(g){var f=b.activeCard.stack,e=this;f.eachCard(function(h,j){h.index=j});Game.stationary(function(){g.eachCard(function(h){h.moveTo(e);h.index=-1});f.eachCard(function(h){h.index=-1})});f.updateCardsPosition();f.update();d.fire(e.field+":afterPush",e)},adjustRankHeight:function(){var f=this.cards,j,t=this.last(),r=Game.maxStackHeight(),q=0,h=0,k,u=0,p=b.Card,e=0,g=0,o,m,l,n;if(f.length<=1){return}for(l=0,n=f.length-1;l<n;l++){if(!f[l]){return}if(f[l].isFaceDown){q+=p.hiddenRankHeight;e++;u+=p.hiddenRankHeight}else{h+=p.rankHeight;g++;u+=p.rankHeight}}if(t){u+=t.height;k=r-t.height}if(u<=r){this.rankHeight=0;this.hiddenRankHeight=0;return}o=k*(q/(q+h))/e;m=k*(h/(q+h))/g;this.hiddenRankHeight=Math.floor(o);this.rankHeight=Math.floor(m)},first:function(){return this.cards[0]},last:function(){return this.cards.last()},index:function(){return Game[this.field].stacks.indexOf(this)},next:function(){return Game[this.field].stacks[this.index()+1]},setCardPosition:function(e){e.top=this.top;e.left=isNaN(this.left)?null:this.left},wrapperStyle:function(){return{left:Math.floor(this.left),top:Math.floor(this.top),width:Math.floor(d.Solitaire.Card.width),height:Math.floor(d.Solitaire.Card.height)}},updateStyle:function(){var e=this.node;e&&e.setStyles(this.wrapperStyle())},createNode:function(){var e=this.node;e=this.node=d.Node.create("<img class='stack'>").setAttribute("src",this.imageSrc()).setData("target",this).plug(d.Plugin.Drop,{useShim:true});this.updateStyle();b.container().append(e)},cleanup:function(){var e=this.node;e&&e.clearData().destroy(true);this.eachCard(function(f){f.destroyNode()})},updateDragGroups:function(){var j=b.activeCard,h=this.cards,g=this.last(),e,f=h.length-1;this.eachCard(function(i){i.node.drop.removeFromGroup("open")});if(j.validTarget(this)){if(g){g.node.drop.addToGroup("open")}this.node.drop.addToGroup("open")}else{this.node.drop.removeFromGroup("open")}},validCard:function(){return true},validProxy:function(e){return e&&e.validTarget(this)&&this.validCard(e)},update:function(){}};d.Solitaire.Animation={animate:true,dealing:false,duration:0.5,interval:20,queue:new d.AsyncQueue(),init:function(g,m,k){if(!this.animate){g.node.setStyles(m);g.positioned=true;setTimeout(function(){g.runCallback()},0);return}var f=g.node,e=this.queue,j=g.animSpeeds,n={top:f.getStyle("top"),left:f.getStyle("left")}.mapToFloat().mapAppend("px"),l=m.zIndex,i,h;if(n.top===m.top&&n.left===m.left){return}if(this.dealing){i=j.slow}else{if(!k||k.from===k.to||k.to==="waste"||k.to==="foundation"){i=j.fast}else{if(k.from==="deck"){i=j.slow}else{i=j.mid}}}f.setStyle("zIndex",500+l);delete m.zIndex;h=new d.Anim({node:f,from:n,to:m,easing:d.Easing.easeOut,duration:i});h.on("end",function(){g.positioned=true;f.setStyle("zIndex",l);g.runCallback()});e.add(function(){h.run()});e.run()},initQueue:function(){var e=this.queue;e.defaults.timeout=this.interval}};var c={stack:null,clear:function(){this.stack=[]},push:function(e){this.stack.push(e)},pop:function(){return this.stack.pop()||[]},undo:function(){var e;e=d.Array.unique(d.Array.map(this.pop(),this.act).flatten());d.Array.each(e,function(f){if(f){f.updateCardsPosition();f.update(true)}})},act:function(e){var i=e.from,f=e.card,h=f.stack,g=h.cards;if(i){if(i===f.stack){g[g.indexOf(f)]=null}else{g.deleteItem(f)}i.cards[e.index]=f;f.stack=i;b.container().append(f.node)}if("faceDown" in e){e.faceDown?f.faceUp(true):f.faceDown(true)}return[h,i]}}},"0.0.1",{requires:["dd","dd-plugin","dd-delegate","anim","async-queue","cookie","array-extras"]});YUI.add("solitaire-ios",function(e){if(!e.UA.ios){return}var o=e.Solitaire,q=o.scale,r=0,h=1,u={hspacing:0,vspacing:0,left:0,top:0,},c={scale:1,offset:60,maxStackHeight:155},v={Agnes:{offset:[null,5],maxStackHeight:260},FlowerGarden:{offset:[-60,5],maxStackHeight:235},Freecell:{scale:[1,0.93],offset:[35,5]},Golf:{scale:[1.1,1],offset:[45,8]},GClock:{scale:0.93,offset:5,maxStackHeight:130},Klondike:{offset:[null,5],maxStackHeight:[null,340]},MonteCarlo:{scale:[0.88,1],offset:[80,15]},Pyramid:{offset:20},Scorpion:{offset:5,maxStackHeight:[235,380]},Spider:{scale:[1.13,0.79],offset:[5,2],maxStackHeight:[160,340]},TriTowers:{scale:0.9,offset:10},Yukon:{scale:[0.95,1],offset:[50,5],maxStackHeight:[235,390]}},k={Agnes:function(){var z={hspacing:1.13};l(this,"Reserve",e.merge(z,{top:60}));l(this,"Tableau",e.merge(z,{top:145}));l(this,"Foundation",e.merge(z,{left:135}))},FlowerGarden:[function(){this.Card.rankHeight=15;l(this,"Reserve",{top:0,left:70});l(this,"Foundation",{top:0,left:470,hspacing:0,vspacing:1.1});l(this,"Tableau",{top:0,left:140});e.mix(this.Reserve.Stack,{setCardPosition:function(z){var A=this.cards.last(),C=A?A.top+11:this.top,B=this.left;z.left=B;z.top=C},update:o.noop},true)},function(){var z=o.FlowerGarden.Reserve.Stack.setCardPosition;return function(){l(this,"Tableau",{left:10,top:120});l(this,"Reserve",{left:17,top:60});l(this,"Foundation",{left:55,top:0,hspacing:1.5,vspacing:0});e.mix(this.Reserve.Stack,{setCardPosition:z,update:o.noop},true)}}()],Freecell:[x("Freecell",["Foundation","Reserve","Tableau"]),function(){var z={hspacing:1.05};l(this,"Tableau",z);l(this,"Reserve",z);l(this,"Foundation",e.merge(z,{left:157}))}],Golf:[x("Golf",["Tableau","Foundation"]),function(){l(this,"Tableau",{hspacing:1.1});l(this,"Foundation",{left:132})}],GClock:function(){l(this,"Foundation",{left:143,});l(this,"Tableau",{left:0,top:250,hspacing:1.05})},Klondike:[function(){x("Klondike","Foundation").call(this);x("Klondike","Tableau").call(this)},function(){e.mix(this.Foundation.stackConfig.layout,{left:135,hspacing:1.13},true);e.mix(this.Tableau.stackConfig.layout,{hspacing:1.13},true)}],MonteCarlo:function(){l(this,"Tableau",{cardGap:1.1,vspacing:1.05})},Pyramid:[function(){var z=x("Pyramid","Deck");var A=x("Pyramid","Waste");return function(){z.call(this);A.call(this);e.mix(this.Tableau.stackConfig.layout,{left:190,cardGap:1.1,hspacing:-0.55},true)}}(),function(){e.mix(this.Deck.stackConfig.layout,{left:-10,top:300,},true);e.mix(this.Waste.stackConfig.layout,{top:300,},true);e.mix(this.Tableau.stackConfig.layout,{left:120,cardGap:1.1,hspacing:-0.55},true)}],Scorpion:[function(){l(this,"Deck",{top:0,left:0});l(this,"Foundation",{top:0,left:420,hspacing:0,vspacing:1.1});l(this,"Tableau",{left:60,top:0,hspacing:1.13})},function(){l(this,"Deck",{left:10,top:0});l(this,"Foundation",{left:75,top:0,hspacing:1.5,vspacing:0});l(this,"Tableau",{left:0,top:60,hspacing:1.13})}],Spider:[function(){l(this,"Foundation",{left:94,hspacing:1.05});l(this,"Tableau",{top:65,hspacing:1.05})},function(){l(this,"Foundation",{left:62,hspacing:1});l(this,"Tableau",{hspacing:1})}],TriTowers:function(){e.mix(this.Tableau.stackConfig.layout,{hspacing:-0.5,rowGaps:[3,2,1,0],cardGap:1},true)},RussianSolitaire:[x("RussianSolitaire",["Tableau","Foundation"]),function(){l(this,"Tableau",{top:55,hspacing:1.13});l(this,"Foundation",{left:46,top:0,hspacing:1.5,vspacing:0})}],Yukon:[x("Yukon",["Tableau","Foundation"]),function(){l(this,"Tableau",{top:55,hspacing:1.13});l(this,"Foundation",{left:46,top:0,hspacing:1.5,vspacing:0})}]};v.FortyThieves=v.Spider1S=v.Spider2S=v.Spider;k.FortyThieves=k.Spider1S=k.Spider2S=k.Spider;v.WillOTheWisp=v.Spiderette=v.Klondike1T=v.Klondike;k.WillOTheWisp=k.Spiderette=k.Klondike1T=k.Klondike;v.RussianSolitaire=v.Yukon;e.mix(e.DD.DDM,{useHash:false,_pg_activate:o.noop,_pg_size:function(){if(this.activeDrag){this._pg.setStyles({width:"100%",height:"100%"})}}},true);e.DD.DDM.set("throttleTime",40);e.mix(e.DD.Drop.prototype,{_activateShim:function(){var z=e.DD.DDM;if(!z.activeDrag){return false}if(this.get("node")===z.activeDrag.get("node")){return false}if(this.get("lock")){return false}if(this.inGroup(z.activeDrag.get("groups"))){z._addValid(this);this.overTarget=false;if(!this.get("useShim")){this.shim=this.get("node")}this.sizeShim()}else{z._removeValid(this)}},_deactivateShim:function(){this.overTarget=false}},true);o.Statistics.winDisplay=function(){alert("You win!")};o.scale=o.noop;o.Card.ghost=false;o.Animation.animate=false;o.Card.base={theme:"mobile",hiddenRankHeight:3,rankHeight:15,width:40,height:50};function l(z,B,A){e.mix(z[B].stackConfig.layout,A,true)}function x(A,z){var B,C=function(D){return[D,e.merge(u,o[A][D].stackConfig.layout)]};B=e.Array.map(e.Array(z),C);return function(){var D=this;e.each(B,function(E){e.mix(D[E[0]].stackConfig.layout,E[1],true)})}}function b(){var z=o.name(),A;if(k.hasOwnProperty(z)){A=n(k[z]);A.call(o.game)}}function n(A){var z=window.innerWidth===480?r:h,B;if(!A.length){return A}B=A[z];return B?B:A[r]}function m(B){var z=o.name(),A=v[z],D=c[B],C=A?A[B]:D;return n(C?C:D)||D}function y(){q.call(o.game,m("scale"))}function i(){return m("offset")}function g(){return m("maxStackHeight")}function a(A){var z=A.target;if(z.hasClass("stack")||z.hasClass("card")){return}A.preventDefault()}function j(){function z(A){return{deleteSelector:function(C){var D=document.styleSheets[A],E,B;if(!D){return}E=Array.prototype.splice.call(D.rules,0);B=E.indexOf(E.filter(function(F){return F.selectorText===C})[0]);if(B!==-1){D.deleteRule(B)}}}}z(0).deleteSelector("#menu li:hover")}function f(z){if(z.target.test("#descriptions *")){return}z.preventDefault()}function t(){var B,E,C,G,A,F,D,z=function(){G.removeClass("show")};j();G=e.one("#menu");A=e.one("body");B=e.one("#undo");D=e.one("#social");F=e.Node.create("<nav id=navbar>");C=e.Node.create("<a id=show_menu class='button'>New Game</a>");E=e.Node.create("<li class=cancel><a id='cancel'>Cancel</a></li>");B.get("parentNode").remove();C.on("click",function(){G.addClass("show")});G.append(E);F.append(C);if(D){navigator.onLine?F.append(D):D.remove()}F.append(B.addClass("button"));A.append(F);e.on("click",z,["#cancel","#new_deal","#restart"]);o.Application.GameChooser.draggable=false;e.one("#game-chooser .titlebar").append(document.createTextNode("Games"));e.one("#game-chooser .close").append(document.createTextNode("Back"));e.delegate("touchstart",function(H){H.target.ancestor("li",true).addClass("hover")},"#descriptions","li");e.delegate("touchend",function(H){H.target.ancestor("li",true).removeClass("hover")},"#descriptions","li");e.on("gamechooser:select",function(H){H.choose();z()});e.on("gamechooser:hide",function(){w()});if(navigator.standalone){A.addClass("fullscreen")}o.Application.resizeEvent="orientationchange"}function d(A){var z=e.one("body"),C,B;if(A){C="portrait";B="landscape"}else{C="landscape";B="portrait"}z.removeClass(C).addClass(B)}function p(){var z=o.name(),B=window.innerWidth===480,A=g();d(B);b();o.offset={left:i(),top:10};o.maxStackHeight=function(){return A};y()}function w(){setTimeout(function(){scrollTo(0,0)},10)}e.on("beforeSetup",p);e.on("beforeResize",p);e.on("afterResize",w);e.on("load",w);e.on("touchstart",function(z){if(z.target._node===document.body){z.preventDefault()}},document);e.on("touchmove",f,document);e.on("domready",t)},"0.0.1",{requires:["solitaire","statistics"]});YUI.add("auto-stack-clear",function(b){var a=b.Solitaire;b.namespace("Solitaire.AutoStackClear");a.AutoStackClear.register=function(){b.on("solitaire|tableau:afterPush",function(e){d(e,c)})};function d(e,m){var k=e.cards,l,j,g,f,h;if(!k.length){return false}for(h=k.length-1,l=1,j=k[h].suit;h>=0&&l<14;h--,l++){g=k[h];if(g.isFaceDown||g.rank!==l||g.suit!==j){return false}}f=l===14;f&&typeof m==="function"&&m(e,h+1);return f}function c(e,i){var f,h=e.cards,g=h.length-i;f=b.Array.find(a.game.foundation.stacks,function(j){return !j.cards.length});a.stationary(function(){while(g){h.last().moveTo(f);g--}});e.updateCardsPosition()}},"0.0.1",{requires:["solitaire"]});YUI.add("auto-turnover",function(a){a.on("tableau:afterPop",function(b){a.Array.each(b.cards,function(c){if(c&&c.isFaceDown&&c.isFree()){c.faceUp()}})})},"0.0.1",{requires:["solitaire"]});YUI.add("solitaire-autoplay",function(h){h.namespace("Solitaire.Autoplay");var d=h.Solitaire,f=d.Autoplay,g=true,b=null,a=["Klondike","Klondike1T","FortyThieves","GClock","Freecell","FlowerGarden","Yukon"];h.on("endTurn",function(){if(!g||a.indexOf(d.game.name())===-1){return}if(b===null&&e()){h.fire("autoPlay")}});h.on("win",function(){clearInterval(b);b=null});h.on("autoPlay",function(){b=setInterval(c,130)});function c(){var i=false;d.game.eachStack(function(j){var k=j.field;if(i||k==="foundation"||k==="deck"){return}i=!j.eachCard(function(l){return !l.autoPlay()})})}function e(){var i=false;d.game.eachStack(function(j){var l=j.field,k=14,m;if(i||l!=="tableau"&&l!=="waste"){return}m=j.eachCard(function(n){if(n.rank>k||n.isFaceDown){i=true;return false}else{k=n.rank}})});return !i}h.mix(f,{enable:function(){g=true},disable:function(){g=false}})},"0.0.1",{requires:["solitaire"]});YUI.add("solitaire-background-fix",function(d){var c;d.on("load",b);d.on("resize",b);function b(){var g=a().get("winWidth"),e=a().get("winHeight"),f=document.body.style;if(!d.UA.mobile){a().setStyles({width:g,height:e})}if(f.backgroundSize===undefined&&f.MozBackgroundSize===undefined){a().setStyles({backgroundImage:"url(greentiled.jpg)",backgroundRepeat:"repeat"})}}function a(){if(!c){c=new d.Node(document.body)}return c}},"0.0.1",{requires:["solitaire"]});YUI.add("statistics",function(c){var g,i,l=true,o=window.localStorage,e=c.Solitaire,b=c.namespace("Solitaire.Statistics");if(!o){return}c.on("newGame",function(){if(g){d()}i=false;g=null});c.on("loadGame",function(){g=e.game.name();f();i=false});c.on("endTurn",function(){if(!g){g=e.game.name();f()}});c.on("win",function(){if(i||!l){return}var p=1000;g=null;i=true;k();j()});c.on("beforeSetup",function(){var p=c.one("#win_display");p&&p.remove();b.enable()});function j(){var q=500,r=900,p=900;Game.eachStack(function(t){t.eachCard(function(u){if(!u){return}var v=u.node;if(u!==t.last()){v.addClass("hidden");return}v.plug(c.Breakout,{columns:5});(function(w){setTimeout(function(){w.breakout.explode({random:0.65,duration:r})},q)})(v);q+=p})},"foundation");setTimeout(function(){b.winDisplay()},q+200)}function n(){var v={Agnes:"Agnes",Klondike:"Klondike",Klondike1T:"Klondike (Vegas style)",FlowerGarden:"Flower Garden",FortyThieves:"Forty Thieves",Freecell:"Freecell",Golf:"Golf",GClock:"Grandfather's Clock",MonteCarlo:"Monte Carlo",Pyramid:"Pyramid",RussianSolitaire:"Russian Solitaire",Scorpion:"Scorpion",Spider:"Spider",Spider1S:"Spider (1 Suit)",Spider2S:"Spider (2 Suit)",Spiderette:"Spiderette",WillOTheWisp:"Will O' The Wisp",TriTowers:"Tri Towers",Yukon:"Yukon"},u=m(o[e.game.name()+"record"]),t,r,q,p="<div id='win_display'>";t=u.streaks().last().length;r=u.wins().length;q=u.loses().length;p+="<p>You win! You're awesome.</p>";p+="<h2>"+v[e.game.name()]+" stats:</h2>";p+="<ul>";p+="<li>Current win streak: <span class='streak'>"+t+"</li>";p+="<li>Total wins: <span class='wins'>"+r+"</li>";p+="<li>Total loses: <span class='loses'>"+q+"</li>";p+="<div class=replay_options><button class=new_deal>New Deal</button><button class=choose_game>Choose Game</button></div>";p+="</ul></div>";return p}function h(r){var q=o.currentGame+"record",p=o[q]||"";p+=new Date().getTime()+"_"+r+"|";o[q]=p}function d(){h(0);a()}function k(){h(1);a()}function a(){o.removeItem("currentGame")}function f(){o.currentGame=e.game.name()}function m(q){function t(){var u=q.split("|");u.splice(u.length-1);return c.Array.map(u,function(v){v=v.split("_");return{date:new Date(v[0]),won:!!parseInt(v[1],10)}})}function r(u){return u.won}var p=t();return{streaks:function(){var v=[],u=null;c.Array.each(p,function(w){if(!w.won){u&&v.push(u);u=null}else{if(!u){u=[]}u.push(w)}});u&&v.push(u);return v},wins:function(){return c.Array.filter(p,r)},loses:function(){return c.Array.reject(p,r)}}}c.mix(b,{winDisplay:function(){var p=e.Application;c.one("body").append(n());c.on("click",function(){p.newGame()},c.one("#win_display .new_deal"));c.on("click",function(){p.GameChooser.show(true)},c.one("#win_display .choose_game"))},enable:function(){l=true},disable:function(){l=false}})},"0.0.1",{requires:["solitaire","array-extras","breakout"]});YUI.add("solver-freecell",function(a){a.namespace("Solitaire.Solver.Freecell");if(!(window.Worker&&window.ArrayBuffer&&window.Uint8Array)){return}var d=a.Solitaire,k=d.Solver.Freecell,b={s:0,h:1,c:2,d:3};function h(o){return o?o.rank<<2|b[o.suit]:0}function m(o){return o>>2}function e(o){return["s","h","c","d"][o&3]}function n(p,o){return o[0]-p[0]}function f(o){return a.Array.map(o.stacks,function(p){return p}).sort(function(r,p){var t=r.first(),q=p.first();return h(t)-h(q)})}function g(p){var o,q,r;r=a.Array.map(f(p.tableau),function(u){var t=[];u.eachCard(function(w,v){t[v]=h(w)});return[t,u.cards.length]});o=[];a.Array.forEach(f(p.reserve),function(u,t){o[t]=h(u.last())});q=[];a.Array.forEach(f(p.foundation),function(u,t){q[t]=h(u.last())});return{reserve:o,foundation:q,tableau:r}}function c(p,o){var u=o.source,r=o.dest,t,q={};t=u[1];p.eachStack(function(v){if(q.card){return}var w=v.last();if(!w){return}if(w.rank===m(t)&&w.suit===e(t)){q.card=w}},u[0]);t=r[1];p.eachStack(function(v){if(q.stack){return}var w=v.last();if(!(w||t)){q.stack=v}if(w&&(w.rank===m(t)&&w.suit===e(t))){q.stack=v}},r[0]);return q}function j(o,q){var p=a.one(o);if(p){q(p)}}var i={interval:500,timer:null,remainingMoves:null,init:function(o){var p=o;while(p){if(p.next){p.next.prev=p}p=p.next}this.remainingMoves=o},pause:function(){d.Autoplay.enable();window.clearTimeout(this.timer);this.timer=null;j("#solver_bar .pause",function(o){o.removeClass("pause");o.addClass("play")})},playCurrent:function(q){var o,r,p;if(!this.remainingMoves){return}o=c(q,this.remainingMoves);r=o.card;if(!r){return}p=r.stack;r.after(function(){p.updateCardsPosition();o.stack.updateCardsPosition()});r.moveTo(o.stack)},prev:function(o){var p=this.remainingMoves.prev;if(p){a.fire("undo",true);this.remainingMoves=p}},next:function(o){var q=this.remainingMoves,p=this.remainingMoves.next;d.Statistics.disable();this.playCurrent(o);if(p){this.remainingMoves=p}a.fire("endTurn",true)},play:function(q){var o,r,p;if(!this.remainingMoves){return}d.Autoplay.disable();j("#solver_bar .play",function(t){t.removeClass("play");t.addClass("pause")});this.next(q);this.timer=window.setTimeout(function(){this.play(q)}.bind(this),this.interval)}};var l={bar:null,indicator:null,indicatorTimer:null,indicatorInterval:750,delay:400,updateIndicator:function(q){var o=this.indicator,p,r;if(!o){return}q=((q||0)%4);r="Solving";for(p=0;p<q;p++){r+="."}o.set("text",r);this.indicatorTimer=window.setTimeout(this.updateIndicator.partial(q+1).bind(this),this.indicatorInterval)},stopIndicator:function(p){var o=this.indicator;window.clearTimeout(this.indicatorTimer);if(!o){return}if(p){o.set("text","Solution found");j("#solver_bar .controls",function(q){q.removeClass("hidden")})}else{o.set("text","Unable to find solution")}this.indicatorTimer=null},show:function(){if(a.one("#solver_bar")){return}var u=a.Node.create("<div id=solver_bar></div>"),o=a.Node.create("<span class=indicator>"),r=a.Node.create("<div class=fastforward>"),t=a.Node.create("<div class=rewind>"),v=a.Node.create("<div class=play>"),p=a.Node.create("<div class='controls hidden'>"),q;r.on("click",function(){i.next(Game)});t.on("click",function(){i.prev(Game)});v.on("click",function(){if(this.hasClass("play")){i.play(Game)}else{if(this.hasClass("pause")){i.pause()}}});p.append(t);p.append(v);p.append(r);u.append(o);u.append(p);a.one("body").append(u);this.indicator=o;this.bar=u},hide:function(){if(this.bar){this.bar.remove()}}};a.mix(k,{currentSolution:null,worker:null,attached:false,supportedGames:["Freecell"],isSupported:function(){return this.supportedGames.indexOf(Game.name())!==-1},enable:function(){if(this.isSupported()){this.createUI()}this.attachEvents()},disable:function(){if(this.worker){this.worker.terminate()}l.hide()},attachEvents:function(){if(this.attached){return}var o=i.pause.bind(i);a.on("afterSetup",function(){if(this.isSupported()){this.solve()}else{this.disable()}}.bind(this));a.on("endTurn",function(p){if(p||!this.isSupported()){return}this.solve()}.bind(this));a.on("autoPlay",function(){k.disable()});a.on("win",function(){k.disable()});document.documentElement.addEventListener("mousedown",function(p){if(p.target.className.match(/\bpause\b/)){return}o()},true);this.attached=true},createUI:function(){l.show()},stop:function(){if(this.worker){this.worker.terminate()}},solve:function(){this.stop();j("#solver_bar .controls",function(o){o.addClass("hidden")});this.currentSolution=null;this.worker=new Worker("js/solver-freecell-worker.js");this.worker.onmessage=function(p){var o=this.currentSolution=p.data.solution;i.init(o);if(o){l.stopIndicator(true)}else{l.stopIndicator(false)}}.bind(this);this.worker.postMessage({action:"solve",param:g(Game)});window.clearTimeout(l.indicatorTimer);l.indicatorTimer=window.setTimeout(l.updateIndicator.bind(l),l.delay)}});a.on("beforeSetup",k.enable.bind(k))},"0.0.1",{requires:["solitaire"]});var attempts=0,maxFastAttempts=150000;function GameState(c){if(!c){return}var b,a;this.reserve=new Uint8Array(c.reserve);this.foundation=new Uint8Array(c.foundation);this.tableau=[];for(b=0;b<c.tableau.length;b++){a=c.tableau[b];this.tableau[b]=[new Uint8Array(a[0]),a[1]]}}GameState.fromState=function(a){var b=new GameState();b.tableau=a.tableau;b.reserve=a.reserve;b.foundation=a.foundation;return b};GameState.prototype={reserve:null,foundation:null,tableau:null,rating:null,parentMove:null,parent:null,child:null,solved:function(){var c,a,b=this.foundation;for(c=0,a=4;c<a;c++){if((b[c]>>2)!==13){return false}}return true},eachTableau:function(e){var d,b,a,c=this.tableau;for(d=0,b=c.length;d<b;d++){a=c[d];e.call(this,a[0],a[1],d)}},validTarget:function(f,g,a){var c=g>>2,j=g&3,h,b,d,e;if(!g){return -1}if(a===undefined){a=0}else{a++}switch(f){case"foundation":for(d=0;d<4;d++){h=this.foundation[d];if((!h&&c===1)||(j===(h&3)&&c===(h>>2)+1)){return d}}break;case"reserve":for(d=0;d<4;d++){if(!this.reserve[d]){return d}}break;case"tableau":b=this.tableau;for(d=a,e=b.length;d<e;d++){h=b[d][0][b[d][1]-1];if(!b[d][1]||(((j&1)^(h&1))&&(c===(h>>2)-1))){return d}}break}return -1},move:function(b,d,c,a){var e=this.pop(b,d);this.push(c,a,e)},pop:function(g,b){var h,c,f,e,d,a;if(g==="reserve"||g==="foundation"){h=this[g][b];this[g]=new Uint8Array(this[g]);this[g][b]=0;return h}e=this.tableau;f=e[b][1];if(!f){return 0}h=e[b][0][f-1];this.copyTableau(b,f-1);return h},push:function(c,a,d){var b;if(!d){return}if(c==="reserve"||c==="foundation"){this[c]=new Uint8Array(this[c]);this[c][a]=d;return}b=this.tableau[a][1]+1;this.copyTableau(a,b);this.tableau[a][0][b-1]=d},copyTableau:function(b,g){var c=this.tableau,f=c[b][0],d=new Uint8Array(new ArrayBuffer(g)),e,a;for(e=0;e<g;++e){d[e]=f[e]}this.tableau=[];for(e=0,a=c.length;e<a;++e){if(e!==b){this.tableau[e]=c[e]}else{this.tableau[e]=[d,g]}}},sort:function(){Array.prototype.sort.call(this.reserve);Array.prototype.sort.call(this.foundation);this.tableau.sort(function(d,c){return d[0][0]-c[0][0]})},_serialized:null,serialize:function(){if(this._serialized!==null){return this._serialized}var d,c,b,a;this._serialized="";for(d=0;d<4;d++){this._serialized+=String.fromCharCode(this.reserve[d])}this._serialized+="_";for(d=0;d<4;d++){this._serialized+=String.fromCharCode(this.foundation[d])}this._serialized+="_";for(d=0;d<8;d++){a=this.tableau[d];for(c=0;c<a[1];c++){this._serialized+=String.fromCharCode(a[0][c])+"_"}}return this._serialized},rateMove:function(u,e,p,w){var b=1000,j=20,o=15,r=15,l=10,a=10,v=2,f=-1,h=-5,n=-10,k=0,g,c,m,t=false,q,d;if(p==="foundation"){k+=b}if(u==="tableau"){g=this.tableau[e];d=g[1];c=g[0][d-1];if(d===1){k+=r}for(q=d-2;q>=0;q--){if(this.validTarget("foundation",g[0][q])>-1){k+=o-(d-2-q)+(13-(g[0][q]>>2))}}if(this.validTarget("tableau",g[0][d-2])>-1){k+=l}}if(u==="reserve"){k+=a;c=this.reserve[e]}if(p==="tableau"){k+=v;g=this.tableau[w];d=g[1];for(q=d-1;q>=0;q--){if(this.validTarget("foundation",g[0][q])>-1){k+=h*(d-q)}}if(g[1]===0){if(u==="tableau"&&this.tableau[e][1]===1){return -1000}for(q=0;q<4;q++){m=this.reserve[q];if(((m>>2)===(c>>2)-1)&&((m&1)^(c&1))){k+=j+(m>>2);t=true}}for(q=0;q<8;q++){g=this.tableau[q];m=g[0][g[1]-1];if(((m>>2)===(c>>2)-1)&&((m&1)^(c&1))){k+=j+(m>>2);t=true}}if(!t){k+=n}}}if(p==="reserve"){k+=f}return k},transformParentMove:function(){var a=this.parentMove,b=this.parent;if(!(a&&b)){return}a.source[1]=b.lastCard(a.source[0],a.source[1]);a.dest[1]=b.lastCard(a.dest[0],a.dest[1])},lastCard:function(d,b){var a,c;switch(d){case"reserve":case"foundation":return this[d][b];case"tableau":a=this[d][b];c=a[1];return a[0][c-1]}},becomeChild:function(){var a=this.parent;if(!a){return}a.child=this;this.transformParentMove()}};function solve(d,t,m,k,j){var f,a=200,b,q,c,u,g,p,l,e,h,v=[],r=1,o=false,n;if(t>a){return a}if(d.solved()){d.becomeChild();return 0}for(n=0;n<4;n++){u=d.reserve[n];if(!u){continue}q=d.validTarget("foundation",u);if(q>-1){v.push({source:["reserve",n],dest:["foundation",q]});o=true}if(o){break}q=0;while((q=d.validTarget("tableau",u,q))>-1){v.push({source:["reserve",n],dest:["tableau",q]})}}e=d.tableau;for(n=0;n<e.length;n++){s=e[n][0];c=e[n][1];u=s[c-1];if(!u){continue}q=d.validTarget("foundation",u);if(q>-1){v.push({source:["tableau",n],dest:["foundation",q]});o=true}if(o){break}q=d.validTarget("reserve",u);if(q>-1){v.push({source:["tableau",n],dest:["reserve",q]})}q=0;while((q=d.validTarget("tableau",u,q))>-1){v.push({source:["tableau",n],dest:["tableau",q]})}}if(o){k=0}else{k++}for(n=0;n<v.length;n++){h=v[n];g=GameState.fromState(d);p=h.source[0];b=h.source[1];l=h.dest[0];q=h.dest[1];g.rating=g.rateMove(p,b,l,q);g.move(p,b,l,q);g.parentMove=h;g.parent=d;v[n]=g}v.sort(function(w,i){return i.rating-w.rating});if(k>=20){r=0.7}if(j&&(++attempts>maxFastAttempts)){r=0.001}for(n=0;n<v.length&&r===1;n++){h=v[n];if(f<t){break}if(m[h.serialize()]){if(j){break}else{continue}}m[h.serialize()]=true;f=solve(h,t+1,m,k,j)}if(f===0){d.becomeChild()}if(f===undefined){f=Math.ceil(t*r)}return f}function mapMoves(b){var d=b.child,a=null,c;if(!d){return}a=c=d.parentMove;while(d=d.child){c.next=d.parentMove;c=c.next}return a}function attemptSolution(c,b){var a=new GameState(c);attempts=0;solve(a,1,{},0,b);return mapMoves(a)}onmessage=function(d){var c,a,b=d.data;if(b.action==="solve"){a=attemptSolution(b.param,true);if(!a){a=attemptSolution(b.param,false)}self.postMessage({solution:a})}};YUI.add("agnes",function(f){function e(h,g){return(h+1)%13===g%13}function b(){return c.foundation.stacks[0].first().rank}var d=f.Solitaire,a=d.Klondike,c=d.Agnes=instance(a,{fields:["Foundation","Deck","Waste","Tableau","Reserve"],height:function(){return this.Card.base.height*5.6},maxStackHeight:function(){return this.Card.height*4.3},deal:function(){var g=this.deck.stacks[0],h=this.foundation.stacks[0];a.deal.call(this);g.last().faceUp().moveTo(h);this.turnOver()},redeal:d.noop,turnOver:function(){var g=this.deck.stacks[0],l=this.reserve.stacks,j=this.waste.stacks,k,m,h;if(g.cards.length<7){k=2;m=j}else{k=7;m=l}for(h=0;h<k;h++){g.last().faceUp().moveTo(m[h])}},Waste:instance(a.Waste,{stackConfig:{total:2,layout:{hspacing:1.5,top:0,left:0}},Stack:instance(d.Stack,{setCardPosition:function(g){var h=this.last(),j=this.top,i=h?h.left+d.Card.width*1.5:this.left;g.top=j;g.left=i}})}),Reserve:{field:"reserve",stackConfig:{total:7,layout:{hspacing:1.25,left:0,top:function(){return d.Card.height*4.4}}},Stack:instance(a.Stack,{images:{},setCardPosition:function(g){var h=this.last(),j=h?h.top+h.rankHeight:this.top,i=this.left;g.top=j;g.left=i}})},Card:instance(a.Card,{playable:function(){if(this.stack.field==="reserve"){return this.isFree()}else{return a.Card.playable.call(this)}},validTarget:function(g){var h=g.last();switch(g.field){case"tableau":if(!h){return e(this.rank,b())}else{return !h.isFaceDown&&h.color!==this.color&&e(this.rank,h.rank)}case"foundation":return this.validFoundationTarget(h);default:return false}},validFoundationTarget:function(g){if(!g){return this.rank===b()}else{return this.suit===g.suit&&this.rank%13===(g.rank+1)%13}}})})},"0.0.1",{requires:["klondike"]});YUI.add("golf",function(c){var b=c.Solitaire,a=c.Solitaire.Golf=instance(b,{fields:["Deck","Foundation","Tableau"],deal:function(){var g,d,h=this.tableau.stacks,e=this.deck,f=this.foundation.stacks[0],i;for(i=0;i<5;i++){for(d=0;d<7;d++){g=e.pop().faceUp();h[d].push(g)}}g=e.pop().faceUp();f.push(g);e.createStack()},turnOver:function(){var d=this.deck.stacks[0],e=this.foundation.stacks[0],f=d.last();f&&f.faceUp().moveTo(e)},isWon:function(){var d=true;this.eachStack(function(e){e.eachCard(function(f){if(f){d=false}return d})},"tableau");return d},height:function(){return this.Card.base.height*4},Deck:instance(b.Deck,{field:"deck",stackConfig:{total:1,layout:{hspacing:0,top:function(){return b.Card.height*3},left:0}},createStack:function(){var e,d;for(e=0,d=this.cards.length;e<d;e++){this.stacks[0].push(this.cards[e])}}}),Tableau:{field:"tableau",stackConfig:{total:7,layout:{hspacing:1.25,top:0,left:0}}},Foundation:{field:"foundation",stackConfig:{total:1,layout:{hspacing:0,top:function(){return b.Card.height*3},left:function(){return b.Card.width*3.75}}}},Events:instance(b.Events,{dragCheck:function(d){this.getCard().autoPlay();this._afterDragEnd();d.halt()}}),Card:instance(b.Card,{validTarget:function(d){if(d.field!=="foundation"){return false}var f=d.last(),e=Math.abs(this.rank-f.rank);return e===1},isFree:function(){return !this.isFaceDown&&this===this.stack.last()},}),Stack:instance(b.Stack,{images:{}})},true);c.Array.each(a.fields,function(d){a[d].Stack=instance(a.Stack)});c.mix(a.Tableau.Stack,{setCardPosition:function(d){var e=this.cards.last(),g=e?e.top+e.rankHeight:this.top,f=this.left;d.left=f;d.top=g}},true);c.mix(a.Deck.Stack,{setCardPosition:function(d){var e=this.last(),g,f,h;g=this.top;if(e){f=e.left+d.width*0.1;h=e.zIndex+1}else{f=this.left;h=0}d.top=g;d.left=f;d.zIndex=h}},true)},"0.0.1",{requires:["solitaire"]});YUI.add("klondike",function(c){var b=c.Solitaire,a=c.Solitaire.Klondike=instance(b,{fields:["Foundation","Deck","Waste","Tableau"],deal:function(){var g,e=6,d=0,f=this.deck,h=this.tableau.stacks;while(e>=0){g=f.pop().faceUp();h[6-e].push(g);for(d=7-e;d<7;d++){g=f.pop();h[d].push(g)}e--}f.createStack()},turnOver:function(){var d=this.deck.stacks[0],g=this.waste.stacks[0],j=a.Card.updatePosition,h,f,e;a.Card.updatePosition=b.noop;for(f=d.cards.length,e=f-3;f>e&&f;f--){d.last().faceUp().moveTo(g)}a.Card.updatePosition=j;g.eachCard(function(i){i.updatePosition()})},redeal:function(){var d=this.deck.stacks[0],e=this.waste.stacks[0];while(e.cards.length){e.last().faceDown().moveTo(d)}},Stack:instance(b.Stack),Foundation:{stackConfig:{total:4,layout:{hspacing:1.25,top:0,left:function(){return b.Card.width*3.75}}},field:"foundation",},Deck:instance(b.Deck,{stackConfig:{total:1,layout:{hspacing:0,top:0,left:0}},field:"deck"}),Waste:{stackConfig:{total:1,layout:{hspacing:0,top:0,left:function(){return b.Card.width*1.5}}},field:"waste",},Tableau:{stackConfig:{total:7,layout:{hspacing:1.25,top:function(){return b.Card.height*1.5},left:0}},field:"tableau",},Card:instance(b.Card,{playable:function(){switch(this.stack.field){case"tableau":return !this.isFaceDown;case"foundation":return false;case"waste":return this.isFree();case"deck":return true}},validFoundationTarget:function(d){if(!d){return this.rank===1}else{return d.suit===this.suit&&d.rank===this.rank-1}},validTarget:function(d){var e=d.last();switch(d.field){case"tableau":if(!e){return this.rank===13}else{return !e.isFaceDown&&e.color!==this.color&&e.rank===this.rank+1}case"foundation":return this.validFoundationTarget(e);default:return false}}})});c.Array.each(a.fields,function(d){a[d].Stack=instance(a.Stack)});c.mix(a.Stack,{validTarget:function(d){return d.field==="tableau"&&this.first().validTarget(d)}},true);c.mix(a.Tableau.Stack,{setCardPosition:function(d){var e=this.cards.last(),g=e?e.top+e.rankHeight:this.top,f=this.left;d.left=f;d.top=g}},true);c.mix(a.Waste.Stack,{setCardPosition:function(e){var g=this.cards,f=g.last(),d=this;c.Array.each(g.slice(-2),function(h,j){h.left=d.left;h.top=d.top});if(!g.length){e.left=d.left}if(g.length===1){e.left=d.left+0.2*e.width}else{if(g.length>1){f.left=d.left+0.2*e.width;f.top=d.top;e.left=d.left+0.4*e.width}}e.top=d.top}},true);c.mix(a.Deck.Stack,{createNode:function(){b.Stack.createNode.call(this);this.node.on("click",b.Events.clickEmptyDeck);this.node.addClass("playable")}},true)},"0.0.1",{requires:["solitaire"]});YUI.add("klondike1t",function(d){var c=d.Solitaire,b=c.Klondike,a=c.Klondike1T=instance(b,{redeal:c.noop,turnOver:function(){var e=this.deck.stacks[0],g=this.waste.stacks[0],f=e.last();f&&f.faceUp().moveTo(g)},Waste:instance(b.Waste,{Stack:instance(c.Stack)}),Deck:instance(b.Deck,{Stack:instance(b.Deck.Stack,{createNode:function(){b.Deck.Stack.createNode.call(this);this.node.removeClass("playable")}})})})},"0.0.1",{requires:["klondike"]});YUI.add("flower-garden",function(b){var a=b.Solitaire,c=b.Solitaire.FlowerGarden=instance(a,{fields:["Foundation","Reserve","Tableau"],deal:function(){var g,f=this.deck,e=this.reserve.stacks[0],d=0,h,j=this.tableau.stacks;for(h=0;h<36;h++){g=f.pop();j[d].push(g.faceUp());d++;if(d===6){d=0}}while(g=f.pop()){g.faceUp();e.push(g)}},height:function(){return this.Card.base.height*5.5},maxStackHeight:function(){return this.Card.height*4.4},Stack:instance(a.Stack),Foundation:{stackConfig:{total:4,layout:{hspacing:1.25,top:0,left:function(){return a.Card.width*4.25}}},field:"foundation",draggable:false},Reserve:{stackConfig:{total:1,layout:{hspacing:1.25,top:function(){return a.Card.height*4.5},left:function(){return a.Card.width*3}}},field:"reserve",draggable:true},Tableau:{stackConfig:{total:6,layout:{hspacing:1.25,top:function(){return a.Card.height*1.25},left:function(){return a.Card.width*3}}},field:"tableau",draggable:true},Card:instance(a.Card,{rankHeight:24,createProxyStack:function(){var d;switch(this.stack.field){case"foundation":this.proxyStack=null;break;case"tableau":return a.Card.createProxyStack.call(this);case"reserve":d=instance(this.stack);d.cards=[this];this.proxyStack=d;break}return this.proxyStack},moveTo:function(e){var h=this.stack.cards,f=h.indexOf(this),g,d;a.Card.moveTo.call(this,e);h.splice(f,0,null);for(g=f+1,d=h.length;g<d;g++){h[g].pushPosition()}h.splice(f,1)},validTarget:function(d){var e=d.last();switch(d.field){case"tableau":if(!e){return true}else{return e.rank===this.rank+1}break;case"foundation":if(!e){return this.rank===1}else{return e.suit===this.suit&&e.rank===this.rank-1}break;default:return false;break}},isFree:function(){if(this.stack.field==="reserve"){return true}else{return a.Card.isFree.call(this)}}})},true);b.Array.each(c.fields,function(d){c[d].Stack=instance(c.Stack)},true);b.mix(c.Stack,{images:{foundation:"freeslot.png",tableau:"freeslot.png"},validTarget:function(d){return d.field==="tableau"&&this.first().validTarget(d)},validCard:function(){return false}},true);b.mix(c.Tableau.Stack,{setCardPosition:function(d){var e=this.cards.last(),g=e?e.top+a.game.Card.rankHeight:this.top,f=this.left;d.left=f;d.top=g}},true);b.mix(c.Reserve.Stack,{setCardPosition:function(d){var e=this.cards.last(),g=e?e.left+a.Card.width*0.4:this.left,f=this.top;d.left=g;d.top=f},update:function(e){if(e){return}var d=this,f;b.Array.each(this.cards,function(g,h){f=d.left+h*g.width*0.4;if(f!==g.left){g.left=f;g.updatePosition()}})}},true)},"0.0.1",{requires:["solitaire"]});YUI.add("forty-thieves",function(c){var a=c.Solitaire,b=c.Solitaire.FortyThieves=instance(a,{fields:["Foundation","Deck","Waste","Tableau"],deal:function(){var f,d,h,e=this.deck,g=this.tableau.stacks;for(h=0;h<4;h++){for(d=0;d<10;d++){f=e.pop().faceUp();g[d].push(f)}}e.createStack()},redeal:function(){},turnOver:function(){var d=this.deck.stacks[0],g=this.waste.stacks[0],f,e;for(f=d.cards.length,e=f-1;f>e&&f;f--){d.last().faceUp().moveTo(g)}},Stack:instance(a.Stack),Foundation:{stackConfig:{total:8,layout:{hspacing:1.25,top:0,left:function(){return a.Card.width*3}}},field:"foundation",draggable:false},Deck:instance(a.Deck,{count:2,stackConfig:{total:1,layout:{hspacing:0,top:0,left:0}},field:"deck",init:function(){a.Deck.init.call(this);c.Array.each(this.cards,function(d){d.faceDown()})},createStack:function(){var e,d;for(e=this.cards.length-1;e>=0;e--){this.stacks[0].push(this.cards[e])}},}),Waste:{stackConfig:{total:1,layout:{hspacing:0,top:0,left:function(){return a.Card.width*1.25}}},field:"waste",draggable:true},Tableau:{stackConfig:{total:10,layout:{hspacing:1.31,top:function(){return a.Card.height*1.5},left:0}},field:"tableau",draggable:true},Card:instance(a.Card,{validTarget:function(d){var e=d.last();switch(d.field){case"tableau":if(!e){return this.rank===13}else{return !e.isFaceDown&&e.suit===this.suit&&e.rank===this.rank+1}break;case"foundation":if(!e){return this.rank===1}else{return e.suit===this.suit&&e.rank===this.rank-1}break;default:return false}}})});c.Array.each(b.fields,function(d){b[d].Stack=instance(b.Stack)});c.mix(b.Stack,{cssClass:"freestack",validTarget:function(d){return d.field==="tableau"&&this.first().validTarget(d)},validCard:function(){return false}},true);c.mix(b.Tableau.Stack,{setCardPosition:function(d){var e=this.cards.last(),g=e?e.top+e.rankHeight:this.top,f=this.left;d.left=f;d.top=g}},true);c.mix(b.Deck.Stack,{createDOMElement:function(){a.Stack.createDOMElement.call(this);this.node.on("click",a.Events.clickEmptyDeck)}},true);b.Foundation.Stack.cssClass="freefoundation"},"0.0.1",{requires:["solitaire"]});YUI.add("freecell",function(c){var b=c.Solitaire,a=c.Solitaire.Freecell=instance(b,{fields:["Foundation","Reserve","Tableau"],deal:function(){var e,d=0,f=this.tableau.stacks;while(e=this.deck.pop()){f[d].push(e.faceUp());d++;if(d===8){d=0}}},openSlots:function(g){var j=1,e=0,h,d,k=this.reserve.stacks,f=this.tableau.stacks;for(h=0;h<4;h++){d=k[h];!d.last()&&j++}for(h=0;h<8;h++){d=f[h];g!==d&&!f[h].last()&&e++}j*=Math.pow(2,e);return j},Stack:instance(b.Stack),height:function(){return this.Card.base.height*5},Foundation:{stackConfig:{total:4,layout:{hspacing:1.25,top:0,left:function(){return b.Card.width*6}}},field:"foundation",draggable:false},Reserve:{stackConfig:{total:4,layout:{hspacing:1.25,top:0,left:0}},field:"reserve",draggable:true},Tableau:{stackConfig:{total:8,layout:{hspacing:1.25,top:function(){return b.Card.height*1.5},left:0}},field:"tableau",draggable:true},Card:instance(b.Card,{playable:function(){switch(this.stack.field){case"reserve":return true;case"tableau":return this.createProxyStack();case"foundation":return false}},createProxyStack:function(){var d=b.Card.createProxyStack.call(this);this.proxyStack=d&&d.cards.length<=a.openSlots(d)?d:null;return this.proxyStack},validTarget:function(d){var e=d.last();switch(d.field){case"tableau":if(!e){return true}else{return e.color!==this.color&&e.rank===this.rank+1}break;case"foundation":if(!e){return this.rank===1}else{return e.suit===this.suit&&e.rank===this.rank-1}break;case"reserve":return !e;break}}})});c.Array.each(a.fields,function(d){a[d].Stack=instance(a.Stack)},true);c.mix(a.Stack,{validTarget:function(d){if(d.field!=="tableau"||!this.first().validTarget(d)){return false}return this.cards.length<=a.openSlots(d,this.last())}},true);c.mix(a.Tableau.Stack,{setCardPosition:function(d){var e=this.cards.last(),g=e?e.top+e.rankHeight:this.top,f=this.left;d.left=f;d.top=g}},true)},"0.0.1",{requires:["solitaire"]});YUI.add("grandfathers-clock",function(e){function b(h,g){var f=h.length;g%=f;if(g<0){g+=f}return h[g]}function d(f,h,g){if(f<=h){return f<=g&&g<=h}else{return f<=g||g<=h}}e.namespace("Solitaire.GClock");var c=e.Solitaire,a=e.Solitaire.GClock=instance(c,{fields:["Foundation","Tableau"],deal:function(){var k,o=this.deck,g=o.cards,j=[],p=["d","c","h","s"],q,n=0,m=51,l,f=this.foundation.stacks,h=this.tableau.stacks;while(m>=0){k=g[m];q=false;for(l=2;l<=13;l++){if(k.rank===l&&k.suit===b(p,l)){q=true;g.splice(m,1);j[l-2]=k.faceUp();break}}if(!q){h[n].push(k.faceUp());n=(n+1)%8}m--}for(m=0;m<12;m++){f[(m+2)%12].push(j[m])}},height:function(){return this.Card.base.height*6.7},Stack:instance(c.Stack),Foundation:{stackConfig:{total:12,layout:{hspacing:1.25,top:function(){return c.Card.height*3},left:function(){return c.Card.width*3.25}}},field:"foundation",draggable:false},Tableau:{stackConfig:{total:8,layout:{hspacing:1.25,top:0,left:function(){return c.Card.width*7.25}}},field:"tableau",draggable:true},Card:instance(c.Card,{createProxyStack:function(){var f;switch(this.stack.field){case"foundation":this.proxyStack=null;break;case"tableau":return c.Card.createProxyStack.call(this)}return this.proxyStack},validTarget:function(f){var h=f.last(),i,g;switch(f.field){case"tableau":if(!h){return true}else{return h.rank===this.rank+1}break;case"foundation":g=(f.index()+3)%12;i=h.rank;return h.suit===this.suit&&(h.rank+1)%13===this.rank%13&&d(f.first().rank,g,this.rank);break;default:return false;break}}})});e.Array.each(a.fields,function(f){a[f].Stack=instance(a.Stack)},true);e.mix(a.Stack,{validTarget:function(f){return f.field==="tableau"&&this.first().validTarget(f)},validCard:function(){return false}},true);e.mix(a.Tableau.Stack,{setCardPosition:function(f){var g=this.cards.last(),i=g?g.top+g.rankHeight:this.top,h=this.left;f.left=h;f.top=i}},true);e.mix(a.Foundation.Stack,{index:function(){return a.foundation.stacks.indexOf(this)},layout:function(g,f){var j=Math.sin(Math.PI*f/6)*c.Card.height*2.25,h=Math.cos(Math.PI*f/6)*c.Card.width*3;this.top=j+normalize(g.top);this.left=h+normalize(g.left)}},true)},"0.0.1",{requires:["solitaire"]});YUI.add("monte-carlo",function(c){var b=c.Solitaire,a=c.Solitaire.MonteCarlo=instance(b,{fields:["Foundation","Deck","Tableau"],createEvents:function(){b.createEvents.call(this);c.delegate("click",b.Events.clickEmptyDeck,b.selector,".stack");c.on("solitaire|endTurn",this.deckPlayable);c.on("solitaire|afterSetup",this.deckPlayable)},deckPlayable:function(){var e=false,d=Game.deck.stacks[0].node;Game.eachStack(function(f){if(!e&&c.Array.indexOf(f.cards,null)!==-1){e=true}},"tableau");if(e){d.addClass("playable")}else{d.removeClass("playable")}},deal:function(){var f,d,g,e=this.deck,h=this.tableau.stacks;for(d=0;d<5;d++){for(g=0;g<5;g++){f=e.pop().faceUp();h[d].push(f)}}e.createStack()},redeal:function(){var j=this.tableau.stacks,e=this.deck.stacks[0],k=c.Array.reduce(j,[],function(l,i){return l.concat(i.compact())}),d=k.length,f,h,g;c.Array.each(j,function(i){i.node.remove();i.cards=[];i.createNode()});for(g=h=0;g<d;g++){if(g&&!(g%5)){h++}j[h].push(k[g])}while(g<25&&e.cards.length){if(!(g%5)){h++}f=e.last().faceUp();f.moveTo(j[h]);f.node.setStyle("zIndex",100-g);g++}},height:function(){return this.Card.base.height*6},Stack:instance(b.Stack,{images:{deck:"freeslot.png"},updateDragGroups:function(){var d=b.activeCard;c.Array.each(this.cards,function(e){if(!e){return}if(d.validTarget(e)){e.node.drop.addToGroup("open")}else{e.node.drop.removeFromGroup("open")}})},index:function(){return 0}}),Events:instance(b.Events,{drop:function(h){var g=b.activeCard,d=b.game.foundation.stacks[0],f=h.drop.get("node").getData("target");if(!g){return}b.stationary(function(){f.moveTo(d);g.moveTo(d)});b.endTurn()}}),Foundation:{stackConfig:{total:1,layout:{spacing:0,top:0,left:function(){return b.Card.width*10.5}}},field:"foundation"},Deck:instance(b.Deck,{stackConfig:{total:1,layout:{spacing:0,top:0,left:function(){return b.Card.width*2}}},field:"deck",createStack:function(){var e,d;for(e=0,d=this.cards.length;e<d;e++){this.stacks[0].push(this.cards[e])}}}),Tableau:{stackConfig:{total:5,layout:{cardGap:1.25,vspacing:1.25,hspacing:0,top:0,left:function(){return b.Card.width*3.5}}},field:"tableau"},Card:instance(b.Card,{row:function(){return this.stack.index()},column:function(){return this.stack.cards.indexOf(this)},validTarget:function(d){if(!(this.rank===d.rank&&d.isFree())){return false}return Math.abs(d.row()-this.row())<=1&&Math.abs(d.column()-this.column())<=1},createProxyStack:function(){var d=null;if(this.isFree()){d=instance(this.stack);d.cards=this.proxyCards()}this.proxyStack=d;return this.proxyStack},proxyCards:function(){return[this]},isFree:function(){return this.stack.field==="tableau"},turnOver:function(){this.stack.field==="deck"&&b.game.redeal()}})});c.Array.each(a.fields,function(d){a[d].Stack=instance(a.Stack)});c.mix(a.Tableau.Stack,{deleteItem:function(d){var f=this.cards,e=f.indexOf(d);if(e!==-1){f[e]=null}},setCardPosition:function(d){var f=this.cards.last(),e=a.Tableau.stackConfig.layout,h=this.top,g=f?f.left+d.width*e.cardGap:this.left;d.left=g;d.top=h},compact:function(){var h=this.cards,e,g=[],f,d;for(f=0,d=h.length;f<d;f++){e=h[f];if(e){g.push(e);e.pushPosition()}}return g},index:function(){return b.game.tableau.stacks.indexOf(this)}},true);c.mix(a.Deck.Stack,{updateDragGroups:function(){var e=b.activeCard,d=this.last();if(!d){return}if(e.validTarget(d)){d.node.drop.addToGroup("open")}else{d.node.drop.removeFromGroup("open")}}},true)},"0.0.1",{requires:["solitaire","array-extras"]});YUI.add("pyramid",function(c){var a=c.Solitaire,b=c.Solitaire.Pyramid=instance(a,{fields:["Foundation","Deck","Waste","Tableau"],deal:function(){var f,d,g,e=this.deck,h=this.tableau.stacks;for(d=0;d<7;d++){for(g=0;g<=d;g++){f=e.pop().faceUp();h[d].push(f)}}e.createStack();e.last().faceUp()},turnOver:function(){var d=this.deck.stacks[0],e=this.waste.stacks[0];if(d.cards.length===1){return}d.last().moveTo(e)},height:function(){return this.Card.base.height*4.85},Stack:instance(a.Stack,{images:{},updateDragGroups:function(){var d=a.activeCard;c.Array.each(this.cards,function(e){if(!e){return}if(d.validTarget(e)){e.node.drop.addToGroup("open")}else{e.node.drop.removeFromGroup("open")}})}}),Events:instance(a.Events,{dragCheck:function(d){if(!a.game.autoPlay.call(this)){a.Events.dragCheck.call(this)}},drop:function(h){var g=a.activeCard,d=a.game.foundation.stacks[0],f=h.drop.get("node").getData("target");if(!g){return}a.stationary(function(){f.moveTo(d);g.moveTo(d)});a.endTurn()}}),Foundation:{stackConfig:{total:1,layout:{hspacing:0,top:0,left:function(){return a.Card.width*8}}},field:"foundation"},Deck:instance(a.Deck,{stackConfig:{total:1,layout:{hspacing:0,top:0,left:0}},field:"deck",createStack:function(){var e,d;for(e=0,d=this.cards.length;e<d;e++){this.stacks[0].push(this.cards[e])}}}),Waste:{stackConfig:{total:1,layout:{hspacing:0,top:0,left:function(){return a.Card.width*1.5}}},field:"waste"},Tableau:{stackConfig:{total:7,layout:{vspacing:0.6,hspacing:-0.625,cardGap:1.25,top:0,left:function(){return a.Card.width*5}}},field:"tableau"},Card:instance(a.Card,{validTarget:function(d){if(d.field==="foundation"){return this.isFree()&&this.rank===13}if(d.isFree()){return this.rank+d.rank===13}return false},createProxyNode:function(){return this.rank===13?"":a.Card.createProxyNode.call(this)},createProxyStack:function(){var d=null;if(this.isFree()){d=instance(this.stack);d.cards=this.proxyCards()}this.proxyStack=d;return this.proxyStack},proxyCards:function(){return[this]},isFree:function(){var d=this.stack,h=d.index(),f=d.cards.indexOf(this),e=a.game,g=d.next();if(d.field==="deck"||d.field==="waste"){return !this.isFaceDown}else{return !(this.stack.field==="foundation"||g&&(g.cards[f]||g.cards[f+1]))}},turnOver:function(){this.stack.field==="deck"&&!this.isFaceDown&&a.game.turnOver()}})});c.Array.each(b.fields,function(d){b[d].Stack=instance(b.Stack)});c.mix(b.Tableau.Stack,{deleteItem:function(d){var f=this.cards,e=f.indexOf(d);if(e!==-1){f[e]=null}},setCardPosition:function(d){var f=b.Tableau.stackConfig.layout,e=this.cards.last(),h=this.top,g=e?e.left+d.width*f.cardGap:this.left;d.left=g;d.top=h;d.zIndex=this.index()*10}},true);c.mix(b.Deck.Stack,{deleteItem:function(d){b.Stack.deleteItem.call(this,d);this.update()},update:function(d){var e=this.last();e&&e.faceUp(d)},updateDragGroups:function(){var e=a.activeCard,d=this.last();if(!d){return}if(e.validTarget(d)){d.node.drop.addToGroup("open")}else{d.node.drop.removeFromGroup("open")}}},true);b.Waste.Stack.updateDragGroups=b.Deck.Stack.updateDragGroups},"0.0.1",{requires:["solitaire"]});YUI.add("russian-solitaire",function(d){var b=d.Solitaire,c=b.Yukon,a=b.RussianSolitaire=instance(c,{Card:instance(c.Card)});a.Card.validTarget=function(e){var f=e.last();switch(e.field){case"tableau":if(!f){return this.rank===13}else{return !f.isFaceDown&&f.suit===this.suit&&f.rank===this.rank+1}case"foundation":if(!f){return this.rank===1}else{return f.suit===this.suit&&f.rank===this.rank-1}default:return false}}},"0.0.1",{requires:["yukon"]});YUI.add("scorpion",function(c){var b=c.Solitaire,a=b.Scorpion=instance(b,{fields:["Foundation","Deck","Tableau"],createEvents:function(){b.AutoStackClear.register();b.createEvents.call(this)},deal:function(){var f,d,h,e=this.deck,g=this.tableau.stacks;for(h=0;h<7;h++){for(d=0;d<7;d++){f=e.pop();if(!(h<3&&d<4)){f.faceUp()}g[d].push(f)}}e.createStack()},turnOver:function(){var e=this.deck.stacks[0],g=this.tableau.stacks,f,d;for(f=0;f<3;f++){e.last().faceUp().moveTo(g[f])}},height:function(){return this.Card.base.height*5.6},Stack:instance(b.Stack),Deck:instance(b.Deck,{stackConfig:{total:1,layout:{top:0,left:function(){return b.Card.width*9}},},field:"deck",createStack:function(){var e,d;for(e=this.cards.length-1;e>=0;e--){this.stacks[0].push(this.cards[e])}},}),Foundation:{stackConfig:{total:4,layout:{top:function(){return b.Card.height*1.1},left:function(){return b.Card.width*9},vspacing:1.1,}},field:"foundation"},Tableau:{stackConfig:{total:7,layout:{hspacing:1.25,top:0,left:0}},field:"tableau"},Card:instance(b.Card,{playable:function(){var d=this.stack.field;return d==="deck"||d==="tableau"&&!this.isFaceDown},validTarget:function(d){var e=d.last();if(d.field!=="tableau"){return false}if(!e){return this.rank===13}else{return !e.isFaceDown&&e.suit===this.suit&&e.rank===this.rank+1}}})});c.Array.each(a.fields,function(d){a[d].Stack=instance(a.Stack)});c.mix(a.Stack,{validTarget:function(d){return d.field==="tableau"&&this.first().validTarget(d)},validProxy:function(d){return true},validTarget:function(d){var g,f=this.cards,e;switch(d.field){case"tableau":return this.first().validTarget(d);break;case"foundation":g=this.last.rank;if(f.length!==13){return false}for(e=0;e<13;e++){if(f[e].rank!==g){return false}}return true;break}}},true);c.mix(a.Tableau.Stack,{setCardPosition:function(d){var e=this.cards.last(),g=e?e.top+e.rankHeight:this.top,f=this.left;d.left=f;d.top=g}},true)},"0.0.1",{requires:["auto-stack-clear"]});YUI.add("spider",function(d){var b=d.Solitaire,c=b.Spider=instance(b,{fields:["Foundation","Deck","Tableau"],createEvents:function(){b.AutoStackClear.register();b.createEvents.call(this)},deal:function(){var e=0,f=this.deck,g=this.tableau.stacks,h;for(h=0;h<5;h++){for(e=0;e<10;e++){if(e<4||h<4){g[e].push(f.pop())}}}for(e=0;e<10;e++){g[e].push(f.pop().faceUp())}f.createStack()},redeal:function(){},turnOver:function(){var f=this.deck.stacks[0],g,e;if(a()){return}this.eachStack(function(h){var i=f.last();if(i){i.faceUp().moveTo(h).after(function(){this.stack.updateCardsPosition()})}},"tableau")},Stack:instance(b.Stack),Foundation:{stackConfig:{total:8,layout:{hspacing:1.25,top:0,left:function(){return b.Card.width*2.5}}},field:"foundation",draggable:false},Deck:instance(b.Deck,{count:2,stackConfig:{total:1,layout:{hspacing:0,top:0,left:0}},field:"deck"}),Tableau:{stackConfig:{total:10,layout:{hspacing:1.25,top:function(){return b.Card.height*1.5},left:0}},field:"tableau",},Card:instance(b.Card,{playable:function(){var e=this.stack[this.index-1];switch(this.stack.field){case"tableau":return this.createProxyStack();case"deck":return !a();case"foundation":return false}},validTarget:function(e){if(e.field!=="tableau"){return false}var f=e.last();return !f||!f.isFaceDown&&f.rank===this.rank+1}})});function a(){return d.Array.some(Game.tableau.stacks,function(e){return !e.cards.length})}d.Array.each(c.fields,function(e){c[e].Stack=instance(c.Stack)});d.mix(c.Stack,{validCard:function(e){return e.suit===this.cards.last().suit},validTarget:function(e){switch(e.field){case"tableau":return this.first().validTarget(e);break;case"foundation":return this.cards.length===13;break}}},true);d.mix(c.Tableau.Stack,{setCardPosition:function(e){var f=this.cards.last(),h=f?f.top+f.rankHeight:this.top,g=this.left;e.left=g;e.top=h}},true)},"0.0.1",{requires:["auto-stack-clear"]});YUI.add("spider1s",function(b){var a=b.Solitaire.Spider1S=instance(b.Solitaire.Spider);a.Deck=instance(b.Solitaire.Spider.Deck,{suits:["s"],count:8})},"0.0.1",{requires:["spider"]});YUI.add("spider2s",function(b){var a=b.Solitaire.Spider2S=instance(b.Solitaire.Spider);a.Deck=instance(b.Solitaire.Spider.Deck,{suits:["s","h"],count:4})},"0.0.1",{requires:["spider"]});YUI.add("spiderette",function(e){var b=e.Solitaire,a=b.Klondike,d=b.Spider,c=e.Solitaire.Spiderette=instance(d,{height:a.height,deal:a.deal,Tableau:instance(d.Tableau,{stackConfig:a.Tableau.stackConfig}),Foundation:instance(d.Foundation,{stackConfig:a.Foundation.stackConfig}),Deck:instance(d.Deck,{count:1})})},"0.0.1",{requires:["klondike","spider"]});YUI.add("tri-towers",function(b){var a=b.Solitaire,c=b.Solitaire.TriTowers=instance(a,{fields:["Deck","Foundation","Tableau"],width:function(){return this.Card.base.width*15},height:function(){return this.Card.base.height*5},createEvents:function(){b.on("solitaire|endTurn",function(){var d=a.game.tableau.stacks,e;for(e=0;e<3;e++){b.fire("tableau:afterPop",d[e])}});a.createEvents.call(this)},deal:function(){var g,d,j=this.tableau.stacks,e=this.deck,f=this.foundation.stacks[0],h,k;for(d=0;d<4;d++){k=(d+1)*3;for(h=0;h<k;h++){g=e.pop();j[d].push(g);d===3&&g.faceUp()}}g=e.pop().faceUp();f.push(g);e.createStack()},turnOver:function(){var d=this.deck.stacks[0],e=this.foundation.stacks[0],f=d.last();f&&f.faceUp().moveTo(e)},isWon:function(){var d=true;this.eachStack(function(e){e.eachCard(function(f){if(f){d=false}return d})},"tableau");return d},Deck:instance(a.Deck,{field:"deck",stackConfig:{total:1,layout:{hspacing:0,top:function(){return a.Card.height*4},left:0}},createStack:function(){var e,d;for(e=0,d=this.cards.length;e<d;e++){this.stacks[0].push(this.cards[e])}}}),Tableau:{field:"tableau",stackConfig:{total:4,layout:{rowGaps:[3.75,2.5,1.25,0],cardGap:1.25,vspacing:0.6,hspacing:-0.625,top:0,left:function(){return a.Card.width*1.875}}}},Foundation:{field:"foundation",stackConfig:{total:1,layout:{hspacing:0,top:function(){return a.Card.height*4},left:function(){return a.Card.width*4}}}},Events:instance(a.Events,{dragCheck:function(d){this.getCard().autoPlay();this._afterDragEnd();d.halt()}}),Card:instance(a.Card,{validTarget:function(d){if(d.field!=="foundation"){return false}var e=d.last(),f=Math.abs(this.rank-e.rank);return f===1||f===12},playable:function(){var d=this.stack;return(d.field==="deck"&&this===d.last())||(this.isFree()&&this.validTarget(Game.foundation.stacks[0]))},isFree:function(){var d=this.stack,g=d.next(),h=this.tower(),e=d.cards.indexOf(this),f;if(d.field!=="tableau"){return false}if(!g){return true}for(f=0;f<2;f++){if(g.cards[e+h+f]){return false}}return true},tower:function(){var d=this.stack,e=d.cards.indexOf(this),f=d.index()+1;return Math.floor(e/f)}}),Stack:instance(a.Stack,{images:{}})},true);b.Array.each(c.fields,function(d){c[d].Stack=instance(c.Stack)});b.mix(c.Tableau.Stack,{deleteItem:function(d){var f=this.cards,e=f.indexOf(d);if(e!==-1){f[e]=null}},setCardPosition:function(f){var l=this.last(),j=this.top,e,i,k,h=c.Tableau.stackConfig.layout,d=h.rowGaps,g=h.cardGap;if(l){e=l.left+f.width*g;i=this.cards.length;k=this.index()+1;if(!(i%k)){e+=d[k-1]*f.width}}else{e=this.left}f.top=j;f.left=e;f.zIndex=this.index()*10}},true);b.mix(c.Deck.Stack,{setCardPosition:function(d){var e=this.last(),g,f,h;g=this.top;if(e){f=e.left+d.width*0.1;h=e.zIndex+1}else{f=this.left;h=0}d.top=g;d.left=f;d.zIndex=h}},true)},"0.0.1",{requires:["solitaire"]});YUI.add("will-o-the-wisp",function(c){var b=c.Solitaire,a=c.Solitaire.WillOTheWisp=instance(b.Spiderette,{deal:function(){var d=this.deck,e;for(e=0;e<3;e++){this.eachStack(function(f){var g=d.pop();if(e===2){g.faceUp()}f.push(g)},"tableau")}d.createStack()}})},"0.0.1",{requires:["spiderette"]});YUI.add("yukon",function(c){var a=c.Solitaire,b=a.Yukon=instance(a,{fields:["Foundation","Tableau"],deal:function(){var g,e=6,d=0,f=this.deck,h=this.tableau.stacks;while(e>=0){g=f.pop().faceUp();h[6-e].push(g);for(d=7-e;d<7;d++){g=f.pop();h[d].push(g)}e--}d=1;while(f.cards.length){g=f.pop().faceUp();h[d].push(g);d=(d%6)+1}},height:function(){return this.Card.base.height*4.8},Stack:instance(a.Stack),Foundation:{stackConfig:{total:4,layout:{vspacing:1.25,top:0,left:function(){return a.Card.width*9}}},field:"foundation",draggable:false},Tableau:{stackConfig:{total:7,layout:{hspacing:1.25,top:0,left:0}},field:"tableau",draggable:true},Card:instance(a.Card,{playable:function(){return this.stack.field==="tableau"&&!this.isFaceDown},validTarget:function(d){var e=d.last();switch(d.field){case"tableau":if(!e){return this.rank===13}else{return !e.isFaceDown&&e.color!==this.color&&e.rank===this.rank+1}break;case"foundation":if(!e){return this.rank===1}else{return e.suit===this.suit&&e.rank===this.rank-1}break;default:return false}}})});c.Array.each(b.fields,function(d){b[d].Stack=instance(b.Stack)});c.mix(b.Stack,{validTarget:function(d){return d.field==="tableau"&&this.first().validTarget(d)},validProxy:function(d){return true}},true);c.mix(b.Tableau.Stack,{setCardPosition:function(d){var e=this.cards.last(),g=e?e.top+e.rankHeight:this.top,f=this.left;d.left=f;d.top=g}},true)},"0.0.1",{requires:["solitaire"]});(function(){var f={name:"klondike",game:null},m=YUI({base:"js/yui-unpack/yui/build/"}),a,d={agnes:"Agnes",klondike:"Klondike",klondike1t:"Klondike1T","flower-garden":"FlowerGarden","forty-thieves":"FortyThieves",freecell:"Freecell",golf:"Golf","grandfathers-clock":"GClock","monte-carlo":"MonteCarlo",pyramid:"Pyramid","russian-solitaire":"RussianSolitaire",scorpion:"Scorpion",spider:"Spider",spider1s:"Spider1S",spider2s:"Spider2S",spiderette:"Spiderette","tri-towers":"TriTowers","will-o-the-wisp":"WillOTheWisp",yukon:"Yukon"},v=["auto-turnover","statistics","solver-freecell","solitaire-autoplay","solitaire-ios","solitaire-background-fix"],x=(function(){var C=null,z,B={position:"absolute",display:"none",backgroundColor:"#000",opacity:0.7,top:0,left:0,width:0,height:0,zIndex:1000,},A=function(){if(C===null){C=a.Node.create("<div>");C.setStyles(B);z=a.one("body").append(C)}return C};return{show:function(){var D=A();B.display="block";B.width=D.get("winWidth");B.height=D.get("winHeight");D.setStyles(B)},hide:function(){B.display="none";A().setStyles(B)}}}()),y={selected:null,fade:false,init:function(){this.refit()},refit:function(){var A=a.one("#game-chooser"),z=A.get("winHeight");A.setStyle("min-height",z)},show:function(z){if(!this.selected){this.select(f.name)}if(z){x.show();this.fade=true}a.one("#game-chooser").addClass("show");a.one("body").addClass("scrollable")},hide:function(){if(this.fade){x.hide()}a.one("#game-chooser").removeClass("show");a.fire("gamechooser:hide",this);a.one("body").removeClass("scrollable")},choose:function(){if(!this.selected){return}this.hide();c(this.selected)},select:function(z){var B=a.one("#"+z+"> div"),A=this.selected;if(A!==z){this.unSelect()}if(B){this.selected=z;new a.Node(document.getElementById(z)).addClass("selected")}if(A&&A!==z){a.fire("gamechooser:select",this)}},unSelect:function(){if(!this.selected){return}new a.Node(document.getElementById(this.selected)).removeClass("selected");this.selected=null}},n={dondorf:{sizes:[61,79,95,122],61:{hiddenRankHeight:7,rankHeight:25,dimensions:[61,95]},79:{hiddenRankHeight:10,rankHeight:32,dimensions:[79,123]},95:{hiddenRankHeight:12,rankHeight:38,dimensions:[95,148]},122:{hiddenRankHeight:15,rankHeight:48,dimensions:[122,190]}},snapToSize:function(z){var B,A=B.sizes;z=clamp(z,A[0],A[A.length-1])>>>0;while(a.Array.indexOf(A,z)===-1){z++}return z},load:function(z){var A=a.Solitaire,B=A.Card.base;if(!(z in this)){z="dondorf"}if(B.theme!==z){this.set(z,122)}},set:function(z,A){var B=this[z][A];a.mix(a.Solitaire.Card.base,{theme:z+"/"+A,hiddenRankHeight:B.hiddenRankHeight,rankHeight:B.rankHeight,width:B.dimensions[0],height:B.dimensions[1]},true)}};function u(){var A=v.slice(),z;for(z in d){if(d.hasOwnProperty(z)){A.unshift(z)}}return A}function e(z){a=z;b();a.on("domready",i)}function j(){y.select(this._node.id);y.choose()}function q(){a.on("click",p,a.one("#restart"));a.on("click",function(){y.show(false)},a.one("#choose_game"));a.on("click",function(){f.game.undo()},a.one("#undo"));a.on("click",h,a.one("#new_deal"));a.on("click",r,a.one(".chromestore"));a.delegate("click",j,"#descriptions","li");a.on("click",function(){y.hide()},a.one("#close-chooser"));a.one("document").on("keydown",function(z){z.keyCode===27&&y.hide()});a.on("afterSetup",function(){f.game.stationary(function(){w()})});o()}function o(){var B,z=250,A;if(window.addEventListener){A="addEventListener"}else{if(window.attachEvent){A="attachEvent"}}window[A](a.Solitaire.Application.resizeEvent,function(){clearTimeout(B);B=setTimeout(w,z)},false)}function w(){var A=f.game,D=A.container(),E=a.Solitaire.padding,F=a.Solitaire.offset,C=D.get("winWidth")-E.x,z=D.get("winHeight")-E.y,B=1;a.Solitaire.Application.windowHeight=z;B=Math.min((C-F.left)/A.width(),(z-F.top)/A.height());f.game.resize(B);y.refit()}function c(z){var A=1000*3600*24*14;f.name=z;f.game=a.Solitaire[d[z]];a.Cookie.set("options",z,{expires:new Date(new Date().getTime()+A)});h()}function k(){var z=a.Cookie.get("options");z&&(f.name=z);n.load("dondorf")}function i(){var z=a.Cookie.get("saved-game");q();k();t.preload();t.loaded(function(){g();if(z){l();f.game=a.Solitaire[d[f.name]];f.game.loadGame(z)}else{c(f.name)}});y.init()}function l(){a.all(".stack, .card").remove()}function p(){var A=a.Cookie.get("initial-game"),z=f.game;if(A){l();z.cleanup();z.loadGame(A);z.save()}}function h(){var z=f.game;l();z.cleanup();z.newGame()}function b(){a.Solitaire.Application={windowHeight:0,resizeEvent:"resize",GameChooser:y,newGame:h}}function r(){var z=1000*3600*24*365;a.one(".chromestore").addClass("hidden");a.Cookie.set("disable-chromestore-link",true,{expires:new Date(new Date().getTime()+z)})}function g(){if(a.UA.chrome&&!a.Cookie.get("disable-chromestore-link",Boolean)){a.one(".chromestore").removeClass("hidden")}}var t={loadingCount:0,loaded:function(z){if(this.loadingCount){setTimeout(function(){this.loaded(z)}.bind(this),100)}else{a.one(".loading").addClass("hidden");z();x.hide()}},load:function(A){var z=new Image;z.onload=function(){--this.loadingCount}.bind(this);z.src=A;this.loadingCount++},preload:function(){var A,z=["agnes","flower-garden","forty-thieves","freecell","gclock","golf","klondike1t","klondike","montecarlo","pyramid","scorpion","spider1s","spider2s","spiderette","spider","tritowers","will-o-the-wisp","yukon"];a.Array.each(["s","h","c","d"],function(B){for(A=1;A<=13;A++){this.load(a.Solitaire.Card.base.theme+"/"+B+A+".png")}},this);this.load(a.Solitaire.Card.base.theme+"/facedown.png");a.Array.each(z,function(B){this.load("layouts/mini/"+B+".png")},this);x.show();a.one(".loading").removeClass("hidden")}};m.use.apply(m,u().concat(e))}());